function setCookie(t,e,i){var s,n=new Date;n.setTime(n.getTime()+24*i*60*60*1e3),s="expires="+n.toUTCString(),document.cookie=t+"="+e+";"+s+";path=/;secure;"}function getCookie(t){var e,i,s=t+"=",n=document.cookie.split(";");for(e=0;e<n.length;e++){for(i=n[e];" "==i.charAt(0);)i=i.substring(1);if(-1!=i.indexOf(s))return i.substring(s.length,i.length)}return""}function _exp(t,e){this.adm=t,this.pro=e}function _mis(t,e,i,s){for(var n in this.ccbill=t,this.products=e,this.doms=i,this.discount_pc=s,this.products)if(this.products[n].hasOwnProperty("d")){this.sel_prod=n;break}}function _prm(){}function rms_orf(t){gen_gbi(t).style.display="block"}function rms_crf(t){gen_gbi(t).style.display="none"}function rms_srch(t,e){var i=gen_gbi(t),s=gen_gbi(e),n="/rooms?";n+="st="+i.value,s.checked&&(n+="&se=1"),window.location.href=n}function _prb(t,e){var i,s,n=gen_gbi(t);for(this.scan_timer=null,this.scan_prog=0,this.squares=[],this.cont=t,this.progress=document.createElement("div"),this.progress.className="progress_bar",i=0;i<e;i++)(s=document.createElement("div")).className="progress_bar_sq",this.progress.appendChild(s),this.squares[i]=s;this.para=document.createElement("p"),this.para.className="progress_bar_msg",this.progress.appendChild(this.para),n.appendChild(this.progress),this.para.innerHTML=""}function _rmp(t,e,i,s,n,o,r,a,_,c){this.disabled=t,this.room_name=e,this.room_uid=i,this.user_id=s,this.frm=n,this.faved=o,this.fave_count=r,this.t1=a,this.t2="",this.t2_exp=0,this.am=0,this.guest_name="",this.rmpass="",this.kmode=!1,this.joinover=!1,this.swf_id=_,this.progress=c,this.hooked=!1,""!==_&&(this.help_timeout=setTimeout(function(){gen_gbi("swf_chat_help").style.display="block"},3e3))}function ext_ucnt(t,e,i){}function ext_uthm(t,e,i){var s=gen_gbi("room_header"),n=gen_gbi("room_footer"),o=gen_gbi("swf_chat_normal"),r=gen_gbi("swf_version_link");s.style.backgroundColor=t,n.style.backgroundColor=t,o.style.backgroundColor=t,r.style.backgroundColor=t,s.style.color=e,n.style.color=e,o.style.color=e,r.style.color=e,s.style.borderColor=i,n.style.borderColor=i,o.style.borderColor=i}function ext_oacp(){}function ext_chrct(){if(navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,!navigator.getUserMedia)return"double no";navigator.getUserMedia({video:!0,audio:!0},function(t){return"yes"},function(t){return"no: "+t})}function ext_ytop(){return null==yt_pp||yt_pp.closed?yt_pp=window.open("/youtube_player.php",room_name+"_kyt_window","location=no,toolbar=no,menubar=no,status=no,scrollbars=no,resizable=yes,width=720,height=480,left=500,top=300"):yt_pp.focus(),null!=yt_pp}function ext_ytas(t){yt_pp&&yt_pp.addSuccess(t)}function ext_ytaf(t){yt_pp&&yt_pp.addFailed(t)}function ext_ytsq(t){yt_pp&&yt_pp.setQueue(t)}function ext_ytsc(t,e,i,s){yt_pp&&yt_pp.setCurrent(t,e,i,s)}function gen_scbgc(t,e){var i,s=document.querySelectorAll(t);for(i=0;i<s.length;i++)s[i].style.backgroundColor="#"+e}function gen_scfnc(t,e){var i,s=document.querySelectorAll(t);for(i=0;i<s.length;i++)s[i].style.color="#"+e}function gen_scbgi(t,e){var i,s=document.querySelectorAll(t);for(i=0;i<s.length;i++)s[i].style.backgroundImage="url('"+e+"')"}function gen_exp(t,e){var i=gen_gbi(e);"none"==i.style.display?(gen_gbi(t).style.fontWeight="bolder",i.style.display="block"):(gen_gbi(t).style.fontWeight="normal",i.style.display="none")}function gen_gbi(t){return document.getElementById(t)}function gen_smc(t,e){var i,s,n,o,r=31;switch(gen_gbi(t).value){case"4":case"6":case"9":case"11":r=30;break;case"2":r=29}if((i=gen_gbi(e)).length!=r+1){for(s=i.selectedIndex,i.innerHTML="",(n=document.createElement("option")).text="",i.add(n),o=1;o<r+1;o++)(n=document.createElement("option")).text=o,i.add(n);i.selectedIndex=s}}function gen_clrsel(t){var e=gen_gbi(t);if(0<e.options.length)for(var i=e.options.length;-1<i;i--)e.options[i]=null}function gen_arsi(t){var e,i;for(i=gen_gbi(t).getElementsByTagName("img"),e=0;e<i.length;e++)i[e].complete?gen_rsimg(i[e],i[e].naturalWidth,i[e].naturalHeight):i[e].addEventListener("load",function(){gen_rsimg(this,this.naturalWidth,this.naturalHeight)})}function gen_rsimg(t,e,i){t.style.width=e+"px",t.style.height=i+"px"}function gen_c2dp(t){var e=parseInt(t);return e<0?"0.00":e<10?"0.0"+e:e<100?"0."+e:(e=e.toString()).substr(0,e.length-2)+"."+e.substr(e.length-2,2)}function gen_cdedp(t,e){var i=parseFloat(t);return Math.floor(i-i*parseFloat("."+e))}function gen_mkpfrm(t,e){var i,s;return(s=document.createElement("div")).setAttribute("id","popup_background",0),document.body.appendChild(s),(i=document.createElement("div")).setAttribute("id","popup_foreground",0),(s=document.createElement("div")).setAttribute("id","popup_x",0),s.setAttribute("onclick","gen_gbi('popup_background').parentNode.removeChild(gen_gbi('popup_background'));var el = gen_gbi('popup_foreground');while(el.firstChild){el.removeChild(el.firstChild);}el.parentNode.removeChild(el);",0),i.appendChild(s),(s=document.createElement("h1")).innerHTML=t,i.appendChild(s),(s=document.createElement("p")).innerHTML=e,i.appendChild(s),i}function gen_alert(t,e){var i,s=gen_mkpfrm(t,e);buttons=document.createElement("div"),buttons.setAttribute("id","popup_buttons",0),(i=document.createElement("button")).setAttribute("onclick","gen_gbi('popup_x').click();",0),i.innerHTML="OK",buttons.appendChild(i),s.appendChild(buttons),document.body.appendChild(s)}function gen_confirm(t,e,i,s){var n,o;(o=document.createElement("div")).setAttribute("id","popup_background",0),document.body.appendChild(o),(n=document.createElement("div")).setAttribute("id","popup_foreground",0),(o=document.createElement("div")).setAttribute("id","popup_x",0),o.onclick=function(){gen_gbi("popup_background").parentNode.removeChild(gen_gbi("popup_background"));for(var t=gen_gbi("popup_foreground");t.firstChild;)t.removeChild(t.firstChild);t.parentNode.removeChild(t),null!=s&&s()},n.appendChild(o),(o=document.createElement("h1")).innerHTML=t,n.appendChild(o),(o=document.createElement("p")).innerHTML=e,n.appendChild(o),buttons=document.createElement("div"),buttons.setAttribute("id","popup_buttons",0),(o=document.createElement("button")).innerHTML="Yes",o.onclick=function(){gen_gbi("popup_x").click(),i()},buttons.appendChild(o),(o=document.createElement("button")).innerHTML="No",o.onclick=function(){gen_gbi("popup_x").click()},buttons.appendChild(o),n.appendChild(buttons),document.body.appendChild(n)}function gen_prompt(t,e,i,s){var n,o;(o=document.createElement("div")).setAttribute("id","popup_background",0),document.body.appendChild(o),(n=document.createElement("div")).setAttribute("id","popup_foreground",0),n.setAttribute("class","prompt",0),(o=document.createElement("div")).setAttribute("id","popup_x",0),o.onclick=function(){gen_gbi("popup_background").parentNode.removeChild(gen_gbi("popup_background"));for(var t=gen_gbi("popup_foreground");t.firstChild;)t.removeChild(t.firstChild);t.parentNode.removeChild(t),null!=s&&s()},n.appendChild(o),(o=document.createElement("h1")).innerHTML=t,n.appendChild(o),(o=document.createElement("p")).innerHTML=e,n.appendChild(o),(o=document.createElement("input")).setAttribute("id","prompt_text",0),o.setAttribute("type","text",0),o.onkeydown=function(t){if(13==t.keyCode){var e=gen_gbi("prompt_text").value;gen_gbi("popup_x").click(),i(e)}},n.appendChild(o),buttons=document.createElement("div"),buttons.setAttribute("id","popup_buttons",0),(o=document.createElement("button")).onclick=function(){var t=gen_gbi("prompt_text").value;gen_gbi("popup_x").click(),i(t)},o.innerHTML="OK",buttons.appendChild(o),(o=document.createElement("button")).onclick=function(){gen_gbi("popup_x").click()},o.innerHTML="Cancel",buttons.appendChild(o),n.appendChild(buttons),document.body.appendChild(n),gen_gbi("prompt_text").focus()}function uti_getHTTPObject(){return null!=httpObject?httpObject:window.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):window.XMLHttpRequest?new XMLHttpRequest:null}function uti_gxhr(){return window.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):window.XMLHttpRequest?new XMLHttpRequest:null}function ajaxRequest(t,e){null!=(httpObject=uti_getHTTPObject())&&(httpObject.open("POST",t,!0),httpObject.send(null),httpObject.onreadystatechange=e)}function outputResult(t){4==httpObject.readyState&&(gen_gbi(t).innerHTML=httpObject.responseText)}function uti_sjax(t,e,i,s,n){null!=(httpObject=uti_getHTTPObject())&&(t=t+"?n="+encodeURIComponent(e)+"&data="+encodeURIComponent(i),httpObject.open("POST",t,!0),httpObject.send(null),httpObject.onreadystatechange=function(){uti_sjax_cb(s,n)})}function uti_sjaxPOST(t,e,i,s,n){null!=(httpObject=uti_getHTTPObject())&&(t=t+"?n="+encodeURIComponent(e),httpObject.open("POST",t,!0),httpObject.send(i),httpObject.onreadystatechange=function(){uti_sjax_cb(s,n)})}function uti_sjax_cb(t,e){if(4==httpObject.readyState)if(404==httpObject.status)e&&alert("ajax 404 error");else{try{var i=JSON.parse(httpObject.responseText)}catch(t){return}i.error?e&&alert(i.error):t(i)}}function uti_sjaxPOSTadv(t,e,i,s,n){var o=uti_gxhr();null!=o&&(t=t+"?n="+encodeURIComponent(e),o.open("POST",t,!0),o.send(i),o.onreadystatechange=function(){uti_sjax_cb_adv(o,s,n)})}function uti_sjax_cb_adv(e,t,i){if(4==e.readyState)if(200==e.status){try{var s=JSON.parse(e.responseText)}catch(t){return void(i&&i({error:t,status:e.status}))}s.error?i&&i({error:s.error,status:e.status}):t&&t(s)}else i&&i({error:"status not 200 ("+e.status+")",status:e.status})}_mis.prototype.blst=function(){var t,e,i=gen_gbi(this.doms.ptype);for(e in i.innerHTML="",this.products)this.products.hasOwnProperty(e)&&((t=document.createElement("li")).innerHTML="<h1>"+this.products[e].dur+"</h1><h2>$"+gen_c2dp(this.products[e].cent)+"</h2>",t.name=e,t.setAttribute("onclick",this.doms.mn+".prchg(this);",0),i.appendChild(t),this.sel_prod==t.name&&this.prchg(t))},_mis.prototype.prchg=function(t){this.sel_prod=t.name;var e,i=t.parentElement.getElementsByTagName("li");for(e=0;e<i.length;e++)this.sel_prod==i[e].name?i[e].className="selected":""!=i[e].className&&(i[e].className="");0==this.discount_pc?1==this.products[this.sel_prod].sub?gen_gbi(this.doms.ptext).innerHTML=this.products[this.sel_prod].desc+"<br/>Recurring Payment of $"+gen_c2dp(this.products[this.sel_prod].cent)+" USD":gen_gbi(this.doms.ptext).innerHTML=this.products[this.sel_prod].desc+"<br/>One Payment of $"+gen_c2dp(this.products[this.sel_prod].cent)+" USD":gen_gbi(this.doms.ptext).innerHTML=this.products[this.sel_prod].desc+"<br/><s>One Payment of $"+gen_c2dp(this.products[this.sel_prod].cent)+" USD</s><br/><span style='color:red; font-size:1.2em'>$"+gen_c2dp(gen_cdedp(this.products[this.sel_prod].cent,this.discount_pc))+" USD after discount</span>"},_mis.prototype.strop=function(){},_mis.prototype.payop=function(){var t=gen_mkpfrm("Pay Now","Choose your payment method");t.appendChild(this.ccbill.mkbtn(this.products[this.sel_prod])),document.body.appendChild(t)},_prm.prototype.rscl=function(){gen_gbi("ms_ps_one").style.display="none",gen_gbi("ms_ps_sub").style.display="block"},_prm.prototype.rpcl=function(){gen_gbi("ms_ps_sub").style.display="none",gen_gbi("ms_ps_one").style.display="block"},_prb.prototype.sprg=function(t,e){var i,s=this.squares.length,n=Math.floor(this.squares.length*t/100)-1;for(null!=this.scan_timer&&(window.clearInterval(this.scan_timer),this.scan_timer=null),n<0?n=0:s-1<n&&(n=s-1),i=0;i<s;i++)this.squares[i].className=i<n?"progress_bar_sq_done":i==n?"progress_bar_sq_pend":"progress_bar_sq";this.para.innerHTML=e},_prb.prototype.enscn=function(t){null!=this.scan_timer&&(window.clearInterval(this.scan_timer),this.scan_timer=null),this.scan_prog=0,this.scan_timer=window.setInterval(this.scntck.bind(this),200),t&&(this.para.innerHTML=t)},_prb.prototype.scntck=function(){for(i=0;i<this.squares.length;i++)i==this.scan_prog?this.squares[i].className="progress_bar_sq_done":this.squares[i].className="progress_bar_sq";this.scan_prog>=this.squares.length-1?this.scan_prog=0:this.scan_prog++},_prb.prototype.cntron=function(t){},_prb.prototype.hide=function(){gen_gbi(this.cont).style.display="none"},_prb.prototype.show=function(){gen_gbi(this.cont).style.display="block"},_rmp.prototype.fav=function(t,e){if(0===this.user_id)gen_alert("Please Login","You must login to add a room to your favourites.");else{var i=new _ajx(t),s=JSON.stringify({room_uid:e});this.faved?i.post(640,s,this.favrdel.bind(this)):i.post(630,s,this.favradd.bind(this))}},_rmp.prototype.favradd=function(t){if(t.s){console.log("add favourote");var e=gen_gbi("fave_btn");e.className="abtn fave_sel",this.faved=!0,this.fave_count++,e.innerHTML=this.fave_count,this.frm.open&&this.frm.getfaves()}},_rmp.prototype.favrdel=function(t){if(t.s){var e=gen_gbi("fave_btn");e.className="abtn fave",this.faved=!1,this.fave_count--,e.innerHTML=this.fave_count,this.frm.open&&this.frm.getfaves()}},_rmp.prototype.ext_rlh=function(t,e,i){return this.disabled&&(this.hooked=!1),this.room_name==t&&this.t1==e&&(clearTimeout(this.help_timeout),gen_gbi("swf_chat_help").style.display="none",gen_gbi("swf_chat_login").style.display="block",this.progress.hide(),this.hooked=!0,this.kmode=i,this.kmode?gen_gbi("kmode_cb").checked=!0:gen_gbi("kmode_cb").checked=!1),this.hooked},_rmp.prototype.ext_reqpass=function(t,e){console.log("ext_reqpass "+t),"connecting"==t?gen_prompt("Enter Room Password",e,this.tryrmpwd.bind(this),this.cncljoin.bind(this)):"reconnecting"==t&&gen_prompt("Enter Room Password",e,this.tryrmpwd.bind(this),this.cncljoin.bind(this))},_rmp.prototype.ext_alrin=function(t){gen_confirm("Already Connected","You are already in this room, would you like to disconnect the other session?",this.jnover.bind(this),this.cncljoin.bind(this))},_rmp.prototype.ext_kicked=function(t){"connecting"==t&&(this.progress.hide(),gen_gbi("swf_chat_login_mask").style.display="none")},_rmp.prototype.ext_banned=function(t){"connecting"==t&&(this.progress.hide(),gen_gbi("swf_chat_login_mask").style.display="none")},_rmp.prototype.ext_reset=function(){console.log("ext_reset"),this.cncljoin()},_rmp.prototype.ext_confail=function(t,e){switch(this.rmpass="",e){case"nameinuse":gen_alert("Change name","Please try another username.");break;case"rejoinclose":gen_alert("Session Closed","Your other session was closed, you may now join the room.");break;case"clientver":gen_alert("Client Error","Your client version appears out of date, please try refresh or clear your browser cache.");break;case"busywait":gen_alert("Busy","Server is busy, please try again in a couple minutes.");break;case"noguest":gen_alert("No Guests","This room does not allow guests.");break;case"unver":gen_alert("Account unverified","Please verify your account e-mail address.");break;default:gen_alert("Error","Connection error, please try refresh the page.")}this.cncljoin()},_rmp.prototype.ext_schng=function(t,e,i){switch(console.log("ext_schng state: "+t+" change: "+e+" message: "+i),t){case"connecting":switch(e){case"joined":this.progress.hide(),gen_gbi("swf_chat_login_mask").style.display="none";break;case"progress":progress.sprg(i,"");break;case"failed":this.cncljoin(),gen_alert("Connection Failed","Connection failed, we may be experiencing problems or your internet may be down.<br/><br/>Please try again later.")}}},_rmp.prototype.hndrej=function(t,e){switch(e.reject){case"0008":gen_prompt("Enter Room Password",e.param,this.tryrmpwd.bind(this),this.cncljoin.bind(this));break;case"0011":case"0014":break;case"0004":case"0013":location.reload();break;case"0002":gen_alert("Closed","This room is closed.");break;case"0003":gen_alert("Closed","That username is taken.");case"0009":console.log("0009"),gen_confirm("Already Connected","You are already in this room, would you like to disconnect the other session?",this.jnover.bind(this),this.cncljoin.bind(this));break;case"0016":console.log("0016"),gen_alert("Session Closed","Your other session was closed, you may now join the room."),this.cncljoin();break;case"0007":gen_alert("Incorrect Version","Your version of the chat is out of date, please refresh or try again later.");break;case"0010":gen_alert("Busy","Server is busy, try again in a few seconds.");break;case"0012":gen_alert("No Guests","This room does not allow guests.");break;case"0015":gen_alert("Unverified","You must verify your account before connecting.");break;case"0001":case"0005":case"0006":default:gen_alert("error","error joining this room")}},_rmp.prototype.ext_rgt2=function(){this.t2join(n)},_rmp.prototype.tryrmpwd=function(t){this.rmpass=t,this.t2join(n)},_rmp.prototype.jnover=function(){this.joinover=!0,this.t2join(n)},_rmp.prototype.cncljoin=function(){this.progress.hide(),gen_gbi("swf_chat_login_mask").style.display="block",gen_gbi("swf_chat_login").style.display="block"},_rmp.prototype.lia=function(t){progress.sprg(25,"Joining Room"),gen_gbi("swf_chat_login").style.display="none",this.progress.show();var e=gen_gbi("am1");null!=e&&e.checked&&(this.am=1);var i=gen_gbi("am2");null!=i&&i.checked&&(this.am=2),gen_gbi("kmode_cb").checked?this.kmode=!0:this.kmode=!1,this.guest_name="",this.t2join(t)},_rmp.prototype.liag=function(t){progress.sprg(25,"Joining Room"),gen_gbi("swf_chat_login").style.display="none",this.progress.show(),gen_gbi("kmode_cb").checked?this.kmode=!0:this.kmode=!1,this.guest_name!=gen_gbi("guest_username").value&&(this.t2_exp=0,this.t2=""),this.guest_name=gen_gbi("guest_username").value,this.t2join(t)},_rmp.prototype.t2join=function(t){if(""!==this.t2&&(new Date).getTime()/1e3<this.t2_exp)gen_gbi(this.swf_id).swf_login(this.t2,this.joinover,this.kmode,this.rmpass,this.am);else{var e=new _ajx(t),i=JSON.stringify({room_uid:this.room_uid,room_name:this.room_name,user_id:this.user_id,t1:this.t1,username:this.guest_name});e.post(1100,i,this.t2joinr.bind(this))}},_rmp.prototype.t2joinr=function(t){t.hasOwnProperty("err")?0<t.err.length&&(gen_alert("Error joining room",t.err),gen_gbi("swf_chat_login").style.display="block",this.progress.hide()):(this.progress.sprg(50,""),this.t2=t.t2,this.t2_exp=t.exp+(new Date).getTime()/1e3,gen_gbi(this.swf_id).swf_login(this.t2,this.joinover,this.kmode,this.rmpass,this.am))},_rmp.prototype.t2joiner=function(t){200==t.status?gen_alert("Error joining room",t.error):gen_gbi(this.swf_id).swf_reconwait()};var tt,httpObject=null,yt_pp=null;function _ajx(t){this.t=t,this.cpt=null}function _cpt(t){this.div_cont=gen_gbi(t)}function _lgn(t){this.ajx=new _ajx(t),this.text_email=gen_gbi("email"),this.text_password=gen_gbi("password"),this.cb_rememberme=gen_gbi("rememberme"),this.btn_login=gen_gbi("loginbtn"),this.p_status=gen_gbi("status")}function _fcr(t,e,i,s,n,o,r,a){this.ajx=new _ajx(t),this.t1=e,this.room_uid=i,this.user_id=s,this._fc=new fc(protobuf,base64js,pako,"chat",o,r,a,this.gt2.bind(this),this.syt.bind(this),this.qyt.bind(this)),this.t2result_cb=null,this.syt_cb=null;this.qyt_cb=null}function _rsp(t,e){this.ajx=new _ajx(t),this.min_pass=e,this.email="",this.code="",this.codekey="",this.div_step1=gen_gbi("rpstep1"),this.div_step2=gen_gbi("rpstep2"),this.div_step3=gen_gbi("rpstep3"),this.p_error=gen_gbi("errormsg"),this.text_email=gen_gbi("email"),this.btn_send=gen_gbi("sendbtn"),this.text_code=gen_gbi("code"),this.btn_code=gen_gbi("codebtn"),this.text_pass1=gen_gbi("pass1"),this.text_pass2=gen_gbi("pass2"),this.btn_pass=gen_gbi("passbtn")}function _reg(t,e){this.ajx=new _ajx(t),this.cpt=new _cpt("captcha"),this.min_pass=e,this.tt=0,this.taken_names=[],this.taken_emails=[],this.text_username=document.getElementById("user"),this.div_username_status=document.getElementById("status_username"),this.p_username_error=document.getElementById("status_username_p"),this.text_email=document.getElementById("email"),this.div_email_status=document.getElementById("status_email"),this.p_email_error=document.getElementById("status_email_p"),this.text_password=document.getElementById("pass1"),this.div_password_status=document.getElementById("status_pass1"),this.p_password_error=document.getElementById("status_pass1_p"),this.text_password2=document.getElementById("pass2"),this.div_password2_status=document.getElementById("status_pass2"),this.p_password2_error=document.getElementById("status_pass2_p"),this.cb_over18=document.getElementById("over_18"),this.cb_acceptterms=document.getElementById("accept_terms")}function _ann(t){this.ajx=new _ajx(t),this.id=0}function _cta(t){this.ajx=new _ajx(t),this.cpt=new _cpt("captcha")}function _frm(t,e){this.ajx=new _ajx(t),this.loggedin=e,this.favbtn=document.getElementById("favrms"),this.favcont=document.getElementById("favbar"),this.open=!1,this.icons=[],document.addEventListener("DOMContentLoaded",this.onload.bind(this))}function _rmi(t){this.uid=t.u,this.name="",this.title="",this.image="",this.count=-1,this.modlvl=0,this.passworded=!1,this.guests=!1,this.elem=document.createElement("div"),this.elem.className="room_block",this.a_anchor=document.createElement("a"),this.a_anchor.href="/rooms/"+t.n,this.p_title=document.createElement("p"),this.p_title.className="room_block_title",this.a_anchor.appendChild(this.p_title),this.p_users=document.createElement("p"),this.p_users.className="room_block_users",this.a_anchor.appendChild(this.p_users),this.d_mod=document.createElement("div"),this.a_anchor.appendChild(this.d_mod),this.d_passworded=document.createElement("div"),this.d_passworded.className="tipcon locked material-icons",this.d_passworded.setAttribute("title","Locked",0),this.d_passworded.style.display="none",this.a_anchor.appendChild(this.d_passworded),this.d_guest=document.createElement("div"),this.d_guest.className="tipcon guests material-icons",this.d_guest.setAttribute("title","Guests Welcome",0),this.d_guest.style.display="none",this.a_anchor.appendChild(this.d_guest),this.d_img=document.createElement("div"),this.d_img.className="room_icon",this.a_anchor.appendChild(this.d_img),this.elem.appendChild(this.a_anchor),this.update(t)}function _mac(t){this.ajx=new _ajx(t),this.cb_del=gen_gbi("delcheck"),this.btn_del=gen_gbi("delbtn")}function _mpr(t,e){this.ajx=new _ajx(t),this.date=e,this.ifs=new _ifs,this.btn_editprf=gen_gbi("btnedit"),this.btn_addbox=gen_gbi("btnaddbox"),this.btn_prf_upl=gen_gbi("btnuplpic"),this.btn_bg_upl=gen_gbi("btnuplbg"),this.div_img_load=gen_gbi("imgload"),this.sel_dob_month=gen_gbi("dob_month"),this.sel_dob_day=gen_gbi("dob_day"),this.sel_dob_year=gen_gbi("dob_year"),this.sel_sex=gen_gbi("sex"),this.text_location=gen_gbi("location"),this.sel_country=gen_gbi("country"),this.text_aboutme=gen_gbi("aboutme"),this.cb_age_visible=gen_gbi("age_visible"),this.cb_sex_visible=gen_gbi("sex_visible"),this.cb_loc_visible=gen_gbi("loc_visible"),this.cb_cou_visible=gen_gbi("cou_visible"),this.cb_ame_visible=gen_gbi("ame_visible")}function _mrs(t){this.ajx=new _ajx(t),this.text_new_name=gen_gbi("new_name"),this.div_new_load=gen_gbi("new_load"),this.div_new_err=gen_gbi("new_err"),this.btn_new=gen_gbi("new_btn")}function _mrm(t,e,i){this.ajx=new _ajx(t),this.exp=e,this.room_id=i}function _mrb(t,e){this.ajx=new _ajx(t),this.room_id=e,this.table=gen_gbi("bans_table"),this.brw=[]}function _brw(t,e,i,s,n,o,r){this.ajx=t,this.room_id=e,this.ban_id=i,this.saved_cb=n,this.d_editor=document.createElement("div"),this.d_editor.setAttribute("id","edit"+i,0),this.d_editor.className="td_ban_editor",this.text_reason=document.createElement("input"),this.text_reason.setAttribute("type","text",0),this.text_reason.setAttribute("placeholder","reason",0),this.text_reason.setAttribute("maxlength","100",0),this.text_reason.value=o,this.text_reason.className="ban_reason",this.d_editor.appendChild(this.text_reason),this.text_days=document.createElement("input"),this.text_days.setAttribute("type","text",0),this.text_days.setAttribute("placeholder","days",0),this.text_days.setAttribute("maxlength","4",0),this.text_days.onkeydown=this.durkd.bind(this),this.d_editor.appendChild(this.text_days),this.text_hours=document.createElement("input"),this.text_hours.setAttribute("type","text",0),this.text_hours.setAttribute("placeholder","hours",0),this.text_hours.setAttribute("maxlength","4",0),this.text_hours.onkeydown=this.durkd.bind(this),this.d_editor.appendChild(this.text_hours),this.text_minutes=document.createElement("input"),this.text_minutes.setAttribute("type","text",0),this.text_minutes.setAttribute("placeholder","minutes",0),this.text_minutes.setAttribute("maxlength","4",0),this.text_minutes.setAttribute("onkeydown","return mrb.editkp('perma"+i+"',event);",0),this.text_minutes.onkeydown=this.durkd.bind(this),this.d_editor.appendChild(this.text_minutes),this.cb_perma=document.createElement("input"),this.cb_perma.setAttribute("type","checkbox",0),this.cb_perma.setAttribute("id","perma"+i,0),this.cb_perma.checked=r,this.d_editor.appendChild(this.cb_perma);var a=document.createElement("label");a.setAttribute("for","perma"+i,0),a.innerHTML="<span></span>perma",this.d_editor.appendChild(a);var _=document.createElement("button");_.onclick=this.save.bind(this),_.innerHTML="Save",_.className="green",this.d_editor.appendChild(_),s.appendChild(this.d_editor),this.d_loading=document.createElement("div"),this.d_loading.className="td_ban_editor_loading",this.d_loading.style.display="none",s.appendChild(this.d_loading)}function _mrt(t,e,i,s,n){this.ajx=new _ajx(t),this.exp=e,this.unsav=!1,this.cur=i,this.sel=s,this.room_id=n,this.thm_select=gen_gbi("thm_select")}function _mrg(t,e){this.ajx=new _ajx(t),this.room_id=e,this.ifs=new _ifs,this.text_uh_name=gen_gbi("uh_name"),this.text_uh_title=gen_gbi("uh_title"),this.text_uh_desc=gen_gbi("uh_desc"),this.div_uh_load=gen_gbi("uh_load"),this.div_uh_err=gen_gbi("uh_err"),this.btn_uh_upd=gen_gbi("uh_upd"),this.div_icon_header=gen_gbi("room_icon_img"),this.div_icon_prv=gen_gbi("prv_room_icon"),this.div_upic_load=gen_gbi("upic_load"),this.btn_upic_upl=gen_gbi("upic_upl"),this.btn_upic_rmv=gen_gbi("upic_rmv"),this.div_container=gen_gbi("container"),this.div_upbg_load=gen_gbi("upbg_load"),this.btn_upbg_upl=gen_gbi("upbg_upl"),this.btn_upbg_rmv=gen_gbi("upbg_rmv"),this.img_banner=gen_gbi("header_banner_img"),this.div_upbn_load=gen_gbi("upbn_load"),this.btn_upbn_upl=gen_gbi("upbn_upl"),this.btn_upbn_rmv=gen_gbi("upbn_rmv")}function _ifs(){this.cb=null,this.uploader=document.createElement("input"),this.uploader.setAttribute("id","hdn_upl",0),this.uploader.onchange=this.ok.bind(this),this.uploader.type="file",this.uploader.accept="image/*",document.body.appendChild(this.uploader)}_ajx.prototype.get=function(t,e,i,s){var n=new XMLHttpRequest,o="boolean"==typeof s&&s,r="/php/ajax/system.php?t="+encodeURIComponent(this.t)+"&f="+encodeURIComponent(t)+"&d="+encodeURIComponent(e);n.open("GET",r,!0),n.send();var a=o?this.cbex.bind(this):this.cb.bind(this);n.onreadystatechange=function(){a(n,i)}},_ajx.prototype.post=function(t,e,i,s,n){var o=this,r=new XMLHttpRequest,a=new FormData;a.append("t",this.t),a.append("f",t),a.append("d",e),"object"==typeof s&&s instanceof _cpt?(this.cpt=s,a.append("c",s.getcode())):this.cpt=null,"object"==typeof n&&a.append("u",n,n.name),r.open("POST","/php/ajax/system.php",!0),r.send(a),r.onreadystatechange=function(){o.cb(r,i)}},_ajx.prototype.cb=function(e,t){if(4===e.readyState)if(200===e.status){try{var i=JSON.parse(e.responseText)}catch(t){return void console.warn("_ajx.prototype.cb failed to parse response: "+e.responseText)}if(i.hasOwnProperty("error"))switch(i.error){case"captcha":null!==this.cpt&&(this.cpt.rld(),this.cpt.fail());break;default:console.error("_ajx.prototype.cb error: "+i.error)}else t(i)}else console.warn("_ajx.prototype.cb status: "+e.status)},_ajx.prototype.cbex=function(t,e){if(4===t.readyState){var i={},s=t.status;if(200===t.status)try{i=JSON.parse(t.responseText)}catch(t){return void(i={error:"jsonparse"})}e(i,s)}},_cpt.prototype.rld=function(){void 0!==window.captcha_image_audioObj&&captcha_image_audioObj.refresh(),gen_gbi("captcha_image").src="/php/lib/securimage/securimage_show.php?"+Math.random(),gen_gbi("lolcode").value=""},_cpt.prototype.getcode=function(){return gen_gbi("lolcode").value},_cpt.prototype.fail=function(){this.div_cont.className="error"},_cpt.prototype.norm=function(){this.div_cont.className=""},_lgn.prototype.login=function(){if(this.text_email.value.match(/^[a-zA-Z0-9\._-]{1,250}\@([a-zA-Z0-9\._-]{2,250})\.[a-zA-Z]{2,16}$/))if(this.text_password.value.length<6)this.p_status.innerHTML="Enter your password";else{this.text_email.disabled=!0,this.text_password.disabled=!0,this.cb_rememberme.disabled=!0,this.btn_login.disabled=!0,this.p_status.innerHTML="";var t=JSON.stringify({email:this.text_email.value,password:this.text_password.value,remember:this.cb_rememberme.checked});this.ajx.post(1e3,t,this.ok.bind(this))}else this.p_status.innerHTML="Enter your e-mail address"},_lgn.prototype.ok=function(t){t.s?window.location.replace("/manage"):(this.text_password.value="",this.text_email.disabled=!1,this.text_password.disabled=!1,this.cb_rememberme.disabled=!1,this.btn_login.disabled=!1,this.p_status.innerHTML="Login failed")},_fcr.prototype.startband=function(t,e,i,s,n){this._fc.startband(t,e,i,s,n)},_fcr.prototype.start=function(){this._fc.start()},_fcr.prototype.gt2=function(t){this.t2result_cb=t;var e=JSON.stringify({t1:this.t1,room_uid:this.room_uid,user_id:this.user_id});this.ajx.get(1200,e,this.gt2r.bind(this),!0)},_fcr.prototype.gt2r=function(t,e){this.t2result_cb(t,e)},_fcr.prototype.syt=function(t,e,i,s){this.syt_cb=s;var n=JSON.stringify({query:t,pagetoken:e,related:i});this.ajx.get(1350,n,this.sytr.bind(this),!0)},_fcr.prototype.sytr=function(t,e){this.syt_cb(t,e)},_fcr.prototype.qyt=function(t,e){this.qyt_cb=e;var i=JSON.stringify({video_id:t,room_uid:this.room_uid});this.ajx.get(1360,i,this.qytr.bind(this),!0)},_fcr.prototype.qytr=function(t,e){this.qyt_cb(t,e)},_fcr.prototype.mvl=function(){gen_gbi("room_header").style.margin="10px 10px",gen_gbi("swf_chat_normal").style.margin="0 10px",gen_gbi("room_footer").style.margin="0 10px 60px"},_fcr.prototype.mvc=function(){gen_gbi("room_header").style.margin="10px auto",gen_gbi("swf_chat_normal").style.margin="0 auto",gen_gbi("room_footer").style.margin="0 auto 60px"},_fcr.prototype.mvr=function(){gen_gbi("room_header").style.margin="10px calc(100% - 910px)",gen_gbi("swf_chat_normal").style.margin="0 calc(100% - 910px)",gen_gbi("room_footer").style.margin="0 calc(100% - 910px) 60px"},_rsp.prototype.sndrst=function(){if(this.text_email.value.match(/^[a-zA-Z0-9\._-]{1,250}\@([a-zA-Z0-9\._-]{2,250})\.[a-zA-Z]{2,16}$/)){this.text_email.disabled=!0,this.btn_send.disabled=!0,this.p_error.innerHTML="";var t=JSON.stringify({email:this.text_email.value});this.ajx.post(2620,t,this.sndrstr.bind(this))}else this.p_error.innerHTML="Enter a valid e-mail address."},_rsp.prototype.sndrstr=function(t){console.log(t),t.s&&(this.email=t.email,this.div_step1.style.display="none",this.div_step2.style.display="block")},_rsp.prototype.sndcode=function(){this.text_code.disabled=!0,this.btn_code.disabled=!0,this.p_error.innerHTML="";var t=JSON.stringify({email:this.email,code:this.text_code.value});this.ajx.post(2622,t,this.sndcoder.bind(this))},_rsp.prototype.sndcoder=function(t){t.s?(this.code=t.code,this.key=t.key,this.div_step2.style.display="none",this.div_step3.style.display="block",gen_gbi("b_name").innerText=t.username):(this.text_code.disabled=!1,this.btn_code.disabled=!1,this.p_error.innerHTML="Incorrect or expired code")},_rsp.prototype.chgpwd=function(){if(this.text_pass1.value!==this.text_pass2.value)this.p_error.innerHTML="Passwords don't match";else if(this.text_pass1.value.length<this.min_pass)this.p_error.innerHTML="Password is too short";else{this.text_pass1.disabled=!0,this.text_pass2.disabled=!0,this.btn_pass.disabled=!0,this.p_error.innerHTML="";var t=JSON.stringify({email:this.email,code:this.code,key:this.key,password:this.text_pass1.value});this.ajx.post(2624,t,this.chgpwdr.bind(this))}},_rsp.prototype.chgpwdr=function(t){window.location.replace("/login")},_reg.prototype.testuser_sched=function(){clearTimeout(this.tt),this.tt=window.setTimeout(this.testuser.bind(this),500)},_reg.prototype.testuser=function(){clearTimeout(this.tt);var t=this.text_username.value;if(t.length<1)this.div_username_status.className="input_fail",this.p_username_error.innerHTML="enter username";else if(t.length<3)this.div_username_status.className="input_fail",this.p_username_error.innerHTML="username too short";else if(32<t.length)this.div_username_status.className="input_fail",this.p_username_error.innerHTML="username too long";else if(t.match(/^[a-zA-Z0-9\.\_\-\~]{3,32}$/)){if(!this.taken_names.includes(t))return this.div_username_status.className="input_win",this.p_username_error.innerHTML="nice",!0;this.div_username_status.className="input_fail",this.p_username_error.innerHTML="that username is taken"}else this.div_username_status.className="input_fail",this.p_username_error.innerHTML="username may contain a-z A-Z 0-9 . - _ ~";return!1},_reg.prototype.testemail_sched=function(){clearTimeout(this.tt),this.tt=window.setTimeout(this.testemail.bind(this),500)},_reg.prototype.testemail=function(){clearTimeout(this.tt);var t=this.text_email.value;if(t.length<1)this.div_email_status.className="input_fail",this.p_email_error.innerHTML="enter your email address";else if(this.taken_emails.includes(t))this.div_email_status.className="input_fail",this.p_email_error.innerHTML="that email is already registered";else{if(t.match(/^[a-zA-Z0-9\._-]{1,250}\@([a-zA-Z0-9\._-]{2,250})\.[a-zA-Z]{2,16}$/))return this.div_email_status.className="input_win",this.p_email_error.innerHTML="ok",!0;this.div_email_status.className="input_fail",this.p_email_error.innerHTML="e-mail doesn't look right"}return!1},_reg.prototype.testpass=function(){this.testpass2();var t=this.text_password.value;return t.length<this.min_pass?(this.div_password_status.className="input_fail",this.p_password_error.innerHTML="too short ("+(this.min_pass-t.length)+")",!1):(this.div_password_status.className="input_win",this.p_password_error.innerHTML="good",!0)},_reg.prototype.testpass2=function(){var t=this.text_password.value,e=this.text_password2.value;return""===t&&(this.text_password.value="",this.div_password2_status.className="input_ready",this.p_password2_error.innerHTML=""),t===e?(this.div_password2_status.className="input_win",this.p_password2_error.innerHTML="match",!0):(this.div_password2_status.className="input_fail",!(this.p_password2_error.innerHTML="does not match"))},_reg.prototype.testover18=function(){return this.cb_over18.checked?!(this.cb_over18.className=""):!(this.cb_over18.className="fail")},_reg.prototype.testterms=function(){return this.cb_acceptterms.checked?!(this.cb_acceptterms.className=""):!(this.cb_acceptterms.className="fail")},_reg.prototype.reg=function(){var t=!0;if(this.testuser()||(t=!1),this.testemail()||(t=!1),this.testpass()||(t=!1),this.testover18()||(t=!1),this.testterms()||(t=!1),t){var e=JSON.stringify({username:this.text_username.value,email:this.text_email.value,password:this.text_password.value,over18:this.cb_over18.checked,acceptterms:this.cb_acceptterms.checked});this.ajx.post(2e3,e,this.reg_resp.bind(this),this.cpt)}},_reg.prototype.reg_resp=function(t){if("ok"===t.s)window.location.replace("/manage");else switch(this.cpt.rld(),t.s){case"uo":this.div_username_status.className="input_fail",this.p_username_error.innerHTML="please choose a different name";break;case"ut":this.taken_names.push(t.username),this.div_username_status.className="input_fail",this.p_username_error.innerHTML="that username is taken";break;case"et":this.taken_emails.push(t.email),this.div_email_status.className="input_fail",this.p_email_error.innerHTML="that email is already registered"}},_ann.prototype.getlatest=function(){var t=JSON.stringify({});this.ajx.get(500,t,this.display.bind(this))},_ann.prototype.display=function(t){var e,i,s,n;0<t.id&&(this.id=t.id,"1"!==getCookie("hide_ann_"+t.id)&&((e=document.createElement("div")).setAttribute("id","ann_bar",0),(i=document.createElement("button")).innerHTML="OK",i.onclick=this.close.bind(this),e.appendChild(i),(s=document.createElement("h1")).innerHTML="EzcapeChat Notice",e.appendChild(s),(n=document.createElement("p")).innerHTML=t.msg,e.appendChild(n),document.body.appendChild(e),window.setTimeout(function(){e.style.opacity="1"},150)))},_ann.prototype.close=function(t){setCookie("hide_ann_"+this.id,"1",7),gen_gbi("ann_bar").style.display="none"},_cta.prototype.send=function(){var t=JSON.stringify({name:gen_gbi("name").value,email:gen_gbi("email").value,purpose:gen_gbi("purpose").value,message:gen_gbi("message").value});this.ajx.post(440,t,this.sendr.bind(this),this.cpt)},_cta.prototype.sendr=function(t){var e=gen_gbi("contact");e.innerHTML="";var i=document.createElement("h1");t.s?i.innerHTML="Your message has been sent, thank you":i.innerHTML="There was an error, please try again later",e.appendChild(i)},_frm.prototype.onload=function(){1===parseInt(getCookie("showfave"))&&this.openup()},_frm.prototype.openup=function(){this.loggedin?this.open?this.close():(this.open=!0,setCookie("showfave","1",7),this.favbtn.className="open",this.favcont.style.display="block",this.getfaves()):this.fail("login")},_frm.prototype.close=function(){this.open=!1,setCookie("showfave","0",7),this.favbtn.className="",this.favcont.style.display="none"},_frm.prototype.getfaves=function(){var t=JSON.stringify({});this.ajx.get(600,t,this.success.bind(this))},_frm.prototype.success=function(t){if(t.length<2){for(var e in this.icons){var i=this.icons[e];this.favcont.removeChild(i.elem),i.selfdestruct()}this.favcont.innerHTML="",this.msg("Click the star at the top of rooms and they will appear here."),setCookie("showfave","0",7)}else this.list(t)},_frm.prototype.fail=function(t){"login"===t&&(this.favcont.innerHTML="",this.msg("Your favourite rooms will be shown here when you login."),setCookie("showfave","0",7))},_frm.prototype.msg=function(t){var e=document.createElement("p");e.className="warning",e.innerHTML=t,this.favcont.appendChild(e)},_frm.prototype.list=function(t){var e,i=[];for(e=1;e<t.length;e++){var s=t[e].u;if(this.icons.hasOwnProperty(s)){(n=this.icons[s]).update(t[e]),i[s]=n,this.favcont.appendChild(this.icons[t[e].u].elem)}else{var n=new _rmi(t[e]);i[s]=n,this.favcont.appendChild(n.elem)}}for(var s in this.icons)if(!i.hasOwnProperty(s)){n=this.icons[s];this.favcont.removeChild(n.elem),n.selfdestruct()}this.icons=i},_rmi.prototype.update=function(t){if(t.t!==this.title&&(this.title=t.t,this.elem.setAttribute("title",this.title,0),this.p_title.innerHTML=this.title),t.c!==this.count&&(this.count=t.c,this.p_users.innerHTML=this.count),t.i!==this.image&&(this.image=t.i,this.d_img.style.backgroundImage="url('/images/room/"+this.image+"')"),t.m!==this.modlvl)switch(this.modlvl=t.m,this.modlvl){default:this.d_mod.style.display="block";case 100:this.d_mod.className="tipcon mod material-icons",this.d_mod.setAttribute("title","Moderator",0);break;case 150:this.d_mod.className="tipcon super material-icons",this.d_mod.setAttribute("title","Super",0);break;case 200:this.d_mod.className="tipcon owner material-icons",this.d_mod.setAttribute("title","Owner",0);break;case 0:this.d_mod.style.display="none"}t.p!==this.passworded&&(this.passworded=t.p,this.passworded?this.d_passworded.style.display="block":this.d_passworded.style.display="none"),t.g!==this.guests&&(this.guests=t.g,this.guests?this.d_guest.style.display="block":this.d_guest.style.display="none")},_rmi.prototype.selfdestruct=function(){for(;this.a_anchor.firstChild;)this.a_anchor.removeChild(this.a_anchor.firstChild);for(;this.elem.firstChild;)this.elem.removeChild(this.elem.firstChild);this.elem=null,this.a_anchor=null,this.p_title=null,this.p_users=null,this.d_mod=null,this.d_passworded=null,this.d_guest=null,this.d_img=null},_mac.prototype.verify=function(){var t=gen_gbi("vcode").value;if(t.match(/^[0-9]{6}$/)){var e=JSON.stringify({code:t});this.ajx.post(3010,e,this.verifyr.bind(this))}else alert("Bad code, the correct code will be six numbers.");gen_gbi("vcode").value=""},_mac.prototype.verifyr=function(t){t.s?location.reload():alert("Code is either incorrect or expired, please try again or click resend to get a new code.")},_mac.prototype.resend=function(){var t=JSON.stringify({});this.ajx.post(3014,t,this.resendr.bind(this))},_mac.prototype.resendr=function(t){t.s&&alert("We have regenerated and resent the verify code, please check your e-mail.")},_mac.prototype.chgun=function(){var t=gen_gbi("username").value;if(t.length<3)gen_gbi("username_error").innerText="Username is too short";else if(32<t.length)gen_gbi("username_error").innerText="Username is too long";else if(t.match(/^[a-zA-Z0-9\.\_\-\~]{3,32}$/)){var e=JSON.stringify({username:t});this.ajx.post(3018,e,this.chgunr.bind(this))}else gen_gbi("username_error").innerText="username may contain a-z A-Z 0-9 . - _ ~"},_mac.prototype.chgunr=function(t){"ok"===t.s?location.reload():"taken"===t.s?gen_gbi("username_error").innerText="That username is already taken by another account":"ugly"===t.s&&(gen_gbi("username_error").innerText="Please don't use drug references or offensive words in your username")},_mac.prototype.chgem=function(){var t=gen_gbi("email").value;if(t.match(/^[a-zA-Z0-9\._-]{1,250}\@([a-zA-Z0-9\._-]{2,250})\.[a-zA-Z]{2,16}$/)){var e=JSON.stringify({email:t});this.ajx.post(3022,e,this.chgemr.bind(this))}else gen_gbi("email_error").innerText="Please enter the new e-mail address you would like to use"},_mac.prototype.chgemr=function(t){"ok"===t.s?location.reload():"taken"===t.s&&(gen_gbi("email_error").innerText="That e-mail address is already taken by another account")},_mac.prototype.tstpas=function(){var t=gen_gbi("newpass1").value,e=gen_gbi("newpass2").value;if(t.length<14)gen_gbi("password_error").innerText="Password needs a length of 14 ("+t.length+")";else{if(t===e)return!(gen_gbi("password_error").innerText="");gen_gbi("password_error").innerText="The two passwords don't match"}return!1},_mac.prototype.chgpas=function(){gen_gbi("newpass1").value,gen_gbi("newpass2").value;if(this.tstpas()){var t=JSON.stringify({password:gen_gbi("newpass1").value});this.ajx.post(3026,t,this.chgpasr.bind(this))}},_mac.prototype.chgpasr=function(t){"ok"===t.s?location.reload():"fail"===t.s&&(gen_gbi("password_error").innerText="Password was not changed.")},_mac.prototype.delcbclk=function(){this.cb_del.checked?(this.btn_del.className="red",this.btn_del.disabled=!1):(this.btn_del.disabled=!0,this.btn_del.className="")},_mac.prototype.delacct=function(){var t=JSON.stringify({pork:"sausage"});this.ajx.post(3030,t,this.delacctr.bind(this))},_mac.prototype.delacctr=function(t){t.s&&location.reload()},_mpr.prototype.sdob_cur=function(t){for(var e=t.split("-"),i=parseInt(e[0]),s=parseInt(e[1]),n=parseInt(e[2]),o=0;o<this.sel_dob_month.length;o++)parseInt(this.sel_dob_month.options[o].value)===s&&(this.sel_dob_month.selectedIndex=o);this.sdob_day();for(o=0;o<this.sel_dob_day.length;o++)parseInt(this.sel_dob_day.options[o].value)===n&&(this.sel_dob_day.selectedIndex=o);for(o=0;o<this.sel_dob_year.length;o++)parseInt(this.sel_dob_year.options[o].value)===i&&(this.sel_dob_year.selectedIndex=o)},_mpr.prototype.sdob_year=function(){gen_clrsel("dob_year");var t=new Date,e=document.createElement("option");e.value=0,e.text="",this.sel_dob_year.add(e);for(var i=t.getFullYear()-17;i>t.getFullYear()-120;i--)(e=document.createElement("option")).value=i,e.text=i,this.sel_dob_year.add(e)},_mpr.prototype.sdob_day=function(){var t=this.sel_dob_month.options[this.sel_dob_month.selectedIndex].value;if(0<t&&t<13){var e=31;if(4===t||6===t||9===t||11===t?e=30:2===t&&(e=29),this.sel_dob_day.length!==e+1){gen_clrsel("dob_day"),(s=document.createElement("option")).value=0,s.text="",this.sel_dob_day.add(s);for(var i=1;i<e+1;i++)(s=document.createElement("option")).value=i,s.text=i,this.sel_dob_day.add(s)}}else{var s;gen_clrsel("dob_day"),(s=document.createElement("option")).value=0,s.text="",this.sel_dob_day.add(s)}},_mpr.prototype.spre=function(){this.sdob_day(),this.sdob_year(),this.sdob_cur(this.date),gen_gbi("popup_background").style.display="block",gen_gbi("prf_popup").style.display="block"},_mpr.prototype.hpre=function(){gen_gbi("popup_background").style.display="none",gen_gbi("prf_popup").style.display="none"},_mpr.prototype.svpro=function(){var t=JSON.stringify({dob_month:parseInt(this.sel_dob_month.options[this.sel_dob_month.selectedIndex].value),dob_day:parseInt(this.sel_dob_day.options[this.sel_dob_day.selectedIndex].value),dob_year:parseInt(this.sel_dob_year.options[this.sel_dob_year.selectedIndex].value),sex:this.sel_sex.options[this.sel_sex.selectedIndex].value,location:this.text_location.value,country:this.sel_country.options[this.sel_country.selectedIndex].value,aboutme:this.text_aboutme.value,age_visible:this.cb_age_visible.checked,sex_visible:this.cb_sex_visible.checked,location_visible:this.cb_loc_visible.checked,country_visible:this.cb_cou_visible.checked,aboutme_visible:this.cb_ame_visible.checked});this.ajx.post(4010,t,this.svpror.bind(this))},_mpr.prototype.svpror=function(t){t.s&&location.reload()},_mpr.prototype.addbox=function(){var t=JSON.stringify({type:1});this.ajx.post(4020,t,this.npbr.bind(this))},_mpr.prototype.npbr=function(t){if(t.s){var e=gen_gbi("box_cont"),i=document.createElement("div");i.setAttribute("id","box"+t.box.id,0),i.className="imgbox";var s=document.createElement("div");s.setAttribute("id","boxload"+t.box.id,0),s.className="box_loading",s.style.display="none",i.appendChild(s),(s=document.createElement("img")).setAttribute("id","boximg"+t.box.id,0),s.src="/images/profile_box/"+t.box.image,i.appendChild(s);var n=document.createElement("div");n.setAttribute("id","boxbtn"+t.box.id,0),n.className="box_btns";var o=document.createElement("button");o.className="upload",o.setAttribute("onclick","mpr.cuppb("+t.box.id+");",0),n.appendChild(o),(o=document.createElement("button")).className="remove",o.setAttribute("onclick","mpr.removebox("+t.box.id+");",0),n.appendChild(o),i.appendChild(n),e.insertBefore(i,e.firstChild)}else alert(t.e)},_mpr.prototype.cuppb=function(t){var e=document.createElement("input");e.setAttribute("id","imgbox_upl",0),e.setAttribute("onchange","mpr.uppb("+t+");",0),e.type="file",e.accept="image/*",document.body.appendChild(e),e.click()},_mpr.prototype.uppb=function(t){var e=gen_gbi("imgbox_upl").files;if(document.body.removeChild(gen_gbi("imgbox_upl")),1===e.length)if(e[0].name.match(/.(jpg|jpeg|png|gif)$/)){gen_gbi("boxload"+t).style.display="block",gen_gbi("boxbtn"+t).style.display="none";var i=JSON.stringify({box_id:t});this.ajx.post(4024,i,this.uppbr.bind(this),0,e[0])}else alert("Image must be jpg, gif or png image.")},_mpr.prototype.uppbr=function(t){gen_gbi("boximg"+t.id).src="/images/profile_box/"+t.image,gen_gbi("boxload"+t.id).style.display="none",gen_gbi("boxbtn"+t.id).style.display="block"},_mpr.prototype.removebox=function(t){var e=JSON.stringify({box_id:t});this.ajx.post(4022,e,this.rmpbr.bind(this))},_mpr.prototype.rmpbr=function(t){var e=gen_gbi("box"+t.id);e.parentNode.removeChild(e)},_mpr.prototype.uplp_click=function(t){this.ifs.open(this.uplp.bind(this))},_mpr.prototype.uplp=function(t){this.div_img_load.style.opacity=1,this.btn_editprf.disabled=!0,this.btn_addbox.disabled=!0,this.btn_prf_upl.disabled=!0,this.btn_bg_upl.disabled=!0;var e=JSON.stringify({});this.ajx.post(4030,e,this.uplpr.bind(this),0,t)},_mpr.prototype.uplpr=function(t){location.reload()},_mpr.prototype.resp=function(){var t=JSON.stringify({});this.ajx.post(4032,t,this.respr.bind(this))},_mpr.prototype.respr=function(t){location.reload()},_mpr.prototype.uplbg_click=function(t){this.ifs.open(this.uplbg.bind(this))},_mpr.prototype.uplbg=function(t){this.div_img_load.style.opacity=1,this.btn_editprf.disabled=!0,this.btn_addbox.disabled=!0,this.btn_prf_upl.disabled=!0,this.btn_bg_upl.disabled=!0;var e=JSON.stringify({});this.ajx.post(4034,e,this.uplbgr.bind(this),0,t)},_mpr.prototype.uplbgr=function(t){location.reload()},_mpr.prototype.resbg=function(){var t=JSON.stringify({});this.ajx.post(4036,t,this.resbgr.bind(this))},_mpr.prototype.resbgr=function(t){location.reload()},_mrs.prototype.crrm=function(){if(this.text_new_name.value.match(/^[a-zA-Z0-9\.\_\-\~]{3,32}$/)){this.div_new_err.innerHTML="";var t=JSON.stringify({name:this.text_new_name.value});this.ajx.post(5040,t,this.crrmr.bind(this))}else this.div_new_err.innerHTML="Room name must be 3-32 characters long and only contain numbers, letters, and . _ - ~"},_mrs.prototype.crrmr=function(t){switch(t.s){case"ok":window.location.replace("/manage?p=rooms&r="+t.name);break;case"nt":this.div_new_err.innerHTML="That room name is already taken.";break;case"no":this.div_new_err.innerHTML="Please don't use profanity or drug references.";break;case"cz":this.div_new_err.innerHTML="You do not have enough room credits."}},_mrs.prototype.ums=function(t,e,i){if(confirm("Remove your "+e+" from "+i+"?")){var s=JSON.stringify({room_id:t});this.ajx.post(5060,s,this.umsr.bind(this))}},_mrs.prototype.umsr=function(t){var e=document.getElementById(t.room_id);e.parentNode.removeChild(e)},_mrs.prototype.und=function(t,e){if(confirm("Undelete "+e+"?")){var i=JSON.stringify({room_id:t});this.ajx.post(5052,i,this.undr.bind(this))}},_mrs.prototype.undr=function(t){var e=document.getElementById("dm_"+t.room_id);e.parentNode.removeChild(e)},_mrm.prototype.rm=function(t,e){if(confirm("Are you sure you want to remove "+e+"?")){gen_gbi(t).className="del";var i=JSON.stringify({room_id:this.room_id,user_id:t});this.ajx.post(5062,i,this.rmr.bind(this))}},_mrm.prototype.rmr=function(t){gen_gbi(t.user_id).remove()},_mrm.prototype.pr=function(t,e){var i,s,n=gen_gbi(t).getElementsByTagName("button");for(i=0;i<n.length;i++)n[i].disabled=!0;gen_gbi(t).className="del",s=JSON.stringify({room_id:this.room_id,user_id:t}),this.ajx.post(5066,s,this.prr.bind(this))},_mrm.prototype.prr=function(t){gen_gbi(t.user_id).remove();var e="super_table",i=1===t.nxt;200===t.new_lvl?(i=!1,e="owner_table",1===gen_gbi("super_table").getElementsByTagName("tr").length&&(gen_gbi("super_sec").style.display="none")):1===gen_gbi("mod_table").getElementsByTagName("tr").length&&(gen_gbi("mod_sec").style.display="none"),this.tins(e,-1,i,!0,!0,t.user_id,t.room_id,t.username,t.modded_by,t.date),2===gen_gbi("super_table").getElementsByTagName("tr").length&&(gen_gbi("super_sec").style.display="table")},_mrm.prototype.de=function(t,e){var i,s,n=gen_gbi(t).getElementsByTagName("button");for(i=0;i<n.length;i++)n[i].disabled=!0;gen_gbi(t).className="del",s=JSON.stringify({room_id:this.room_id,user_id:t}),this.ajx.post(5064,s,this.der.bind(this))},_mrm.prototype.der=function(t){gen_gbi(t.user_id).remove();var e="super_table",i=!0;100===t.new_lvl&&(i=!1,e="mod_table",1===gen_gbi("super_table").getElementsByTagName("tr").length&&(gen_gbi("super_sec").style.display="none")),this.tins(e,1,!0,i,!0,t.user_id,t.room_id,t.username,t.modded_by,t.date),2===gen_gbi("mod_table").getElementsByTagName("tr").length&&(gen_gbi("mod_sec").style.display="table"),2===gen_gbi("super_table").getElementsByTagName("tr").length&&(gen_gbi("super_sec").style.display="table")},_mrm.prototype.tins=function(t,e,i,s,n,o,r,a,_,c){var l,p="",d=gen_gbi(t).insertRow(e);d.setAttribute("id",o,0),d.className="savehighl",setTimeout(function(){d.className="savehighl_fade",setTimeout(function(){d.className=""},2e3)},2e3),d.insertCell(0).innerHTML=c,d.insertCell(1).innerHTML="<a href='/profiles/"+a+"'>"+a+"</a>",d.insertCell(2).innerHTML="<a href='/profiles/"+_+"'>"+_+"</a>",i&&(p+="<button class='promote' title='promote "+a+" to owner' onclick=\"mrm.pr('"+o+"','"+a+"');\"></button>"),s&&(p+="<button class='demote' title='demote "+a+" to mod' onclick=\"mrm.de('"+o+"','"+a+"');\"></button>"),n&&(p+="<button class='red' title='remove "+a+"' onclick=\"mrm.rm('"+o+"','"+a+"');\">Remove</button>"),(l=d.insertCell(3)).innerHTML=p,l.className="buttons"},_mrb.prototype.rm=function(t,e){if(confirm("Are you sure you want to unban "+e+"?")){gen_gbi(t).className="del";var i=JSON.stringify({room_id:this.room_id,ban_id:t});this.ajx.post(5124,i,this.rmr.bind(this))}},_mrb.prototype.rmr=function(t){gen_gbi(t.ban_id).remove(),void 0!==this.brw[t.ban_id]&&(this.table.deleteRow(gen_gbi("tredit"+t.ban_id).rowIndex),this.brw[t.ban_id]=void 0)},_mrb.prototype.edit=function(t){if(void 0===this.brw[t]){var e=gen_gbi(t),i=this.table.insertRow(e.rowIndex+1);i.setAttribute("id","tredit"+t,0),i.className="trinline highl";var s=i.insertCell(0);s.className="tdinline",s.colSpan=this.table.rows[0].cells.length,this.brw[t]=new _brw(this.ajx,this.room_id,t,s,this.saved.bind(this),gen_gbi("tbrs"+t).innerHTML,"never"===gen_gbi("tbex"+t).innerHTML)}else this.table.deleteRow(gen_gbi("tredit"+t).rowIndex),this.brw[t]=void 0},_mrb.prototype.saved=function(t){this.edit(t.ban_id),gen_gbi("tbrs"+t.ban_id).innerHTML=t.reason,1===t.perma?gen_gbi("tbex"+t.ban_id).innerHTML="never":"0"!==t.expiry&&(gen_gbi("tbex"+t.ban_id).innerHTML=t.expiry)},_brw.prototype.durkd=function(t){this.cb_perma.checked=!1},_brw.prototype.save=function(t){this.d_loading.style.display="block",this.d_editor.style.display="none";var e=parseInt(this.text_days.value)||0,i=parseInt(this.text_hours.value)||0,s=parseInt(this.text_minutes.value)||0,n=JSON.stringify({room_id:this.room_id,ban_id:this.ban_id,reason:this.text_reason.value,days:e,hours:i,minutes:s,perma:this.cb_perma.checked});this.ajx.post(5120,n,this.saved_cb)},_mrt.prototype.cpr=function(){var t=JSON.stringify({room_id:this.room_id,theme_id:this.thm_select.options[this.thm_select.selectedIndex].value});this.ajx.get(5210,t,this.cprr.bind(this))},_mrt.prototype.cprr=function(t){this.prc(t)},_mrt.prototype.prc=function(t){this.sel=t.id,gen_gbi("col_name").value=t.name,gen_gbi("col_owners").jscolor.fromString(t.ncowner),this.ccow("col_owners"),gen_gbi("col_supers").jscolor.fromString(t.ncsuper),this.ccsu("col_supers"),gen_gbi("col_mods").jscolor.fromString(t.ncmod),this.ccmo("col_mods"),gen_gbi("col_users").jscolor.fromString(t.ncuser),this.ccus("col_users"),gen_gbi("col_guests").jscolor.fromString(t.ncguest),this.ccgu("col_guests"),gen_gbi("col_lines").jscolor.fromString(t.lcstage),this.ccli("col_lines"),gen_gbi("col_bg").jscolor.fromString(t.bcstage),this.ccbg("col_bg"),gen_gbi("col_ui").jscolor.fromString(t.fcui),this.ccui("col_ui"),gen_gbi("col_topic").jscolor.fromString(t.fctopic),this.ccto("col_topic"),gen_gbi("col_def").jscolor.fromString(t.fcdef),this.ccde("col_def"),gen_gbi("col_notif").jscolor.fromString(t.fcnotif),this.ccno("col_notif"),gen_gbi("col_textbg").jscolor.fromString(t.bctext),this.cctb("col_textbg"),gen_gbi("col_btnup").jscolor.fromString(t.btnup),this.ccbu("col_btnup"),gen_gbi("col_btnover").jscolor.fromString(t.btnover),this.ccbo("col_btnover"),gen_gbi("col_btndown").jscolor.fromString(t.btndown),this.ccbd("col_btndown"),this.cibg(t.bgimg),this.cur===t.id?(gen_gbi("set_theme").style.display="none",gen_gbi("thmsetting_cnt").className=""):(gen_gbi("set_theme").style.display="block",gen_gbi("thmsetting_cnt").className="usethis"),this.room_id===t.owning&&(this.exp.pro||this.exp.adm)?this.enae():this.dise()},_mrt.prototype.ccow=function(t){gen_scfnc(".nc_owner",gen_gbi(t).value)},_mrt.prototype.ccsu=function(t){gen_scfnc(".nc_super",gen_gbi(t).value)},_mrt.prototype.ccmo=function(t){gen_scfnc(".nc_mod",gen_gbi(t).value)},_mrt.prototype.ccus=function(t){gen_scfnc(".nc_user",gen_gbi(t).value)},_mrt.prototype.ccgu=function(t){gen_scfnc(".nc_guest",gen_gbi(t).value)},_mrt.prototype.ccli=function(t){var e,i,s=gen_gbi(t).value;for(e=document.querySelectorAll(".thm_camspot, .thm_btn, .thm_send_btn, .thm_topic, .thm_txt, .thm_msg, .thm_pmbox_txt, .thm_pmbox_msg, .thm_pmbox"),i=0;i<e.length;i++)e[i].style.border="1px solid #"+s;for(e=document.querySelectorAll(".thm_pmbox_title"),i=0;i<e.length;i++)e[i].style.borderBottom="1px solid #"+s;gen_gbi("room_header").style.borderColor="#"+s},_mrt.prototype.ccbg=function(t){var e=gen_gbi(t).value;gen_scbgc(".thm_prv, .thm_pmbox",e),gen_gbi("room_header").style.backgroundColor="#"+e},_mrt.prototype.ccui=function(t){var e=gen_gbi(t).value;gen_scfnc(".thm_btn, .thm_send_btn, .thm_ulist>p, .thm_pmbox_title p",e),gen_gbi("room_header").style.color="#"+e},_mrt.prototype.ccto=function(t){gen_scfnc(".thm_topic",gen_gbi(t).value)},_mrt.prototype.ccde=function(t){gen_scfnc(".fc_default",gen_gbi(t).value)},_mrt.prototype.ccno=function(t){gen_scfnc("span.thm_ts, span.thm_sys",gen_gbi(t).value)},_mrt.prototype.cctb=function(t){gen_scbgc(".thm_topic, .thm_txt, .thm_msg, .thm_pmbox_txt, .thm_pmbox_msg, .thm_ulist_cnt",gen_gbi(t).value)},_mrt.prototype.ccbu=function(t){gen_scbgc(".thm_camspot, .thm_btn, .thm_send_btn, .thm_ulist_cnt p, .thm_pmbox_title",gen_gbi(t).value)},_mrt.prototype.ccbo=function(t){gen_scbgc(".thm_camspot:hover, .thm_btn:hover, .thm_send_btn:hover, .thm_ulist_cnt p:hover",gen_gbi(t).value)},_mrt.prototype.ccbd=function(t){},_mrt.prototype.cibg=function(t){var e;e=0===t.length?"":"http"!==t.substring(0,4)?"/images/theme_bg/"+t:t,gen_gbi("thm_bg_img").style.backgroundImage="url('"+e+"')"},_mrt.prototype.crt=function(){var t=JSON.stringify({room_id:this.room_id,theme_id:this.sel});this.ajx.post(5212,t,this.crtr.bind(this))},_mrt.prototype.crtr=function(t){alert("Theme Changed! Type /update in your room to activate your new colours."),location.reload()},_mrt.prototype.ultb=function(t){var e=gen_gbi(t).files;if(1===e.length)if(e[0].name.match(/.(jpg|jpeg|png)$/)){gen_gbi("thm_select").disabled=!0,gen_gbi("et_bgupbtn").disabled=!0,gen_gbi("et_bgclbtn").disabled=!0,gen_gbi("et_bgupbtn").className="loading",gen_gbi("et_bgupbtn").innerHTML="",gen_gbi("et_bgclbtn").className="loading",gen_gbi("et_bgclbtn").innerHTML="";var i=JSON.stringify({room_id:this.room_id,theme_id:this.sel});this.ajx.post(5220,i,this.ultbr.bind(this),0,e[0])}else alert("Theme Background must be jpg or png image.")},_mrt.prototype.ultbr=function(t){gen_gbi("thm_select").disabled=!1,gen_gbi("et_bgupbtn").disabled=!1,gen_gbi("et_bgclbtn").disabled=!1,gen_gbi("et_bgupbtn").className="",gen_gbi("et_bgupbtn").innerHTML="Upload",gen_gbi("et_bgclbtn").className="",gen_gbi("et_bgclbtn").innerHTML="None",this.cibg(t.image)},_mrt.prototype.rstb=function(t){gen_gbi("thm_select").disabled=!0,gen_gbi("et_bgupbtn").disabled=!0,gen_gbi("et_bgclbtn").disabled=!0,gen_gbi("et_bgupbtn").className="loading",gen_gbi("et_bgupbtn").innerHTML="",gen_gbi("et_bgclbtn").className="loading",gen_gbi("et_bgclbtn").innerHTML="";var e=JSON.stringify({room_id:this.room_id,theme_id:this.sel});this.ajx.post(5222,e,this.rstbr.bind(this))},_mrt.prototype.rstbr=function(t){gen_gbi("thm_select").disabled=!1,gen_gbi("et_bgupbtn").disabled=!1,gen_gbi("et_bgclbtn").disabled=!1,gen_gbi("et_bgupbtn").className="",gen_gbi("et_bgupbtn").innerHTML="Upload",gen_gbi("et_bgclbtn").className="",gen_gbi("et_bgclbtn").innerHTML="None",this.cibg(t.image)},_mrt.prototype.mdi=function(){this.unsav||(this.unsav=!0,gen_gbi("et_savecolbtn").className="")},_mrt.prototype.savc=function(t){var e=JSON.stringify({room_id:this.room_id,theme_id:this.sel,name:gen_gbi("col_name").value,ncowner:gen_gbi("col_owners").value,ncsuper:gen_gbi("col_supers").value,ncmod:gen_gbi("col_mods").value,ncuser:gen_gbi("col_users").value,ncguest:gen_gbi("col_guests").value,lcstage:gen_gbi("col_lines").value,bcstage:gen_gbi("col_bg").value,fcui:gen_gbi("col_ui").value,fctopic:gen_gbi("col_topic").value,fcdef:gen_gbi("col_def").value,fcnotif:gen_gbi("col_notif").value,bctext:gen_gbi("col_textbg").value,btnup:gen_gbi("col_btnup").value,btnover:gen_gbi("col_btnover").value,btndown:gen_gbi("col_btndown").value});gen_gbi("et_savecolbtn").disabled=!0,gen_gbi("et_savecolbtn").className="loading",gen_gbi("et_savecolbtn").innerHTML="",this.ajx.post(5226,e,this.savcr.bind(this))},_mrt.prototype.savcr=function(t){this.unsav=!1,gen_gbi("et_savecolbtn").disabled=!1,gen_gbi("et_savecolbtn").className="indistinct",gen_gbi("et_savecolbtn").innerHTML="Save"},_mrt.prototype.dise=function(){gen_gbi("edit_theme").style.display="none"},_mrt.prototype.enae=function(){gen_gbi("edit_theme").style.display="block"},_mrg.prototype.urh=function(t){if(this.text_uh_name.value.match(/^[a-zA-Z0-9\.\_\-\~]{3,32}$/)){this.div_uh_load.style.opacity=1,this.btn_uh_upd.disabled=!0;var e=JSON.stringify({room_id:this.room_id,name:this.text_uh_name.value,title:this.text_uh_title.value,desc:this.text_uh_desc.value});this.ajx.post(5310,e,this.urhr.bind(this))}else this.div_uh_err.innerHTML="Room name must be 3-32 characters long and only contain numbers, letters, and . _ - ~"},_mrg.prototype.urhr=function(t){switch(this.div_uh_load.style.opacity=0,this.btn_uh_upd.disabled=!1,t.s){case"ok":window.location.replace("/manage?p=rooms&r="+t.name);break;case"nt":this.div_uh_err.innerHTML="That room name is already taken.";break;case"no":case"to":this.div_uh_err.innerHTML="Please don't use profanity or drug references."}},_mrg.prototype.uic_click=function(t){this.ifs.open(this.upl_ic.bind(this))},_mrg.prototype.upl_ic=function(t){this.div_upic_load.style.opacity=1,this.btn_upic_upl.disabled=!0,this.btn_upic_rmv.disabled=!0;var e=JSON.stringify({room_id:this.room_id});this.ajx.post(5320,e,this.upl_icr.bind(this),0,t)},_mrg.prototype.upl_icr=function(t){this.div_icon_header.style.backgroundImage="url('/images/room/"+t.image+"')",this.div_icon_prv.style.backgroundImage="url('/images/room/"+t.image+"')",this.div_upic_load.style.opacity=0,this.btn_upic_upl.disabled=!1,this.btn_upic_rmv.disabled=!1},_mrg.prototype.rst_ic=function(){var t=JSON.stringify({room_id:this.room_id});this.ajx.post(5321,t,this.rst_icr.bind(this))},_mrg.prototype.rst_icr=function(t){location.reload()},_mrg.prototype.ubg_click=function(t){this.ifs.open(this.upl_bg.bind(this))},_mrg.prototype.upl_bg=function(t){this.div_upbg_load.style.opacity=1,this.btn_upbg_upl.disabled=!0,this.btn_upbg_rmv.disabled=!0;var e=JSON.stringify({room_id:this.room_id});this.ajx.post(5322,e,this.upl_bgr.bind(this),0,t)},_mrg.prototype.upl_bgr=function(t){this.div_container.style.backgroundImage="url('/images/room_bg/"+t.image+"')",this.div_upbg_load.style.opacity=0,this.btn_upbg_upl.disabled=!1,this.btn_upbg_rmv.disabled=!1},_mrg.prototype.rst_bg=function(){var t=JSON.stringify({room_id:this.room_id});this.ajx.post(5323,t,this.rst_icr.bind(this))},_mrg.prototype.rst_bgr=function(t){location.reload()},_mrg.prototype.ubn_click=function(t){this.ifs.open(this.upl_bn.bind(this))},_mrg.prototype.upl_bn=function(t){this.div_upbn_load.style.opacity=1,this.btn_upbn_upl.disabled=!0,this.btn_upbn_rmv.disabled=!0;var e=JSON.stringify({room_id:this.room_id});this.ajx.post(5324,e,this.upl_bnr.bind(this),0,t)},_mrg.prototype.upl_bnr=function(t){this.img_banner.src="/images/room_banner/"+t.image,this.div_upbn_load.style.opacity=0,this.btn_upbn_upl.disabled=!1,this.btn_upbn_rmv.disabled=!1},_mrg.prototype.rst_bn=function(){var t=JSON.stringify({room_id:this.room_id});this.ajx.post(5325,t,this.rst_icr.bind(this))},_mrg.prototype.rst_bnr=function(t){location.reload()},_mrg.prototype.del=function(){var t=JSON.stringify({room_id:this.room_id});this.ajx.post(5050,t,this.delr.bind(this))},_mrg.prototype.delr=function(t){window.location.replace("/manage?p=rooms")},_ifs.prototype.open=function(t){this.cb=t,this.uploader.click()},_ifs.prototype.ok=function(t){1===this.uploader.files.length&&(console.log(this.uploader.files[0]),this.uploader.files[0].name.match(/.(jpg|jpeg|png|gif)$/)?null!==this.cb&&this.cb(this.uploader.files[0]):alert("Please choose a supported image file."))};