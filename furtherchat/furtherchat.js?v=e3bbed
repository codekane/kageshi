"use strict";function fc_cam(t,e,n,s,i,o,c,r,l){this.ws=t,this.pb=e,this.div_maxcont=n,this.camno=s,this.ratio=i,this.wndmedia=c,this.tip=r,this.menu_cb=l,this.kageshi_mode=!1,this.outvid_w=0,this.outvid_h=0,this.outvid_ar=0,this.outvid_fps=0,this.starttime=0,this.offersonhold=null,this.offersonhold_delay=500,this.offersonhold_interval=null,this.user=null,this.you=!1,this.paused=!1,this.rtcpush=null,this.rtcpull=null,this.cs_name="",this.cs_loc="",this.iser=null,this.local_stream=null,this.vab=null,this.maxdummy=null,this.elem=document.createElement("div"),this.elem.className="cam_a",this.elem.style.width=o;var a=document.createElement("div");a.className="cam_b","16:9"===i?(a.style.paddingTop="56.25%",this.outvid_w=256,this.outvid_h=144,this.outvid_ar=1.777777778,this.outvid_fps=26):"4:3"===i?(a.style.paddingTop="75%",this.outvid_w=320,this.outvid_h=240,this.outvid_ar=1.333333333,this.outvid_fps=26):"21:9"===i&&(a.style.paddingTop="42.18%",this.outvid_w=420,this.outvid_h=180,this.outvid_ar=2.383333333,this.outvid_fps=26),this.elem.appendChild(a),this.cam_c=document.createElement("div"),this.cam_c.className="cam_c hvcntrl",this.elem.appendChild(this.cam_c),this.startbtn=null,this.topbar=null,this.statp=null,this.maxbtn=null,this.stopbtn=null,this.pausebtn=null,this.mobskin=null,this.bottombar=null,this.namep=null,this.volrange=null,this.mutebtn=null,this.loading=null,this.video=null,this.unpausebtn=null,this.stopcam()}function fc_camload(t,e){this.elem=null,this.c1=t,this.c2=e,this.elem=document.createElement("div"),this.elem.className="camload",this.step=0,this.backwards=!1,this.interval=0,this.loading=null,this.blocks=[]}function fc_chatbox(t,e,n){this.ws=t,this.menu_cb=e,this.youtube_cb=n,this.elem=document.createElement("div"),this.elem.setAttribute("class","chatbox"),this.lastmn=0}function fc_checkbox(t,e){this.elem=null,this.cb=null,this.ptext=null,this.elem=document.createElement("div"),this.elem.className="fccb",this.cb=document.createElement("input"),this.cb.setAttribute("type","checkbox"),this.cb.checked=t,this.elem.appendChild(this.cb);var n=document.createElement("label");n.innerHTML="<span class='material-icons'></span>"+e,this.elem.appendChild(n)}function fc_config(t,e){this.ws=t,this.pb=e,this.font_colour="#000000",this.font_size=1,this.pm_accept=!0,this.cb_joinleave=!0,this.cb_timestamp=!0,this.snd_ui=!1,this.snd_chat=!1,this.snd_pm=!1,this.snd_joinleave=!1}function fc_ctrlpm(t,e,n,s,i,o){console.log("fc_ctrlpm constructor"),this.ws=t,this.pb=e,this.wndctrl=n,this.msglimit=s,this.config=i,this.umcb=o,this.font_colour="#FF0000",this.font_size=1,this.wndpm=[]}function fc_ctrlwnd(t){this.wnd_array=[],this.mouse_x=0,this.mouse_y=0,this.drag_wnd=null,this.drag_elem_x=0,this.drag_elem_y=0,this.resize_wnd=null,this.resize_left=!1,this.resize_right=!1,this.resize_bottom=!1,this.zindex=250,this.focus_index=-1,this.parent_elem=null===t?document.body:t}function fc_layout(t,e,n,s,i,o){this.ws=t,this.pb=e,this.div_maxcont=n,this.tip=i,this.menu_cb=o,this.cur_layout=0,this.cams=[],this.wndmedia=s,this.elem=document.createElement("div"),this.elem.className="camcont",this.ul_cams=document.createElement("ul"),this.ul_cams.className="cams",this.elem.appendChild(this.ul_cams),this.dynarow=null,this.kageshi_mode=!1,this.joined=!1}function fc_menu(t,e,n,s){this.ws=t,this.pb=e,this.lo=n,this.target=null,this.pmctrl=s,this.elem=document.createElement("div"),this.elem.setAttribute("class","usermenu"),"mobile"===this.ws.mode?this.elem.onclick=this.close.bind(this):(this.elem.onmouseleave=this.mouseleave.bind(this),this.elem.onmouseenter=this.mouseenter.bind(this)),this.btn_close=document.createElement("button"),this.h_title=document.createElement("h1"),this.h_title.innerHTML="menu",this.elem.appendChild(this.h_title),this.btn_stopcam=document.createElement("button"),this.btn_stopcam.onclick=this.btnclick.bind(this),this.btn_stopcam.setAttribute("data-btntype","stopcam"),this.btn_stopcam.innerHTML="stop cam",this.elem.appendChild(this.btn_stopcam),this.btn_pausecam=document.createElement("button"),this.btn_pausecam.onclick=this.btnclick.bind(this),this.btn_pausecam.setAttribute("data-btntype","pausecam"),this.btn_pausecam.innerHTML="pause cam",this.elem.appendChild(this.btn_pausecam),this.btn_mutecam=document.createElement("button"),this.btn_mutecam.onclick=this.btnclick.bind(this),this.btn_mutecam.setAttribute("data-btntype","mutecam"),this.btn_mutecam.innerHTML="mute cam",this.elem.appendChild(this.btn_mutecam),this.btn_pm=document.createElement("button"),this.btn_pm.onclick=this.btnclick.bind(this),this.btn_pm.setAttribute("data-btntype","pm"),this.btn_pm.innerHTML="pm",this.elem.appendChild(this.btn_pm),this.btn_profile=document.createElement("button"),this.btn_profile.onclick=this.btnclick.bind(this),this.btn_profile.setAttribute("data-btntype","profile"),this.btn_profile.innerHTML="profile",this.elem.appendChild(this.btn_profile),this.btn_ignore=document.createElement("button"),this.btn_ignore.onclick=this.btnclick.bind(this),this.btn_ignore.setAttribute("data-btntype","ignore"),this.btn_ignore.innerHTML="ignore",this.elem.appendChild(this.btn_ignore),this.btn_unignore=document.createElement("button"),this.btn_unignore.onclick=this.btnclick.bind(this),this.btn_unignore.setAttribute("data-btntype","unignore"),this.btn_unignore.innerHTML="unignore",this.elem.appendChild(this.btn_unignore),this.btn_mod=document.createElement("button"),this.btn_mod.onclick=this.btnclick.bind(this),this.btn_mod.setAttribute("data-btntype","mod"),this.btn_mod.innerHTML="mod",this.elem.appendChild(this.btn_mod),this.btn_unmod=document.createElement("button"),this.btn_unmod.onclick=this.btnclick.bind(this),this.btn_unmod.setAttribute("data-btntype","unmod"),this.btn_unmod.innerHTML="unmod",this.elem.appendChild(this.btn_unmod),this.btn_kick=document.createElement("button"),this.btn_kick.onclick=this.btnclick.bind(this),this.btn_kick.setAttribute("data-btntype","kick"),this.btn_kick.innerHTML="kick",this.elem.appendChild(this.btn_kick),this.btn_ban48=document.createElement("button"),this.btn_ban48.onclick=this.btnclick.bind(this),this.btn_ban48.setAttribute("data-btntype","ban48"),this.btn_ban48.innerHTML="room ban 48hr",this.elem.appendChild(this.btn_ban48),this.btn_banperma=document.createElement("button"),this.btn_banperma.onclick=this.btnclick.bind(this),this.btn_banperma.setAttribute("data-btntype","banperma"),this.btn_banperma.innerHTML="room ban perma",this.elem.appendChild(this.btn_banperma),this.btn_purge=document.createElement("button"),this.btn_purge.onclick=this.btnclick.bind(this),this.btn_purge.setAttribute("data-btntype","purge"),this.btn_purge.innerHTML="Purge",this.elem.appendChild(this.btn_purge),this.btn_siteban=document.createElement("button"),this.btn_siteban.onclick=this.btnclick.bind(this),this.btn_siteban.setAttribute("data-btntype","siteban"),this.btn_siteban.innerHTML="Site Ban",this.elem.appendChild(this.btn_siteban),this.leavetimeout=null,this.showtimeout=null}function fc_msglimit(){this.cooloff_time=5e3,this.msg_interval=600,this.max_strikes=3,this.max_msg_length=300,this.prev_msg="",this.prev_msg_time=0,this.cur_strikes=0,this.msg_count=0,this.enforced=!1}function fc_msk(t,e){this.ws=t,this.elem=document.createElement("div"),this.elem.className="msk",document.getElementById(e).appendChild(this.elem),this.mode=0,this.deadline=0,this.interval=null,this.h1_status=null,this.p_info=null,this.p_countdown=null,this.span_countdown=null,this.text_password=null,this.button=null}function fc_recon(t,e,n,s){this.ws=t,this.msk=e,this.cb=n,this.t2src_cb=s,this.waiting_t2=!1,this.recon_timer=null}function fc_rtcpull(t,e,n){this.ws=t,this.pb=e,this.cam=n,this.tid=0,this.vstream=null,this.astream=null,this.rtcpeer=null,this.srd_done=!1,this.cndcount=0,this.icestack=[],this.d_offer=!1,this.d_ice=!1,this.failed=!1,this.finish=!1,this.stat_interval=0,this.stat_vis=!1,this.stat_viscount=0,this.byte_prev=0,this.frame_prev=0,this.vcodec="",this.acodec=""}function fc_rtcpush(t,e,n,s,i,o,c){this.ws=t,this.pb=e,this.camno=n,this.tid=s,this.local_stream=i,this.iser=c,this.srd_done=!1,this.cndcount=0,this.offersonhold=o,this.rtcpeer=null,this.d_offer=!1,this.d_answer=!1,this.d_ice=!1,this.failed=!1,this.finish=!1}function fc_status(t,e){this.ws=t,this.pb=e,this.tbi=12e5,this.statuslevel=1,this.statustime=0,this.statusmsg="",this.lastact=Date.now(),this.lastreturn=Date.now(),this.ws.isguest||(this.idleinterval=setInterval(this.tick.bind(this),26e3))}function fc_switch(){this.elem=null,this.cb=null,this.ptext=null}function fc_tip(t,e){this.ws=t,this.ul=e,this.elem=document.createElement("div"),this.elem.className="tooltip",this.p_message=document.createElement("p"),this.p_message.innerHTML="",this.elem.appendChild(this.p_message),this.showtimeout=null,this.hidetimeout=null,this.config=null,this.reqx=0,this.reqy=0}function fc_toolbox(t,e,n,s,i,o,c,r){var l;this.ws=t,this.pb=e,this.cb=i,this.msglimit=o,this.config=c,this.pmctrl=n,this.layout=s,this.yt_cb=r,this.font_colour="#FF0000",this.font_size=1,this.elem=document.createElement("div"),this.elem.className="tb",this.text_cp=document.createElement("input"),this.text_cp.className="jscolor {position:'top',value:'"+this.font_colour+"',borderRadius:'1px',borderColor:'"+this.ws.theme.lncol+"',insetColor:'"+this.ws.theme.lncol+"',backgroundColor:'"+this.ws.theme.bgcol+"'}",this.text_cp.onchange=this.cp_change.bind(this),this.elem.appendChild(this.text_cp),this.sel_fs=document.createElement("select"),this.sel_fs.className="sizesel",this.sel_fs.onchange=this.fs_change.bind(this),(l=document.createElement("option")).innerHTML="smaller",l.value=0,this.sel_fs.appendChild(l),(l=document.createElement("option")).innerHTML="normal",l.value=1,this.sel_fs.appendChild(l),(l=document.createElement("option")).innerHTML="bigger",l.value=2,this.sel_fs.appendChild(l),(l=document.createElement("option")).innerHTML="more bigger",l.value=3,this.sel_fs.appendChild(l),this.sel_fs.selectedIndex=this.font_size,this.elem.appendChild(this.sel_fs),"mobile"!==this.ws.mode?(this.btn_ytpl=document.createElement("button"),this.btn_ytpl.innerHTML="YouTube Player",this.btn_ytpl.onclick=this.yt_click.bind(this),this.elem.appendChild(this.btn_ytpl)):this.btn_ytpl=null,this.cb_kmode=new fc_checkbox(!1,"Kageshi Mode"),this.cb_kmode.addonclick(this.kmode_click.bind(this)),this.elem.appendChild(this.cb_kmode.elem),this.text_msg=document.createElement("input"),this.text_msg.setAttribute("type","text"),this.text_msg.setAttribute("autocomplete","off"),this.text_msg.className="chatmsg fs_"+this.font_size,this.text_msg.style.color=this.font_colour,this.text_msg.value="message ",this.text_msg.onkeyup=this.msg_keyup.bind(this),this.text_msg.autocomplete="off",this.elem.appendChild(this.text_msg),this.btn_send=document.createElement("button"),this.btn_send.className="sendbtn material-icons",this.btn_send.onclick=this.send_click.bind(this),this.elem.appendChild(this.btn_send)}function fc_topic(t,e,n,s,i,o){this.ws=t,this.pb=e,this.wndlayout=n,this.wndpolicy=s,this.wndconfig=i,this.togulist_cb=o,this.cur_topic="",this.elem=document.createElement("div"),this.elem.className="topicbar",this.text_topic=document.createElement("input"),this.text_topic.setAttribute("type","text"),this.text_topic.setAttribute("maxlength",128),this.text_topic.className="fctopic",this.text_topic.onblur=this.topicbar_change.bind(this),this.elem.appendChild(this.text_topic),this.btn_policy=document.createElement("button"),this.btn_policy.className="policybtn material-icons",this.btn_policy.onclick=this.policy_click.bind(this),this.elem.appendChild(this.btn_policy),this.btn_layout=document.createElement("button"),this.btn_layout.className="layoutbtn material-icons",this.btn_layout.onclick=this.layout_click.bind(this),this.elem.appendChild(this.btn_layout),this.btn_config=document.createElement("button"),this.btn_config.className="configbtn material-icons",this.btn_config.onclick=this.config_click.bind(this),this.elem.appendChild(this.btn_config),this.btn_userlist=document.createElement("button"),this.btn_userlist.className="userlistbtn material-icons",this.btn_userlist.onclick=o,this.elem.appendChild(this.btn_userlist)}function fc_ulist(t,e,n,s,i){this.ws=t,this.menu_cb=e,this.tipshow_cb=n,this.tipcancel_cb=s,this.elem=document.createElement("div"),this.elem.setAttribute("class","userlist"),"mobile"===this.ws.mode&&(this.togulist_cb=i,this.elem.onclick=i),this.guest_elem=document.createElement("p"),this.guest_elem.className="guestcount fcguest",this.updgsc(0),this.users=[],this.usersnum=[]}function fc_user(t,e,n,s){this.username=t.nm,this.modlvl=t.ml,this.usernum=t.un,this.statuslevel=t.st.lv,this.statustime=t.st.ct,this.statusmsg=t.st.msg,this.online=!0,this.jointime=t.ct,this.ping=t.ping,this.list_elem=document.createElement("p"),this.list_elem.className="user available fcuser",this.list_elem.value=this.username,this.list_elem.setAttribute("data-username",this.username),this.list_elem.onclick=e,this.list_elem.onmouseover=n,this.list_elem.onmouseout=s,this.setstatus(t.st),this.updateelem()}function fc_vab(){this.audio_context=null,this.analyser=null,this.source=null,this.interval=0,this.elem=document.createElement("div"),this.elem.className="va_b"}function fc_wnd(t,e,n,s,i,o){this.parent_elem=t,this.index=e,this.title=s,this.min_width=0,this.min_height=0,this.visible=!1,this.resizable=n,this.rz_left=null,this.rz_right=null,this.rz_bottom=null,this.rz_bottomleft=null,this.rz_bottomright=null,this.resize_callback=null,this.close_callback=null,this.elem=document.createElement("div"),this.elem.setAttribute("id","wnd"+e),this.elem.className="fcwnd",this.resizable&&this.addresizers(),this.elem_header=document.createElement("div"),this.elem_header.setAttribute("class","fcwnd_header"),this.elem_headerp=document.createElement("p"),this.elem_headerp.innerHTML=s,this.elem_header.appendChild(this.elem_headerp),this.elem.appendChild(this.elem_header),this.elem_closebtn=document.createElement("button"),this.elem_closebtn.setAttribute("class","close material-icons"),this.elem_closebtn.onclick=this.click_close.bind(this),this.elem.appendChild(this.elem_closebtn),this.elem_content=document.createElement("div"),this.elem_content.setAttribute("class","fcwnd_content"),this.elem.appendChild(this.elem_content),this.parent_elem.appendChild(this.elem),this.elem.style.left=i+"px",this.elem.style.top=o+"px"}function fc_wndconfig(t,e,n){this.ws=t,this.pb=e,this.wndman=n,this.wnd=null,this.sw_blockpm=null}function fc_wndlayout(t,e,n){this.ws=t,this.pb=e,this.wndman=n,this.wnd=null}function fc_wndmedia(t,e){this.ws=t,this.wndman=e,this.cam=null,this.stream=null,this.wnd=null,this.cam_select=null,this.cam_a=null,this.cam_b=null,this.cam_c=null,this.video=null,this.vab=null,this.p_video=null,this.sw_usemic=null,this.sw_useec=null,this.mic_select=null,this.btn_cancel=null,this.btn_start=null,this.forced_camid="",this.forced_micid=""}function fc_wndpm(t,e,n,s,i,o,c,r,l){this.ws=t,this.pb=e,this.wndman=n,this.umcb=o,this.msglimit=s,this.config=i,this.username=c,this.wnd=null,this.online=!0,this.font_colour=r,this.font_size=l,this.type_state=0,this.type_time=0,this.type_timeout=null,this.chatbox=null,this.p_status=null,this.text_msg=null,this.btn_send=null}function fc_wndpolicy(t,e,n){this.ws=t,this.pb=e,this.wndman=n,this.wnd=null,this.sw_password=null,this.text_password=null,this.sw_modchangelayout=null,this.sw_modchangetopic=null,this.sw_modstopcam=null,this.sw_allowguest=null,this.sw_allowrolling=null,this.sw_allowyoutube=null}function fc_ws(t,e,n,s,i,o,c){this.pako=t,this.ws=null,this.addr=e,this.mode=n,this.rcv_cb=i,this.error_cb=o,this.close_cb=c,this.sid=this.mkses(),this.t2="",this.t2exp=new Date,this.ready=!1,this.chead=null,this.pver=5,this.cmtype=2,this.close_pf=null,this.tmdelta=0,this.recon_min=1e3,this.recon_max=6e3,this.rn=0,this.un=0,this.uh=0,this.username="",this.modlvl=0,this.isguest=!1,this.theme=s,this.roompass="",this.joinover=!1,this.jth="",this.pol_pwenforced=!1,this.pol_pw="",this.pol_modchangelayout=!0,this.pol_modchangetopic=!0,this.pol_modstopcam=!1,this.pol_allowguest=!0,this.pol_allowrolling=!0,this.pol_allowyoutube=!0,this.pn=0,this.flwb=0,this.clswait=null,this.joined=!1,console.log("fc_ws constructor. sid: "+this.sid)}function fc_youtube(t,e,n,s){this.ws=t,this.pb=e,this.search_cb=n,this.queue_cb=s,this.pa=!1,this.ytpp=null,this.player=null,this.YT=null,this.playstate="unloaded",this.cur_start_time=0,this.cur_video=null,this.btn_addvideo=null,this.btn_nextvideo=null,this.div_privnote=null,this.btn_acceptpriv=null,this.div_qpopup=null,this.div_queue=null,this.div_qpopupbg=null,this.div_qpopupcls=null,this.text_search=null,this.btn_search=null,this.text_addurl=null,this.btn_addurl=null,this.p_query_err=null,this.table_queue=null,this.div_sresultcont=null,this.div_sresult=null,this.div_sresultload=null,this.span_sresulttext=null}function fc(t,e,n,s,i,o,c,r,l,a){this.pb=t,this.b64=e,this.pako=n,this.mode=i,this.addr=o,this.gridcams=null,this.gridtopic=null,this.gridchat=null,this.gridtools=null,this.gridlist=null,this.ui_done=!1,this.width_step=100,this.step_timeout=0,this.t2src_cb=r,this.ws=new fc_ws(this.pako,this.addr,this.mode,c,this.wsrecv.bind(this),this.wserr.bind(this),this.wsclose.bind(this)),this.msk=new fc_msk(this.ws,s),this.elem=document.createElement("div"),this.elem.className="fc",document.getElementById(s).appendChild(this.elem),this.div_maxcont=document.createElement("div"),this.div_maxcont.className="maxcamcont",this.elem.appendChild(this.div_maxcont),this.status=new fc_status(this.ws,this.pb),this.config=new fc_config(this.ws,this.pb),this.config.font_colour=c.fcdef,this.msglimit=new fc_msglimit,this.wndctrl=new fc_ctrlwnd(this.elem),this.pmctrl=new fc_ctrlpm(this.ws,this.pb,this.wndctrl,this.msglimit,this.config,this.umopen.bind(this)),this.ul=new fc_ulist(this.ws,this.umopen.bind(this),this.tipshow.bind(this),this.tipcancel.bind(this),this.togulist.bind(this)),this.cb=new fc_chatbox(this.ws,this.umopen.bind(this),this.ytopen.bind(this)),this.ytpl=new fc_youtube(this.ws,this.pb,l,a),this.tip=new fc_tip(this.ws,this.ul),this.wndmedia=new fc_wndmedia(this.ws,this.wndctrl),this.lo=new fc_layout(this.ws,this.pb,this.div_maxcont,this.wndmedia,this.tip,this.umopen.bind(this)),this.wndlayout=new fc_wndlayout(this.ws,this.pb,this.wndctrl),this.tb=new fc_toolbox(this.ws,this.pb,this.pmctrl,this.lo,this.cb,this.msglimit,this.config,this.ytopen.bind(this)),this.wndpolicy=new fc_wndpolicy(this.ws,this.pb,this.wndctrl),this.wndconfig=new fc_wndconfig(this.ws,this.pb,this.wndctrl),this.tp=new fc_topic(this.ws,this.pb,this.wndlayout,this.wndpolicy,this.wndconfig,this.togulist.bind(this)),this.um=new fc_menu(this.ws,this.pb,this.lo,this.pmctrl),this.recon=new fc_recon(this.ws,this.msk,this.cb,this.t2src_cb),document.addEventListener("keydown",this.dockeydown.bind(this)),document.addEventListener("mouseup",this.docmouseup.bind(this)),document.addEventListener("mousemove",this.docmousemove.bind(this)),document.addEventListener("touchcancel",this.docmouseup.bind(this)),document.addEventListener("touchend",this.docmouseup.bind(this)),document.addEventListener("touchmove",this.doctouchmove.bind(this),{passive:!1}),window.addEventListener("resize",this.docresize.bind(this)),window.addEventListener("orientationchange",this.docresize.bind(this));var h=this.checkcompat();null!==h&&alert(h),this.createui(),console.log("screen width: "+screen.width+" screen height: "+screen.height),this.showmsk(),this.msk.showcs("Ready to Join","Initialised and waiting for next step.")}fc_cam.prototype.setkmode=function(t){this.kageshi_mode=t,null===this.video||null===this.user||this.you||this.paused||this.kageshi_mode&&(this.pausecam(this.user),this.ws.sendpbuf(1200798,this.pb.roots.default.fc.p_1200798.encode({cn:this.camno},null).finish()))},fc_cam.prototype.click_maxcam=function(t){null===this.maxdummy?this.domax():this.dodemax()},fc_cam.prototype.camc_mouseover=function(t){this.you||null===this.rtcpull||this.rtcpull.statstart()},fc_cam.prototype.camc_mouseout=function(t){this.you||null===this.rtcpull||this.rtcpull.statstop()},fc_cam.prototype.stat_click=function(t){},fc_cam.prototype.stat_mouseover=function(t){var e=document.getElementsByClassName("fc")[0];this.tip.show(t.pageX-e.offsetLeft,t.pageY-e.offsetTop,{buildtype:"camstats",cs_name:this.cs_name,cs_loc:this.cs_loc})},fc_cam.prototype.stat_mouseout=function(t){this.tip.cancel()},fc_cam.prototype.dblclick_video=function(t){this.click_maxcam(t)},fc_cam.prototype.modchg=function(){null!==this.user&&(this.paused?this.namep.className="name paused "+this.user.getnccl():this.namep.className="name "+this.user.getnccl(),this.canstop()?this.stopbtn.style.display="inline-block":this.stopbtn.style.display="none")},fc_cam.prototype.domax=function(){null===this.maxdummy&&(this.maxdummy=document.createElement("div"),this.elem.parentNode.replaceChild(this.maxdummy,this.elem),this.div_maxcont.style.display="block",this.div_maxcont.appendChild(this.elem),this.maxbtn.innerHTML="fullscreen_exit")},fc_cam.prototype.dodemax=function(){if(null!==this.maxdummy){for(this.div_maxcont.style.display="none";this.div_maxcont.firstChild;)this.div_maxcont.removeChild(this.div_maxcont.lastChild);this.maxdummy.parentNode.replaceChild(this.elem,this.maxdummy),this.maxdummy=null,this.maxbtn.innerHTML="fullscreen",window.dispatchEvent(new Event("resize"))}},fc_cam.prototype.click_startcam=function(t){console.log("fc_cam.prototype.click_startcam. clicked startcam "+this.camno),this.ws.isguest||this.wndmedia.open(this,this.ratio)},fc_cam.prototype.click_stopcam=function(t){this.you&&null!==this.local_stream&&(this.local_stream.getTracks().forEach(function(t){t.stop()}),this.local_stream=null),this.ws.sendpbuf(1200631,this.pb.roots.default.fc.p_1200631.encode({cn:this.camno},null).finish())},fc_cam.prototype.click_pausecam=function(t){this.pausecam(this.user),this.ws.sendpbuf(1200798,this.pb.roots.default.fc.p_1200798.encode({cn:this.camno},null).finish())},fc_cam.prototype.click_unpausecam=function(t){this.showcam(this.user,!1)},fc_cam.prototype.input_volrange=function(t){this.you||(t.target.value/100==0?this.video.muted||(this.mutebtn.className="mutebtn muted material-icons",this.video.muted=!0,this.vab.detachstream()):this.video.muted&&(this.mutebtn.className="mutebtn material-icons",this.video.muted=!1,this.vab.attachstream(this.rtcpull.astream)),this.video.volume=t.target.value/100)},fc_cam.prototype.click_mute=function(t){if(console.log("fc_cam.prototype.click_mute. clicked mute button"),this.you){var e=this.local_stream.getAudioTracks();0<e.length&&(e[0].enabled?(this.mutebtn.className="mutebtn muted material-icons",e[0].enabled=!1):(this.mutebtn.className="mutebtn material-icons",e[0].enabled=!0))}else this.video.muted?(this.video.muted=!1,this.mutebtn.className="mutebtn material-icons",this.video.volume=.75,this.volrange.value=75,this.vab.attachstream(this.rtcpull.astream)):(this.video.muted=!0,this.mutebtn.className="mutebtn muted material-icons",this.video.volume=0,this.volrange.value=0,this.vab.detachstream())},fc_cam.prototype.selfdestruct=function(){this.cleanuprtc(),this.ws=null,this.pb=null,this.iser=null,this.wndmedia=null,this.user=null,this.dodemax(),null!==this.startbtn&&(this.startbtn.onclick=null,this.startbtn.parentNode.removeChild(this.startbtn),this.startbtn=null),null!==this.unpausebtn&&(this.unpausebtn.onclick=null,this.unpausebtn.parentNode.removeChild(this.unpausebtn),this.unpausebtn=null),null!==this.mobskin&&(this.mobskin.onclick=null,this.mobskin.parentNode.removeChild(this.mobskin),this.mobskin=null),null!==this.video&&(this.video.parentNode.removeChild(this.video),this.video=null),null!==this.vab&&(this.vab.detachstream(),this.vab.elem.parentNode.removeChild(this.vab.elem),this.vab=null),null!==this.topbar&&(this.topbar.parentNode.removeChild(this.topbar),this.topbar=null),null!==this.statp&&(this.statp.parentNode.removeChild(this.statp),this.statp=null),null!==this.maxbtn&&(this.maxbtn.onclick=null,this.maxbtn.parentNode.removeChild(this.maxbtn),this.maxbtn=null),null!==this.pausebtn&&(this.pausebtn.onclick=null,this.pausebtn.parentNode.removeChild(this.pausebtn),this.pausebtn=null),null!==this.stopbtn&&(this.stopbtn.onclick=null,this.stopbtn.parentNode.removeChild(this.stopbtn),this.stopbtn=null),null!==this.bottombar&&(this.bottombar.parentNode.removeChild(this.bottombar),this.bottombar=null),null!==this.namep&&(this.namep.parentNode.removeChild(this.namep),this.namep=null),null!==this.volrange&&(this.volrange.parentNode.removeChild(this.volrange),this.volrange=null),null!==this.mutebtn&&(this.mutebtn.parentNode.removeChild(this.mutebtn),this.mutebtn=null),null!==this.loading&&(this.loading.hide(),this.loading.parentNode.removeChild(this.loading.elem),this.loading=null),this.elem.parentNode.removeChild(this.elem)},fc_cam.prototype.cleanuprtc=function(){if(null!==this.vab&&this.vab.detachstream(),null!==this.local_stream&&(this.local_stream.getTracks().forEach(function(t){t.stop()}),this.local_stream=null),null!==this.offersonhold&&(this.offersonhold=[],this.offersonhold=null),null!==this.offersonhold_interval&&(clearInterval(this.offersonhold_interval),this.offersonhold_interval=null),null!==this.rtcpush){for(var t=0;t<this.rtcpush.length;t++)this.rtcpush[t].selfdestruct();this.rtcpush=[],this.rtcpush=null}null!==this.rtcpull&&(this.rtcpull.selfdestruct(),this.rtcpull=null)},fc_cam.prototype.setiser=function(t,e,n,s,i){this.cs_name=t,this.cs_loc=e,this.iser={iceServers:[{urls:n,credential:i,username:s}],iceTransportPolicy:"relay",RTCRtcpMuxPolicy:"negotiate"}},fc_cam.prototype.startcam=function(t){try{if(null===t)console.error("fc_cam.prototype.startcam stream is null, not starting cam");else{var e=t.getVideoTracks();if(1!==e.length)return void console.error("fc_cam.prototype.startcam video track count should be 1, got "+e.length);this.local_stream=t,e[0].addEventListener("ended",this.strmend.bind(this)),this.ws.sendpbuf(1200621,this.pb.roots.default.fc.p_1200621.encode({cn:this.camno},null).finish())}}catch(t){console.error("fc_cam.prototype.startcam error: "+t.name+" : "+t.message)}},fc_cam.prototype.strmend=function(t){console.log("fc_cam.prototype.strmend. source video stream has ended, stopping cam"),this.click_stopcam()},fc_cam.prototype.showcam=function(t,e){console.log("fc_cam.prototype.showcam. "+this.camno+" : "+t.username+" : you="+e),this.user=t,this.you=e,this.paused=!1,null!==this.startbtn&&(this.startbtn.style.display="none"),null!==this.unpausebtn&&(this.unpausebtn.style.display="none"),"mobile"===this.ws.mode?(null===this.mobskin?(this.mobskin=document.createElement("div"),this.mobskin.className="mobskin",this.mobskin.onclick=this.menu_cb,this.mobskin.setAttribute("data-username",this.user.username),this.cam_c.appendChild(this.mobskin)):this.mobskin.style.display="block",this.cam_c.className="cam_c"):(this.cam_c.className="cam_c hvcntrl",this.cam_c.onmouseover=this.camc_mouseover.bind(this),this.cam_c.onmouseout=this.camc_mouseout.bind(this),null===this.statp?(this.statp=document.createElement("p"),this.statp.className="stat",this.statp.innerHTML="",this.statp.onclick=this.stat_click.bind(this),this.statp.onmouseover=this.stat_mouseover.bind(this),this.statp.onmouseout=this.stat_mouseout.bind(this),this.cam_c.appendChild(this.statp)):this.statp.style.display="block"),this.video=document.createElement("video"),this.video.id="video"+this.camno,this.video.volume=0,this.video.muted=!0,this.video.ondblclick=this.dblclick_video.bind(this),this.cam_c.appendChild(this.video),null===this.vab?(this.vab=new fc_vab,this.cam_c.appendChild(this.vab.elem)):this.vab.elem.style.display="block",null===this.topbar?(this.topbar=document.createElement("div"),this.topbar.className="topbar",this.cam_c.appendChild(this.topbar)):this.topbar.style.display="block",this.you||(null===this.volrange?(this.volrange=document.createElement("input"),this.volrange.className="volume",this.volrange.type="range",this.volrange.oninput=this.input_volrange.bind(this),this.cam_c.appendChild(this.volrange)):this.volrange.style.display="inline-block",null===this.mutebtn?(this.mutebtn=document.createElement("button"),this.mutebtn.className="mutebtn muted material-icons",this.mutebtn.onclick=this.click_mute.bind(this),this.cam_c.appendChild(this.mutebtn)):this.mutebtn.style.display="inline-block"),null===this.maxbtn?(this.maxbtn=document.createElement("button"),this.maxbtn.className="maxbtn material-icons",this.maxbtn.innerHTML="fullscreen",this.maxbtn.onclick=this.click_maxcam.bind(this),this.cam_c.appendChild(this.maxbtn)):this.maxbtn.style.display="inline-block",null===this.stopbtn&&(this.stopbtn=document.createElement("button"),this.stopbtn.className="stopbtn material-icons",this.stopbtn.innerHTML="stop",this.stopbtn.onclick=this.click_stopcam.bind(this),this.cam_c.appendChild(this.stopbtn)),this.canstop()?this.stopbtn.style.display="inline-block":this.stopbtn.style.display="none",this.you||(null===this.pausebtn?(this.pausebtn=document.createElement("button"),this.pausebtn.className="pausebtn material-icons",this.pausebtn.innerHTML="pause_circle_outline",this.pausebtn.onclick=this.click_pausecam.bind(this),this.cam_c.appendChild(this.pausebtn)):this.pausebtn.style.display="inline-block"),null===this.bottombar?(this.bottombar=document.createElement("div"),this.bottombar.className="bottombar",this.cam_c.appendChild(this.bottombar)):this.bottombar.style.display="block",null===this.namep?(this.namep=document.createElement("p"),this.namep.className="name "+this.user.getnccl(),this.namep.onclick=this.menu_cb,this.cam_c.appendChild(this.namep)):(this.namep.className="name "+this.user.getnccl(),this.namep.style.display="block"),this.namep.setAttribute("data-username",this.user.username),this.namep.style.pointerEvents="auto",this.namep.innerHTML=this.user.username,this.you||(null===this.loading?(this.loading=new fc_camload(this.ws.theme.btnup,this.ws.theme.btnover),this.loading.show(),this.cam_c.appendChild(this.loading.elem)):this.loading.show()),this.you?(this.video.srcObject=this.local_stream,this.vab.attachstream(this.local_stream),this.starttime=Date.now(),this.video.play(),0<this.local_stream.getAudioTracks().length&&(null===this.mutebtn?(this.mutebtn=document.createElement("button"),this.mutebtn.className="mutebtn muted material-icons",this.mutebtn.onclick=this.click_mute.bind(this),this.cam_c.appendChild(this.mutebtn)):this.mutebtn.style.display="inline-block",this.mutebtn.className="mutebtn material-icons")):(null!==this.rtcpull&&(this.rtcpull.selfdestruct(),this.rtcpull=null),this.rtcpull=new fc_rtcpull(this.ws,this.pb,this),this.ws.sendpbuf(1200711,this.pb.roots.default.fc.p_1200711.encode({cn:this.camno,op1:!0,op2:!1,op3:!1},null).finish()),this.volrange.value=100*this.video.volume)},fc_cam.prototype.canstop=function(){return this.you||this.user.modlvl<this.ws.modlvl&&(100===this.ws.modlvl&&this.ws.pol_modstopcam||100<this.ws.modlvl)},fc_cam.prototype.pausecam=function(t){if(console.log("fc_cam.prototype.pausecam. "+this.camno+" : "+t.username),this.user=t,this.paused=!0,this.dodemax(),this.cleanuprtc(),null!==this.mobskin&&(this.mobskin.style.display="none"),null!==this.video&&(this.video.parentNode.removeChild(this.video),this.video=null),null!==this.topbar&&(this.topbar.style.display="none"),null!==this.statp&&(this.statp.style.display="none"),null!==this.maxbtn&&(this.maxbtn.style.display="none"),null!==this.pausebtn&&(this.pausebtn.style.display="none"),null!==this.stopbtn&&(this.stopbtn.style.display="none"),null!==this.bottombar&&(this.bottombar.style.display="none"),null===this.namep?(this.namep=document.createElement("p"),this.namep.className="name paused "+this.user.getnccl(),this.namep.onclick=this.menu_cb,this.cam_c.appendChild(this.namep)):(this.namep.className="name paused "+this.user.getnccl(),this.namep.style.display="block"),this.namep.style.pointerEvents="none",this.namep.innerHTML=t.username,null!==this.vab&&(this.vab.elem.style.display="none",this.vab.detachstream()),null!==this.volrange&&(this.volrange.style.display="none"),null!==this.mutebtn&&(this.mutebtn.style.display="none"),null!==this.loading&&this.loading.hide(),null!==this.startbtn&&(this.startbtn.style.display="none"),null===this.unpausebtn){this.unpausebtn=document.createElement("div"),this.unpausebtn.className="unpause",this.unpausebtn.onclick=this.click_unpausecam.bind(this);var e=document.createElement("span");this.unpausebtn.appendChild(e),this.cam_c.appendChild(this.unpausebtn)}else this.unpausebtn.style.display="grid"},fc_cam.prototype.stopcam=function(){if(console.log("fc_cam.prototype.stopcam. "+this.camno+" : "+(null===this.user?"null":this.user.username)),this.user=null,this.you=!1,this.paused=!1,this.starttime=0,this.dodemax(),this.cleanuprtc(),null!==this.mobskin&&(this.mobskin.style.display="none"),null!==this.video&&(this.video.parentNode.removeChild(this.video),this.video=null),null!==this.topbar&&(this.topbar.style.display="none"),null!==this.statp&&(this.statp.style.display="none"),null!==this.maxbtn&&(this.maxbtn.style.display="none"),null!==this.pausebtn&&(this.pausebtn.style.display="none"),null!==this.stopbtn&&(this.stopbtn.style.display="none"),null!==this.bottombar&&(this.bottombar.style.display="none"),null!==this.namep&&(this.namep.style.display="none"),null!==this.vab&&(this.vab.elem.style.display="none",this.vab.detachstream()),null!==this.volrange&&(this.volrange.style.display="none"),null!==this.mutebtn&&(this.mutebtn.style.display="none"),null!==this.loading&&this.loading.hide(),null!==this.unpausebtn&&(this.unpausebtn.style.display="none"),null===this.startbtn){this.startbtn=document.createElement("div"),this.startbtn.className="camstart",this.startbtn.onclick=this.click_startcam.bind(this);var t=document.createElement("span");this.startbtn.appendChild(t),this.cam_c.appendChild(this.startbtn)}else this.startbtn.style.display="grid"},fc_cam.prototype.havecam=function(t){console.log("fc_cam.prototype.havecam "+this.camno+" : "+this.user.username);var e,n=t.getTracks();for(console.log("fc_cam.prototype.havecam "+n.length+" tracks in stream"),e=0;e<n.length;e++)console.log("fc_cam.prototype.havecam. track "+e+" label: "+n[e].label+" kind: "+n[e].kind);this.video.muted=!0,this.video.srcObject=t,this.local_stream=t,this.starttime=Date.now()},fc_cam.prototype.pshid=function(t){if(null===this.rtcpush)return null;if(0===this.rtcpush.length)return null;for(var e=0;e<this.rtcpush.length;e++)if(this.rtcpush[e].finish)this.rtcpush.splice(e,1),e=0;else if(this.rtcpush[e].tid===t)return this.rtcpush[e];return null},fc_cam.prototype.offerreq=function(t){if(console.log("fc_cam.prototype.offerreq for camno: "+this.camno+" tid: "+t),this.you)if(null!==this.local_stream){null===this.rtcpush&&(this.rtcpush=[]);var e=this.pshid(t);null===e&&(console.log("fc_cam.prototype.offerreq for camno: "+this.camno+". creating new rtcpush for tid: "+t+". cam was started "+(Date.now()-this.starttime)+"ms ago"),e=Date.now()-this.starttime<this.offersonhold_delay?(null===this.offersonhold&&(this.offersonhold=[]),null===this.offersonhold_interval&&(this.offersonhold_interval=setInterval(this.ofonhold.bind(this),this.offersonhold_delay)),new fc_rtcpush(this.ws,this.pb,this.camno,t,this.local_stream,this.offersonhold,this.iser)):new fc_rtcpush(this.ws,this.pb,this.camno,t,this.local_stream,null,this.iser),this.rtcpush.push(e)),e.offerreq()}else console.warn("fc_cam.prototype.offerreq for camno: "+this.camno+". localstream is null. will not create offer")},fc_cam.prototype.ofonhold=function(t){if(console.log("fc_cam.prototype.ofonhold for camno: "+this.camno+" sending "+this.offersonhold.length+" sdp offers in bulk"),0<this.offersonhold.length){var e=this.offersonhold.slice();this.offersonhold=[],this.ws.sendpbuf(1200724,this.pb.roots.default.fc.p_1200724.encode({sdp:e},null).finish())}Date.now()-this.starttime>3*this.offersonhold_delay&&(clearInterval(this.offersonhold_interval),this.offersonhold_interval=null)},fc_cam.prototype.offer=function(t,e){console.log("fc_cam.prototype.offer for camno: "+this.camno+" tid: "+t),null!==this.rtcpull&&this.rtcpull.offer(t,e)},fc_cam.prototype.answer=function(t,e){if(console.log("fc_cam.prototype.answer for camno: "+this.camno+" tid: "+t),this.you){var n=this.pshid(t);null!==n&&n.answer(e)}},fc_cam.prototype.ice=function(t,e){if(console.log("fc_cam.prototype.ice for camno: "+this.camno+" tid: "+t),this.you){var n=this.pshid(t);null!==n?n.ice(e):console.log("fc_cam.prototype.ice for camno: "+this.camno+" no rtc push found with tid: "+t)}else null!==this.rtcpull?this.rtcpull.ice(e):console.log("fc_cam.prototype.ice for camno: "+this.camno+" rtcpull is null, discarding")},fc_cam.prototype.close=function(t){if(console.log("fc_cam.prototype.close for camno: "+this.camno+" tid: "+t),this.you){var e=this.pshid(t);null!==e&&(console.log("fc_cam.prototype.close selfdestruct rtcpush tid: "+t),e.selfdestruct())}else null!==this.rtcpull&&this.rtcpull.tid===t&&(console.log("fc_cam.prototype.close selfdestruct rtcpull tid: "+t),this.rtcpull.selfdestruct(),this.rtcpull=null)},fc_camload.prototype.show=function(){if(null===this.loading){this.loading=document.createElement("div"),this.loading.className="ld1";for(var t=0;t<4;t++){var e=document.createElement("div");e.className="out";var n=document.createElement("div");n.className="in",e.appendChild(n),this.loading.appendChild(e),this.blocks.push(e)}this.elem.appendChild(this.loading)}"block"!==this.elem.style.display&&(this.elem.style.display="block"),0===this.interval&&(this.interval=setInterval(this.tick.bind(this),300))},fc_camload.prototype.tick=function(){var t=this.blocks[this.step];t.style.backgroundColor=this.c1,t.style.opacity=.4,this.step===this.blocks.length-1?this.step=0:this.step++,(t=this.blocks[this.step]).style.backgroundColor=this.c2,t.style.opacity=.8},fc_camload.prototype.hide=function(){"block"===this.elem.style.display&&(this.elem.style.display="none"),0!==this.interval&&(clearInterval(this.interval),this.interval=0)},fc_chatbox.prototype.mkts=function(t){var e;e=0===t?new Date:new Date(t+this.ws.tmdelta);var n=document.createElement("span");return n.className="ts fcts",n.innerText="["+e.toLocaleTimeString()+"] ",n},fc_chatbox.prototype.adddebug=function(t){var e=document.createElement("p");e.className="fcsys",e.innerHTML=t,this.elem.appendChild(e),this.scrolldown()},fc_chatbox.prototype.addyoutube=function(t){var e=!1;this.isscrollpinned()&&(e=!0);var n=document.createElement("p");n.className="",n.appendChild(this.mkts(0));var s=document.createElement("span");s.innerHTML="YouTube now playing "+t,s.className="fcsys yt",s.onclick=this.youtube_cb,n.appendChild(s),this.elem.appendChild(n),e&&this.scrolldown()},fc_chatbox.prototype.addroll=function(t,e,n,s){for(var i="[ROLL] "+t+" rolled "+e+"d"+n+" ",o=0;o<s.length;o++)i+=s[o]+" ";this.addsys(i,t)},fc_chatbox.prototype.addsys=function(t,e){var n=!1;this.isscrollpinned()&&(n=!0);var s=document.createElement("p");s.className="",s.appendChild(this.mkts(0));var i=document.createElement("span");i.innerHTML=t,i.className="sysmsg fcsys","string"==typeof e&&(i.className="sysmsg fcsys menuable",i.setAttribute("data-username",e),i.onclick=this.menu_cb),s.appendChild(i),this.elem.appendChild(s),n&&this.scrolldown()},fc_chatbox.prototype.addme=function(t,e,n,s,i){var o,c=!1;(this.isscrollpinned()||e===this.ws.username)&&(c=!0),o=i?e+"'s "+n:e+" "+n;var r=document.createElement("p");r.className="",r.appendChild(this.mkts(t));var l=document.createElement("span");l.innerHTML=o,l.className="me "+this.ml2nc(s),l.setAttribute("data-username",e),l.onclick=this.menu_cb,r.appendChild(l),this.elem.appendChild(r),c&&this.scrolldown()},fc_chatbox.prototype.addnormal=function(t,e,n,s,i,o,c,r){var l=!1;(this.isscrollpinned()||e===this.ws.username)&&(l=!0);try{if(0<r){if(console.log("fc_chatbox.prototype.addnormal comparing msg number: "+r+" this.lastmn: "+this.lastmn),r<=this.lastmn)return;this.lastmn=r}var a=document.createElement("p");a.className="",a.appendChild(this.mkts(t));var h=document.createElement("span");h.innerHTML=e+": ",h.className="nm "+this.ml2nc(n),h.setAttribute("data-username",e),h.onclick=this.menu_cb,a.appendChild(h),(h=document.createElement("span")).style.color=o,h.className="msg fs_"+c,h.innerHTML=i,a.appendChild(h),this.elem.appendChild(a),l&&this.scrolldown()}catch(t){console.log("fc_chatbox.prototype.addnormal exception: "+t)}},fc_chatbox.prototype.isscrollpinned=function(){return-4<Math.round(this.elem.scrollTop)-(this.elem.scrollHeight-this.elem.clientHeight)},fc_chatbox.prototype.scrolldown=function(){this.elem.scrollTop=this.elem.scrollHeight-this.elem.clientHeight},fc_chatbox.prototype.pad2=function(t){return t<10?"0"+t:t},fc_chatbox.prototype.ml2nc=function(t){switch(t){case 100:return"fcmod";case 150:return"fcsuper";case 200:return"fcowner";case 300:return"fcadmin";case 0:default:return"fcuser"}},fc_chatbox.prototype.history=function(t,e){if(console.log("fc_chatbox.prototype.history: "+t.length+" items, msgcount: "+e),this.lastmn>e&&(console.log("fc_chatbox.prototype.history this.lastmn > msgcount resetting lastmn to "+(e-t.length)),this.lastmn=e-t.length),null===t||0===t.length)console.log("fc_chatbox.prototype.history : no message history!");else{t.sort(function(t,e){return t.ts>e.ts});for(var n=0;n<t.length;n++){var s=t[n];console.log("message modlvl = "+s.ml),this.addnormal(s.ts,s.snm,s.ml,s.nc,s.msg,s.clr,s.sz,s.mn)}}this.scrolldown()},fc_checkbox.prototype.addonclick=function(t){this.cb.addEventListener("click",t),this.elem.addEventListener("click",t)},fc_checkbox.prototype.check=function(t){this.cb.checked=t},fc_checkbox.prototype.getstate=function(){return this.cb.checked},fc_checkbox.prototype.ischecked=function(){return this.cb.checked},fc_checkbox.prototype.checked=function(){return this.cb.checked},fc_config.prototype.load=function(e){if(0!==e.length){console.log("fc_config.prototype.load. json config: "+e);try{var t=JSON.parse(e);t.hasOwnProperty("fc")&&(this.font_colour=t.fc),t.hasOwnProperty("fs")&&(this.font_size=t.fs)}catch(t){console.warn("_ajx.prototype.cb failed to parse: "+e+" ex: "+t.name+" : "+t.message)}}else console.log("fc_config.prototype.load. empty config.")},fc_config.prototype.savefont=function(t,e){this.font_colour===t&&this.font_size===e||(this.font_colour=t,this.font_size=e,this.save())},fc_config.prototype.save=function(){var t=JSON.stringify({fc:this.font_colour,fs:this.font_size});this.ws.sendpbuf(1200331,this.pb.roots.default.fc.p_1200331.encode({cnf:t},null).finish())},fc_ctrlpm.prototype.getpm=function(t){return this.wndpm.hasOwnProperty(t)||(this.wndpm[t]=new fc_wndpm(this.ws,this.pb,this.wndctrl,this.msglimit,this.config,this.umcb,t,this.font_colour,this.font_size)),this.wndpm[t]},fc_ctrlpm.prototype.updatemaxlen=function(){for(var t in this.wndpm)this.wndpm[t].updatemaxlen()},fc_ctrlpm.prototype.updatefc=function(t){for(var e in this.font_colour=t,this.wndpm)this.wndpm[e].updatefc(this.font_colour)},fc_ctrlpm.prototype.updatefs=function(t){for(var e in this.font_size=t,this.wndpm)this.wndpm[e].updatefs(this.font_size)},fc_ctrlpm.prototype.notifytaka=function(t,e){this.wndpm.hasOwnProperty(t)&&this.wndpm[t].rcvtaka(e)},fc_ctrlpm.prototype.notifyjoin=function(t){this.wndpm.hasOwnProperty(t)&&this.wndpm[t].join()},fc_ctrlpm.prototype.notifyleave=function(t){this.wndpm.hasOwnProperty(t)&&this.wndpm[t].leave()},fc_ctrlpm.prototype.notifystatus=function(t,e){this.wndpm.hasOwnProperty(t)&&this.wndpm[t].rcvstatus(e)},fc_ctrlwnd.prototype.addwindow=function(t,e,n,s){var i=this,o=this.wnd_array.length,c=new fc_wnd(this.parent_elem,o,s,t,e,n);return c.elem.addEventListener("mousedown",function(){return console.log("fc_ctrlwnd.prototype.addwindow elem mousedown"),i.stealfocus(o),!0}),c.elem_header.addEventListener("mousedown",function(){return console.log("fc_ctrlwnd.prototype.addwindow elem_header mousedown"),i.draggo(c),!1}),c.elem_header.addEventListener("touchstart",function(t){console.log("fc_ctrlwnd.prototype.addwindow elem_header touchstart");var e=t.targetTouches[0];return i.mouse_x=e.pageX,i.mouse_y=e.pageY,i.draggo(c),!1}),s&&(c.rz_left.onmousedown=function(){return i.resizego(c,!0,!1,!1),!1},c.rz_right.onmousedown=function(){return i.resizego(c,!1,!0,!1),!1},c.rz_bottom.onmousedown=function(){return i.resizego(c,!1,!1,!0),!1},c.rz_bottomleft.onmousedown=function(){return i.resizego(c,!0,!1,!0),!1},c.rz_bottomright.onmousedown=function(){return i.resizego(c,!1,!0,!0),!1}),this.wnd_array.push(c),this.stealfocus(o),c},fc_ctrlwnd.prototype.stealfocus=function(t){this.focus_index===t||(-1<this.focus_index&&this.wnd_array[this.focus_index].unfocus(),this.focus_index=t,this.zindex++,this.wnd_array[t].focus(this.zindex))},fc_ctrlwnd.prototype.draggo=function(t){this.drag_wnd=t,this.drag_elem_x=this.mouse_x-t.elem.offsetLeft,this.drag_elem_y=this.mouse_y-t.elem.offsetTop},fc_ctrlwnd.prototype.resizego=function(t,e,n,s){this.resize_wnd=t,this.drag_elem_x=this.mouse_x-t.elem.offsetLeft,this.drag_elem_y=this.mouse_y-t.elem.offsetTop,this.resize_left=e,this.resize_right=n,this.resize_bottom=s,!this.resize_left||this.resize_bottom||this.resize_right?this.resize_left&&this.resize_bottom&&!this.resize_right?document.getElementsByTagName("body")[0].style.cursor="sw-resize":this.resize_left||!this.resize_bottom||this.resize_right?!this.resize_left&&this.resize_bottom&&this.resize_right?document.getElementsByTagName("body")[0].style.cursor="se-resize":this.resize_left||this.resize_bottom||!this.resize_right||(document.getElementsByTagName("body")[0].style.cursor="e-resize"):document.getElementsByTagName("body")[0].style.cursor="s-resize":document.getElementsByTagName("body")[0].style.cursor="w-resize"},fc_ctrlwnd.prototype.docmousemove=function(t,e){if(this.mouse_x=t,this.mouse_y=e,null!==this.drag_wnd&&(this.drag_wnd.elem.style.left=this.mouse_x-this.drag_elem_x+"px",this.drag_wnd.elem.style.top=this.mouse_y-this.drag_elem_y+"px"),null!==this.resize_wnd){if(this.resize_left){var n=this.resize_wnd.elem.offsetLeft;this.resize_wnd.elem.clientWidth-(this.mouse_x-this.drag_elem_x-n)>this.resize_wnd.min_width&&(console.log("new left: "+(this.mouse_x-this.drag_elem_x)+" new width: "+(this.resize_wnd.elem.clientWidth-(this.resize_wnd.elem.offsetLeft-n))),this.resize_wnd.elem.style.left=this.mouse_x-this.drag_elem_x+"px",this.resize_wnd.elem.style.width=this.resize_wnd.elem.clientWidth-(this.resize_wnd.elem.offsetLeft-n)+"px")}this.resize_right&&(this.resize_wnd.elem.style.width=this.mouse_x-(this.resize_wnd.elem.offsetLeft+this.resize_wnd.elem.parentNode.offsetLeft)+"px"),this.resize_bottom&&(this.resize_wnd.elem.style.height=this.mouse_y-(this.resize_wnd.elem.offsetTop+this.resize_wnd.elem.parentNode.offsetTop)+"px"),this.resize_wnd.wnd_onresize()}},fc_ctrlwnd.prototype.docmouseup=function(){this.drag_wnd=null,this.resize_wnd=null,document.getElementsByTagName("body")[0].style.cursor="default"},fc_layout.prototype.getcam=function(t){for(var e=0;e<this.cams.length;e++)if(this.cams[e].camno===t)return this.cams[e];return null},fc_layout.prototype.gcbu=function(t){for(var e=0;e<this.cams.length;e++)if(this.cams[e].username===t)return this.cams[e];return null},fc_layout.prototype.offerreq=function(t,e){var n,s;for(console.log("fc_layout.prototype.offerreq for camno: "+t+" tid: "+e),n=0;n<this.cams.length;n++)if((s=this.cams[n]).camno===t){s.offerreq(e);break}},fc_layout.prototype.offer=function(t,e,n){var s,i;for(console.log("fc_layout.prototype.offer for camno: "+t+" tid: "+e),s=0;s<this.cams.length;s++)if((i=this.cams[s]).camno===t){i.offer(e,n);break}},fc_layout.prototype.answer=function(t,e,n){console.log("fc_layout.prototype.answer for camno: "+t+" tid: "+e);var s=this.getcam(t);null!==s?s.answer(e,n):console.log("fc_layout.prototype.answer for camno: "+t+" tid: "+e+" failed to get this cam")},fc_layout.prototype.ice=function(t,e,n){console.log("fc_layout.prototype.ice for camno: "+t+" tid: "+e);var s=this.getcam(t);null!==s?s.ice(e,n):console.log("fc_layout.prototype.ice for camno: "+t+" tid: "+e+" failed to get this cam")},fc_layout.prototype.close=function(t,e){console.log("fc_layout.prototype.close for camno: "+t+" tid: "+e);var n=this.getcam(t);null!==n?n.close(e):console.log("fc_layout.prototype.close for camno: "+t+" tid: "+e+" failed to get this cam")},fc_layout.prototype.modchg=function(t){for(var e=0;e<this.cams.length;e++){var n=this.cams[e];null!==n.user&&(t===n.user.username?n.modchg():t===this.ws.username&&n.modchg())}},fc_layout.prototype.showlist=function(t,e){if(console.log("fc_layout.prototype.showlist count: "+t.length),2===this.cur_layout);else{for(var n=[],s=0;s<t.length;s++)n[t[s].cn]=t[s];for(s=0;s<n.length;s++)if(void 0===n[s]){(i=this.cams[s]).stopcam()}else{var i,o=e.gubn(n[s].nm);if(null!==o)console.log("fc_layout.prototype.showlist "+n[s].cn+" : "+n[s].nm+" on "+n[s].cs.fn+" @ "+n[s].cs.lc),(i=this.cams[s]).setiser(n[s].cs.fn,n[s].cs.lc,n[s].cs.ta,n[s].cs.tu,n[s].cs.tp),this.kageshi_mode?i.pausecam(o):i.showcam(o,!1)}}this.joined=!0},fc_layout.prototype.setkmode=function(t){console.log("fc_layout.prototype.setkmode. setting kageshi mode to "+t),this.kageshi_mode=t;for(var e=0;e<this.cams.length;e++)this.cams[e].setkmode(t)},fc_layout.prototype.showcam=function(t,e,n,s){var i,o=!1;try{var c=s.gubn(t);null!==c&&(2===this.cur_layout||(console.log("fc_layout.prototype.showcam "+e+" : "+t+" on "+n.fn+" @ "+n.lc),i=this.cams[e]),this.ws.username===t&&(o=!0),i.setiser(n.fn,n.lc,n.ta,n.tu,n.tp),o?i.showcam(c,o):this.kageshi_mode?i.pausecam(c):i.showcam(c,o))}catch(t){console.error("fc_layout.prototype.showcam attaching the cam exception: "+t)}},fc_layout.prototype.stopcam=function(t){var e,n;try{for(e=0;e<this.cams.length;e++)if((n=this.cams[e]).camno===t){2===this.cur_layout?(console.log("fc_layout.prototype.stopcam dynamic layout. "+n.camno+" : "+n.username),n.stopcam(),n.selfdestruct(),this.cams.splice(e,1)):(console.log("fc_layout.prototype.stopcam fixed layout. "+n.camno+" : "+n.username),n.stopcam());break}}catch(t){console.error("fc_layout.prototype.stopcam exception: "+t)}},fc_layout.prototype.setup=function(t){switch(console.log("fc_layout.prototype.setup change to layout "+t+" from layout "+this.cur_layout),this.wndmedia.click_cancel(),t){case 1:default:case 2:this.set1();break;case 3:this.set3();break;case 4:this.set4();break;case 5:this.set5();break;case 6:this.set6();break;case 7:this.set7();break;case 8:this.set8();break;case 9:this.set9()}this.setkmode(this.kageshi_mode)},fc_layout.prototype.createCam=function(t,e){console.log("fc_layout.prototype.createCam with ratio "+t);var n=new fc_cam(this.ws,this.pb,this.div_maxcont,this.cams.length,t,e,this.wndmedia,this.tip,this.menu_cb);return this.cams.push(n),n},fc_layout.prototype.clearLayout=function(){for(console.log("fc_layout.prototype.clearlayout"),this.cams=[];this.elem.hasChildNodes();)this.elem.removeChild(this.elem.lastChild);this.elem.innerHTML=""},fc_layout.prototype.set1=function(){console.log("fc_layout.prototype.set1. no cams"),this.clearLayout()},fc_layout.prototype.set2=function(){},fc_layout.prototype.dynstart=function(){},fc_layout.prototype.set3=function(){console.log("fc_layout.prototype.set3. 8x 4:3 cams"),this.clearLayout();for(var t=0;t<8;t++){var e=this.createCam("4:3","25%");this.elem.appendChild(e.elem)}this.cur_layout=3},fc_layout.prototype.set4=function(){console.log("fc_layout.prototype.set4. 1 big 4 small 4:3 cams"),this.clearLayout();var t=this.createCam("4:3","50%");this.elem.appendChild(t.elem);var e=document.createElement("div");e.className="camcol_a",e.style.width="50%",this.elem.appendChild(e);var n=document.createElement("div");n.className="camcol_b",n.style.paddingTop="75%",e.appendChild(n);var s=document.createElement("div");s.className="camcol_c",n.appendChild(s);t=this.createCam("4:3","50%");s.appendChild(t.elem);t=this.createCam("4:3","50%");s.appendChild(t.elem);t=this.createCam("4:3","50%");s.appendChild(t.elem);t=this.createCam("4:3","50%");s.appendChild(t.elem),this.cur_layout=4},fc_layout.prototype.set5=function(){console.log("fc_layout.prototype.set5. 2 big 4:3 cams"),this.clearLayout();var t=this.createCam("4:3","50%");this.elem.appendChild(t.elem),t=this.createCam("4:3","50%"),this.elem.appendChild(t.elem),this.cur_layout=5},fc_layout.prototype.set6=function(){console.log("fc_layout.prototype.set6. 12x 16:9 cams"),this.clearLayout();for(var t=0;t<12;t++){var e=this.createCam("16:9","25%");this.elem.appendChild(e.elem)}this.cur_layout=6},fc_layout.prototype.set7=function(){console.log("fc_layout.prototype.set7. 12x 16:9 cams"),this.clearLayout();for(var t=0;t<6;t++){var e=this.createCam("16:9","33.33%");this.elem.appendChild(e.elem)}this.cur_layout=7},fc_layout.prototype.set8=function(){console.log("fc_layout.prototype.set8. 1 big 2 small 16:9 cams"),this.clearLayout();var t=this.createCam("16:9","66.6%");this.elem.appendChild(t.elem);var e=document.createElement("div");e.className="camcol_a",e.style.width="33.3%",this.elem.appendChild(e);var n=document.createElement("div");n.className="camcol_b",e.appendChild(n);var s=document.createElement("div");s.className="camcol_c",n.appendChild(s);t=this.createCam("16:9","100%");s.appendChild(t.elem);t=this.createCam("16:9","100%");s.appendChild(t.elem),this.cur_layout=8},fc_layout.prototype.set9=function(){console.log("fc_layout.prototype.set9. 1 big 21:9 cinemascope cam"),this.clearLayout();var t=this.createCam("21:9","100%");this.elem.appendChild(t.elem),this.cur_layout=9},fc_menu.prototype.mouseleave=function(t){null!==this.leavetimeout&&(clearTimeout(this.leavetimeout),this.leavetimeout=null),this.leavetimeout=setTimeout(this.close.bind(this),1e3)},fc_menu.prototype.mouseenter=function(t){null!==this.leavetimeout&&(clearTimeout(this.leavetimeout),this.leavetimeout=null)},fc_menu.prototype.close=function(){null!==this.leavetimeout&&(clearTimeout(this.leavetimeout),this.leavetimeout=null),null!==this.showtimeout&&(clearTimeout(this.showtimeout),this.showtimeout=null),this.elem.style.display="none"},fc_menu.prototype.open=function(t,e,n,s){console.log("fc_menu.prototype.open "+n.username),this.target=n,this.h_title.innerHTML=this.target.username,this.target.username===this.ws.username?this.buildself():s?this.buildleft():this.ws.isguest?this.buildother_g():this.buildother(),this.elem.style.display="block","mobile"!==this.ws.mode&&(this.elem.style.left=t+"px",this.elem.style.top=e+"px",this.elem.getBoundingClientRect().left+this.elem.clientWidth+10>=window.innerWidth&&(this.elem.style.left=t-this.elem.clientWidth+"px"),this.elem.getBoundingClientRect().top+this.elem.clientHeight+10>=window.innerHeight&&(this.elem.style.top=e-this.elem.clientHeight+"px"),this.showtimeout=setTimeout(this.close.bind(this),2e4))},fc_menu.prototype.buildself=function(){var t=this.lo.gcbu(this.target.username);this.btn_stopcam.style.display="none",this.btn_pausecam.style.display="none",this.btn_mutecam.style.display="none",null!==t&&t.canstop()&&(this.btn_stopcam.style.display="inline-block"),this.btn_pm.style.display="inline-block",this.btn_profile.style.display="inline-block",this.btn_ignore.style.display="none",this.btn_unignore.style.display="none",this.btn_mod.style.display="none",this.btn_unmod.style.display="none",this.btn_kick.style.display="inline-block",this.btn_ban48.style.display="inline-block",this.btn_banperma.style.display="none",this.btn_purge.style.display="none",this.btn_siteban.style.display="none"},fc_menu.prototype.buildleft=function(){this.btn_stopcam.style.display="none",this.btn_pausecam.style.display="none",this.btn_mutecam.style.display="none",this.btn_pm.style.display="none",this.btn_ignore.style.display="none",this.btn_unignore.style.display="none"},fc_menu.prototype.buildother=function(){var t=this.ws.modlvl,e=this.target.modlvl,n=this.ws.isguest,s=this.lo.gcbu(this.target.username);console.log("fc_menu.prototype.buildother modlvl: "+t+" targetmodlvl: "+e+" isguest: "+n),this.btn_stopcam.style.display="none",this.btn_pausecam.style.display="none",this.btn_mutecam.style.display="none",null!==s&&(s.canstop()&&(this.btn_stopcam.style.display="inline-block"),s.paused?this.btn_pausecam.innerText="play cam":this.btn_pausecam.innerText="pause cam",this.btn_pausecam.style.display="inline-block",s.video.muted?this.btn_mutecam.innerText="unmute cam":this.btn_mutecam.innerText="mute cam",this.btn_mutecam.style.display="inline-block"),this.btn_pm.style.display="inline-block",this.btn_profile.style.display="inline-block",this.btn_ignore.style.display="none",this.btn_unignore.style.display="none",this.btn_mod.style.display=150<=t&&e<100?"inline-block":"none",this.btn_unmod.style.display=150<=t&&100===e?"inline-block":"none",100<=t&&e<this.ws.modlvl?this.btn_kick.style.display="inline-block":this.btn_kick.style.display="none",this.btn_banperma.style.display=150<=t&&e<t?this.btn_ban48.style.display="inline-block":this.btn_ban48.style.display="none",this.btn_purge.style.display="none",this.btn_siteban.style.display="none"},fc_menu.prototype.buildother_g=function(){this.ws.modlvl,this.target.modlvl;var t=this.lo.gcbu(this.target.username);console.log("fc_menu.prototype.buildother_g. target: "+this.target.username),this.btn_stopcam.style.display="none",this.btn_pausecam.style.display="none",this.btn_mutecam.style.display="none",null!==t&&(t.you||(t.paused?this.btn_pausecam.innerText="play cam":this.btn_pausecam.innerText="pause cam",this.btn_pausecam.style.display="inline-block"),t.you||(t.video.muted?this.btn_mutecam.innerText="unmute cam":this.btn_mutecam.innerText="mute cam",this.btn_mutecam.style.display="inline-block")),this.btn_pm.style.display="none",this.btn_profile.style.display="inline-block",this.btn_ignore.style.display="none",this.btn_unignore.style.display="none",this.btn_mod.style.display="none",this.btn_unmod.style.display="none",this.btn_kick.style.display="none",this.btn_ban48.style.display="none",this.btn_banperma.style.display="none",this.btn_purge.style.display="none",this.btn_siteban.style.display="none"},fc_menu.prototype.btnclick=function(t){switch(t.target.dataset.btntype){case"stopcam":null!==(e=this.lo.gcbu(this.target.username))&&e.click_stopcam(t);break;case"pausecam":null!==(e=this.lo.gcbu(this.target.username))&&(e.paused?e.click_unpausecam(t):e.click_pausecam(t));break;case"mutecam":var e;null!==(e=this.lo.gcbu(this.target.username))&&e.click_mute(t);break;case"pm":this.pmctrl.getpm(this.target.username).open();break;case"profile":window.open("/profiles/"+this.target.username);break;case"ignore":case"unignore":break;case"mod":this.ws.sendpbuf(1200811,this.pb.roots.default.fc.p_1200811.encode({nm:this.target.username},null).finish());break;case"unmod":this.ws.sendpbuf(1200815,this.pb.roots.default.fc.p_1200815.encode({nm:this.target.username},null).finish());break;case"kick":this.ws.sendpbuf(1200831,this.pb.roots.default.fc.p_1200831.encode({nm:this.target.username},null).finish());break;case"ban48":this.ws.sendpbuf(1200841,this.pb.roots.default.fc.p_1200841.encode({nm:this.target.username,prm:!1},null).finish());break;case"banperma":this.ws.sendpbuf(1200841,this.pb.roots.default.fc.p_1200841.encode({nm:this.target.username,prm:!0},null).finish());break;case"purge":this.ws.sendpbuf(1200851,this.pb.roots.default.fc.p_1200851.encode({nm:this.target.username},null).finish());break;case"siteban":this.ws.sendpbuf(1200881,this.pb.roots.default.fc.p_1200881.encode({nm:this.target.username},null).finish())}this.close()},fc_msglimit.prototype.updateml=function(t){switch(t){case 0:this.max_strikes=4,this.max_msg_length=300;break;case 100:this.max_strikes=6,this.max_msg_length=500;break;case 150:this.max_strikes=8,this.max_msg_length=700;break;case 200:this.max_strikes=10,this.max_msg_length=900;break;case 300:this.max_strikes=12,this.max_msg_length=1200}console.log("fc_msglimit.prototype.updateml maxstr: "+this.max_strikes+" maxlen: "+this.max_msg_length)},fc_msglimit.prototype.cansend=function(t,e){var n=0,s=(new Date).getTime();if(s<this.prev_msg_time+this.msg_interval&&(1<e?n+=e:n++),(t.length>this.max_msg_length||0===t.length)&&(n+=this.max_strikes),0<n?this.cur_strikes+=n:this.cur_strikes=0,this.enforced){if(s<this.prev_msg_time+this.cooloff_time)return this.prev_msg_time=s,!1}else if(this.cur_strikes>=this.max_strikes)return this.prev_msg_time=s,!(this.enforced=!0);return this.msg_count++,this.enforced=!1,this.prev_msg=t,this.prev_msg_time=s,!0},fc_msk.prototype.clear=function(){for(null!==this.interval&&(clearInterval(this.interval),this.interval=null);this.elem.firstChild;)this.elem.removeChild(this.elem.firstChild);this.h1_status=null,this.p_info=null,this.p_countdown=null,this.span_countdown=null,this.text_password=null,this.button=null},fc_msk.prototype.showcs=function(t,e){1!==this.mode&&(this.mode=1,this.clear(),this.h1_status=document.createElement("h1"),this.elem.appendChild(this.h1_status),this.p_info=document.createElement("p"),this.elem.appendChild(this.p_info)),this.h1_status.innerHTML=t,this.p_info.innerHTML=e},fc_msk.prototype.showps=function(){2!==this.mode&&(this.mode=2,this.clear(),this.h1_status=document.createElement("h1"),this.h1_status.innerHTML="Enter Password",this.elem.appendChild(this.h1_status),this.p_info=document.createElement("p"),this.p_info.innerHTML="This room requires a password to join, you will need to get this from the room owner.",this.elem.appendChild(this.p_info),this.text_password=document.createElement("input"),this.text_password.setAttribute("type","password"),this.text_password.maxLength=16,this.text_password.onkeyup=this.pw_keyup.bind(this),this.elem.appendChild(this.text_password),this.button=document.createElement("button"),this.button.innerHTML="Enter",this.button.onclick=this.pw_click.bind(this),this.elem.appendChild(this.button)),this.text_password.value="",this.text_password.focus()},fc_msk.prototype.pw_keyup=function(t){13===t.keyCode&&this.connectpw(this.text_password.value)},fc_msk.prototype.pw_click=function(t){this.connectpw(this.text_password.value)},fc_msk.prototype.connectpw=function(t){0<t.length&&(this.showcs("Connecting"),this.ws.roompass=t,this.ws.start())},fc_msk.prototype.showjo=function(){3!==this.mode&&(this.mode=3,this.clear(),this.h1_status=document.createElement("h1"),this.h1_status.innerHTML="Already in room",this.elem.appendChild(this.h1_status),this.p_info=document.createElement("p"),this.p_info.innerHTML="You are already connected to this room, do you want to disconnect the other session and let this tab take over?",this.elem.appendChild(this.p_info),this.button=document.createElement("button"),this.button.innerHTML="OK ReJoin",this.button.onclick=this.jobtn_click.bind(this),this.elem.appendChild(this.button))},fc_msk.prototype.jobtn_click=function(t){this.showcs("Connecting"),this.ws.joinover=!0,this.ws.start()},fc_msk.prototype.showws=function(t,e){4!==this.mode&&(this.mode=4,this.clear(),this.h1_status=document.createElement("h1"),this.elem.appendChild(this.h1_status),this.p_info=document.createElement("p"),this.elem.appendChild(this.p_info),this.p_countdown=document.createElement("p"),this.elem.appendChild(this.p_countdown)),this.h1_status.innerHTML="Waiting before reconnect",this.p_info.innerHTML=e,this.deadline=Date.now()+(t+200),console.log("deadline set to: "+this.deadline+" time: "+Date.now()),this.interval=setInterval(this.waitcd.bind(this),97)},fc_msk.prototype.waitcd=function(){0<this.deadline-Date.now()?this.p_countdown.innerHTML="Rejoin in "+this.ws.mstohr(this.deadline-Date.now()):(clearInterval(this.interval),this.showcs("Rejoining Room",""),this.ws.start())},fc_msk.prototype.showks=function(t,e,n,s){5!==this.mode&&(this.mode=5,this.clear(),this.h1_status=document.createElement("h1"),this.h1_status.innerHTML="Kicked",this.elem.appendChild(this.h1_status),this.p_info=document.createElement("p"),this.elem.appendChild(this.p_info));var i="You were kicked from the room by <strong>"+t+"</strong> for "+this.ws.stohr(n);i+="<br><span id='kickcountdown'></span>",0<e.length&&(i+="<br><br><i>"+e+"</i>"),this.p_info.innerHTML=i,this.span_countdown=document.getElementById("kickcountdown"),this.deadline=Date.now()+1e3*s+250,this.kickcd(),this.interval=setInterval(this.kickcd.bind(this),100)},fc_msk.prototype.kickcd=function(){0<this.deadline-Date.now()?this.span_countdown.innerHTML="This kick expires in <strong>"+this.ws.mstohr(this.deadline-Date.now())+"</strong>":(clearInterval(this.interval),this.span_countdown.innerHTML="<strong>Kick has expired</strong>",this.button=document.createElement("button"),this.button.innerHTML="Rejoin Room",this.button.onclick=this.kick_click.bind(this),this.elem.appendChild(this.button))},fc_msk.prototype.kick_click=function(t){this.showcs("Rejoining Room",""),this.ws.start()},fc_msk.prototype.showbs=function(t,e,n,s,i){6!==this.mode&&(this.mode=6,this.clear(),this.h1_status=document.createElement("h1"),this.elem.appendChild(this.h1_status),this.p_info=document.createElement("p"),this.elem.appendChild(this.p_info));var o="<strong>"+t+"</strong> is banned from this room<br/>";s||(o+="<span id='bancountdown'>This ban expires in <strong>"+this.ws.stohr(n)+"</strong></span>",this.deadline=Date.now()+1e3*n+1e3,this.interval=setInterval(this.bancd.bind(this),100)),0<i.length&&(o+="</br><br/><i>"+i+"</i>"),this.h1_status.innerHTML="Banned",this.p_info.innerHTML=o,this.span_countdown=document.getElementById("bancountdown")},fc_msk.prototype.bancd=function(){0<this.deadline-Date.now()?this.span_countdown.innerHTML="This ban expires in <strong>"+this.ws.mstohr(this.deadline-Date.now())+"</strong>":(clearInterval(this.interval),this.span_countdown.innerHTML="<strong>Ban expired, please refresh to continue</strong>")},fc_recon.prototype.start=function(t){this.ws.joined?this.ws.t2exp.getTime()<(new Date).getTime()&&!this.waiting_t2&&(console.log("fc_recon.prototype.start: t2 has expired, requesting new token"),this.reqt2()):this.msk.showcs("Rejoin Failed","Failed to rejoin the room, retrying in "+t+"ms"),null!==this.recon_timer&&(console.log("fc_recon.prototype.start: cancelling existing timer to start new"),clearTimeout(this.recon_timer),this.recon_timer=null),console.log("fc_recon.prototype.start starting reconnect timer with countdown "+t),this.recon_timer=setTimeout(this.recontick.bind(this),t)},fc_recon.prototype.reqt2=function(){this.waiting_t2=!0,this.t2src_cb(this.t2cb.bind(this))},fc_recon.prototype.t2cb=function(t,e){if(this.waiting_t2=!1,200===e)t.hasOwnProperty("error")?("token2"===t.error?this.cb.addsys("Your session has become invalidated, did you logout in another tab? Please refresh to continue."):this.cb.addsys("There was an error with your session while reconnecting, please refresh ("+t.error+")"),null!==this.recon_timer&&(clearTimeout(this.recon_timer),this.recon_timer=null)):(this.ws.t2=t.t2,this.ws.t2exp=new Date(t.exp));else{console.log("fc_recon.prototype.t2cb: receving status "+e+" response. extending timer");var n=10*(Math.floor(Math.random()*(this.ws.recon_max-this.ws.recon_min))+this.ws.recon_min);null!==this.recon_timer&&(clearTimeout(this.recon_timer),this.recon_timer=null),this.recon_timer=setTimeout(this.recontick.bind(this),n),this.cb.addsys("Problem requesting new token, we will wait a bit longer before trying again ("+n+")")}},fc_recon.prototype.recontick=function(){if(console.log("fc_recon.prototype.recontick"),this.waiting_t2||this.ws.t2exp.getTime()<(new Date).getTime()){console.log("fc_recon.prototype.recontick: restarting timer as still waiting for t2");var t=Math.floor(Math.random()*(this.ws.recon_max-this.ws.recon_min))+this.ws.recon_min;this.cb.addsys("Waiting for new connection token, please wait ("+t+")"),this.start(t)}else this.ws.joined||this.msk.showcs("Connecting","Retrying connection, please wait."),this.recon_timer=null,this.ws.start()},fc_rtcpull.prototype.selfdestruct=function(){this.finish||(console.log("fc_rtcpull.prototype.selfdestruct. "+this.cam.camno),this.finish=!0,this.ws=null,this.pb=null,this.cam=null,this.vstream=null,this.astream=null,this.icestack=[],null!==this.rtcpeer&&(this.rtcpeer.close(),this.rtcpeer.onicecandidate=null,this.rtcpeer.onicegatheringstatechange=null,this.rtcpeer.oniceconnectionstatechange=null,this.rtcpeer.ontrack=null,this.rtcpeer=null),0!==this.stat_interval&&(clearInterval(this.stat_interval),this.stat_interval=0))},fc_rtcpull.prototype.statstart=function(){this.stat_vis=!0,this.stat_viscount=0},fc_rtcpull.prototype.statstop=function(){this.stat_vis=!1,this.stat_viscount=0},fc_rtcpull.prototype.stattick=function(){if(null===this.rtcpeer)clearInterval(this.stat_interval),this.stat_interval=0;else if("completed"===this.rtcpeer.iceConnectionState||"connected"===this.rtcpeer.iceConnectionState&&(this.stat_vis||!this.stat_vis&&this.stat_viscount<120)){var o=this;this.rtcpeer.getStats(null).then(function(i){i.forEach(function(t){if("inbound-rtp"===t.type&&"audio"===t.mediaType&&0===o.acodec.length&&(t.hasOwnProperty("codecId")?o.acodec=o.getcodec(i,t.codecId):o.acodec="unsupported by browser",console.log(o.tid+" audio codec is: "+o.acodec)),"inbound-rtp"===t.type&&"video"===t.mediaType){var e=0,n=0,s="";0===o.vcodec.length&&(t.hasOwnProperty("codecId")?o.vcodec=o.getcodec(i,t.codecId):o.vcodec="unsupported by browser",console.log(o.tid+" video codec is: "+o.vcodec)),t.hasOwnProperty("framesReceived")?(s=0!==(e=t.framesReceived-o.frame_prev)&&0!==o.frame_prev?e+" fps<br>":"- fps<br>",o.frame_prev=t.framesReceived):t.hasOwnProperty("framerateMean")&&(s=0!==(e=t.framesReceived-o.frame_prev)?Math.round(t.framerateMean)+" fps<br>":"- fps<br>"),t.hasOwnProperty("bytesReceived")&&(0!==(n=(t.bytesReceived-o.byte_prev)/1024)&&0!==o.byte_prev?s+=n.toFixed(2)+" KiB/s":s+="-.-- KiB/s",o.byte_prev=t.bytesReceived),o.cam.statp.innerHTML=s,o.stat_vis||o.stat_viscount++}})})}else this.byte_prev=0,this.frame_prev=0},fc_rtcpull.prototype.getcodec=function(t,e){var n="unknown";return t.forEach(function(t){"codec"===t.type&&t.hasOwnProperty("id")&&t.hasOwnProperty("mimeType")&&t.id===e&&(n=t.hasOwnProperty("channels")?t.mimeType+" "+t.channels+"ch":t.mimeType)}),n},fc_rtcpull.prototype.statresults=function(t){},fc_rtcpull.prototype.offer=function(t,e){if(console.log("fc_rtcpull.prototype.offer. "+this.cam.camno+" tid: "+t),this.failed&&(console.log("fc_rtcpull.prototype.offer in failed state, restarting"),this.d_offer=!1,this.d_ice=!1,this.failed=!1),!this.d_offer){this.d_offer=!0;var n=this;this.tid=t;try{this.rtcpeer=new RTCPeerConnection(this.cam.iser),this.stat_interval=setInterval(this.stattick.bind(this),1e3),this.rtcpeer.onicecandidate=this.onicecandidate.bind(this),this.rtcpeer.onicegatheringstatechange=this.onicegatheringstatechange.bind(this),this.rtcpeer.oniceconnectionstatechange=this.oniceconnectionstatechange.bind(this),this.rtcpeer.ontrack=this.gotremotestream.bind(this);var s=new RTCSessionDescription({type:"offer",sdp:e});if(this.rtcpeer.setRemoteDescription(s).then(function(){n.onsetremotesuccess()},function(){n.onsetremoteerror()}),0<this.icestack.length){console.log("fc_rtcpull.prototype.offer. "+this.cam.camno+" tid: "+t+" unbundling "+this.icestack.length+" stacked ice candidates");for(var i=0;i<this.icestack.length;i++)this.ice(this.icestack[i]);this.icestack=[]}this.rtcpeer.createAnswer({offerToReceiveAudio:1,offerToReceiveVideo:1}).then(function(t){n.oncreateanswersuccess(t)},function(t){n.oncreateanswererror(t)})}catch(t){console.error("fc_rtcpull.prototype.offer exception: "+t.message)}}},fc_rtcpull.prototype.gotremotestream=function(t){if("video"===t.receiver.track.kind)try{console.log(t.receiver.getStats()),console.log("fc_rtcpull.prototype.gotremotestream. GOT VIDEO for "+this.cam.camno+" tid: "+this.tid),this.vstream=t.streams[0],this.cam.video.srcObject=this.vstream,this.cam.video.muted=!0;var e=this.cam.video.play();if("object"==typeof e){var n=this;e.then(function(){console.log("fc_rtcpull.prototype.gotremotestream. play promise completed, stream should be playing")}).catch(function(t){console.log("fc_rtcpull.prototype.gotremotestream. play promise failed, probably have video autoplay blocked in this browser. setting cam to paused state. ex: "+t.name+" : "+t.message),n.cam.click_pausecam()})}}catch(t){console.error("fc_rtcpull.prototype.gotremotestream exception: "+t.message)}else"audio"===t.receiver.track.kind?(console.log("fc_rtcpull.prototype.gotremotestream. GOT AUDIO for "+this.cam.camno+" tid: "+this.tid),0===t.streams.length?console.log("fc_rtcpull.prototype.gotremotestream. no audio streams found. audio disabled cam "+this.cam.camno):this.astream=t.streams[0]):console.warn("fc_rtcpull.prototype.gotremotestream. unknown media type:"+t.receiver.track.kind+" for "+this.cam.camno+" tid: "+this.tid)},fc_rtcpull.prototype.onsetremotesuccess=function(t){console.log("fc_rtcpull.prototype.onsetremotesuccess. "+this.cam.camno+" tid: "+this.tid)},fc_rtcpull.prototype.onsetremoteerror=function(){console.log("fc_rtcpull.prototype.onsetremoteerror for tid "+this.tid)},fc_rtcpull.prototype.oncreateanswersuccess=function(t){console.log("fc_rtcpull.prototype.oncreateanswersuccess for tid "+this.tid+" generated answer sdp");var e=this;this.rtcpeer.setLocalDescription(t).then(function(){e.onsetlocalsuccess(t.sdp)},function(t){e.onsetlocalerror(t)}),this.srd_done=!0},fc_rtcpull.prototype.oncreateanswererror=function(t){console.log("fc_rtcpull.prototype.oncreateanswererror for tid "+this.tid+" error: "+t.toString())},fc_rtcpull.prototype.onsetlocalsuccess=function(t){console.log("fc_rtcpull.prototype.onsetlocalsuccess for tid "+this.tid),this.ws.sendpbuf(1200735,this.pb.roots.default.fc.p_1200735.encode({sdp:{cn:this.cam.camno,ti:this.tid,dsc:t}},null).finish())},fc_rtcpull.prototype.onsetlocalerror=function(t){console.log("fc_rtcpull.prototype.onsetlocalerror for tid "+this.tid+" error: "+t.toString())},fc_rtcpull.prototype.ice=function(t){if(null===this.rtcpeer)console.log("fc_rtcpull.prototype.ice received while rtcpeer still null, stacking: "+t),this.icestack.push(t);else{var e=this,n=new RTCIceCandidate(JSON.parse(t));this.rtcpeer.addIceCandidate(n).then(function(){console.log("fc_rtcpull.prototype.ice for tid "+e.tid+". successfully added candidate: "+t)}).catch(function(t){console.warn("fc_rtcpull.prototype.ice error: Failure during addIceCandidate() : "+t)})}},fc_rtcpull.prototype.onicecandidate=function(t){if(null===t.candidate)console.log("fc_rtcpull.prototype.onicecandidate for tid "+this.tid+" end of candidates. "+this.cndcount+" candidates discovered."),0===this.cndcount&&this.ws.sendpbuf(1200799,this.pb.roots.default.fc.p_1200799.encode({cn:this.cam.camno,ti:this.tid,er:2},null).finish());else{var e=t.candidate.candidate;-1===e.indexOf("typ host")&&-1===e.indexOf("srflx")&&0<e.length&&(console.log("fc_rtcpull.prototype.onicecandidate for tid "+this.tid+" candidate is '"+e+"'"),this.cndcount++,this.ws.sendpbuf(1200747,this.pb.roots.default.fc.p_1200747.encode({cn:this.cam.camno,ti:this.tid,cnd:JSON.stringify(t.candidate)},null).finish()))}},fc_rtcpull.prototype.onicegatheringstatechange=function(t){console.log("fc_rtcpull.prototype.onicegatheringstatechange for tid "+this.tid+" iceGatheringState: "+this.rtcpeer.iceGatheringState)},fc_rtcpull.prototype.oniceconnectionstatechange=function(t){console.log("fc_rtcpull.prototype.oniceconnectionstatechange for tid "+this.tid+" iceConnectionState: "+this.rtcpeer.iceConnectionState),"failed"===this.rtcpeer.iceConnectionState?(this.failed=!0,this.cam.loading.show(),this.ws.sendpbuf(1200799,this.pb.roots.default.fc.p_1200799.encode({cn:this.cam.camno,ti:this.tid,er:4},null).finish())):"disconnected"===this.rtcpeer.iceConnectionState?setTimeout(this.loadshowtimeout.bind(this),3e3):"completed"!==this.rtcpeer.iceConnectionState&&"connected"!==this.rtcpeer.iceConnectionState||this.cam.loading.hide()},fc_rtcpull.prototype.loadshowtimeout=function(){"disconnected"===this.rtcpeer.iceConnectionState&&this.cam.loading.show()},fc_rtcpush.prototype.selfdestruct=function(){this.finish||(this.finish=!0,this.ws=null,this.pb=null,this.local_stream=null,(this.iser=null)!==this.offersonhold&&(this.offersonhold=null),null!==this.rtcpeer&&(this.rtcpeer.close(),this.rtcpeer.onicecandidate=null,this.rtcpeer.oniceconnectionstatechange=null,this.rtcpeer=null))},fc_rtcpush.prototype.offerreq=function(){console.log("fc_rtcpush.prototype.offerreq for tid "+this.tid),this.failed&&(console.log("fc_rtcpush.prototype.offerreq in failed state, restarting"),this.d_offer=!1,this.d_answer=!1,this.d_ice=!1,this.failed=!1);var e=this;this.d_offer||this.d_answer||(this.d_offer=!0,this.rtcpeer=new RTCPeerConnection(this.iser),this.rtcpeer.onicecandidate=this.onicecandidate.bind(this),this.rtcpeer.onicegatheringstatechange=this.onicegatheringstatechange.bind(this),this.rtcpeer.oniceconnectionstatechange=this.oniceconnectionstatechange.bind(this),this.rtcpeer.addStream(this.local_stream),this.rtcpeer.createOffer({offerToReceiveAudio:1,offerToReceiveVideo:1}).then(function(t){e.oncreateoffersuccess(t)},function(t){e.oncreatesessiondescriptionerror(t)}))},fc_rtcpush.prototype.oncreateoffersuccess=function(t){console.log("fc_rtcpush.prototype.oncreateoffersuccess for tid "+this.tid);var e=this;this.rtcpeer.setLocalDescription(t).then(function(){e.onsetlocalsuccess(t.sdp)},function(t){e.oncreatesessiondescriptionerror(t)})},fc_rtcpush.prototype.onsetlocalsuccess=function(t){console.log("fc_rtcpush.prototype.onsetlocalsuccess for tid "+this.tid);var e={cn:this.camno,ti:this.tid,dsc:t};null===this.offersonhold?(console.log("fc_rtcpush.prototype.onsetlocalsuccess offersonhold is null, sending single offer for tid "+this.tid),this.ws.sendpbuf(1200723,this.pb.roots.default.fc.p_1200723.encode({sdp:e},null).finish())):(console.log("fc_rtcpush.prototype.onsetlocalsuccess offersonhold is valid, stacking offer for tid "+this.tid),this.offersonhold.push(e),this.offersonhold=null)},fc_rtcpush.prototype.oncreatesessiondescriptionerror=function(t){console.log("fc_rtcpush.prototype.oncreatesessiondescriptionerror for tid "+this.tid+" error: "+t.toString())},fc_rtcpush.prototype.answer=function(t){if(console.log("fc_rtcpush.prototype.answer for tid "+this.tid),this.d_offer&&!this.d_answer){this.d_answer=!0;var e=this,n=new RTCSessionDescription({type:"answer",sdp:t});this.rtcpeer.setRemoteDescription(n).then(function(){e.onsetremotesuccess()},function(t){e.onsetsessiondescriptionerror(t)})}},fc_rtcpush.prototype.onsetremotesuccess=function(t){console.log("fc_rtcpush.prototype.onsetremotesuccess for tid "+this.tid),this.srd_done=!0},fc_rtcpush.prototype.onsetsessiondescriptionerror=function(t){console.log("fc_rtcpush.prototype.onsetsessiondescriptionerror for tid "+this.tid+" error: "+t.toString())},fc_rtcpush.prototype.ice=function(t){if(console.log("fc_rtcpush.prototype.ice for tid "+this.tid),!this.d_ice){var e=this,n=new RTCIceCandidate(JSON.parse(t));this.rtcpeer.addIceCandidate(n).then(function(){console.log("fc_rtcpush.prototype.ice for tid "+e.tid+". successfully added candidate: "+t)}).catch(function(t){console.log("fc_rtcpush.prototype.ice error: Failure during addIceCandidate() : "+t)})}},fc_rtcpush.prototype.onicecandidate=function(t){null===t.candidate?(console.log("fc_rtcpush.prototype.onicecandidate for tid "+this.tid+" end of candidates. "+this.cndcount+" candidates discovered"),0===this.cndcount&&this.ws.sendpbuf(1200799,this.pb.roots.default.fc.p_1200799.encode({cn:this.camno,ti:this.tid,er:1},null).finish())):-1===t.candidate.candidate.indexOf("typ host")&&-1===t.candidate.candidate.indexOf("srflx")&&0<t.candidate.candidate.length&&(console.log("fc_rtcpush.prototype.onicecandidate for tid "+this.tid+" candidate is "+t.candidate.candidate),this.cndcount++,this.ws.sendpbuf(1200747,this.pb.roots.default.fc.p_1200747.encode({cn:this.camno,ti:this.tid,cnd:JSON.stringify(t.candidate)},null).finish()))},fc_rtcpush.prototype.onicegatheringstatechange=function(t){console.log("fc_rtcpush.prototype.onicegatheringstatechange for tid "+this.tid+" iceGatheringState: "+this.rtcpeer.iceGatheringState)},fc_rtcpush.prototype.oniceconnectionstatechange=function(t){console.log("fc_rtcpush.prototype.oniceconnectionstatechange for tid "+this.tid+" iceconnectionstate: "+this.rtcpeer.iceConnectionState),"failed"===this.rtcpeer.iceConnectionState?this.failed=!0:"disconnected"===this.rtcpeer.iceConnectionState||this.rtcpeer.iceConnectionState},fc_status.prototype.update=function(t,e){t===this.ws.username&&(console.log("fc_status.prototype.update level: "+e.lv),this.statuslevel=e.lv,this.statustime=e.ct,this.statusmsg=e.msg)},fc_status.prototype.act=function(){this.ws.isguest||(this.lastact=Date.now(),3===this.statuslevel&&500<Date.now()-this.lastreturn&&(console.log("fc_status.prototype.tick returning from idle"),this.ws.sendpbuf(1200311,this.pb.roots.default.fc.p_1200311.encode({il:!1,tm:this.tbi},null).finish()),this.lastreturn=Date.now()))},fc_status.prototype.tick=function(){this.ws.isguest||1===this.statuslevel&&Date.now()-this.lastact>this.tbi&&this.ws.sendpbuf(1200311,this.pb.roots.default.fc.p_1200311.encode({il:!0,tm:this.tbi},null).finish())},fc_switch.prototype.create=function(t,e){this.elem=document.createElement("div"),this.elem.className="cbwlbl",this.elem.onclick=this.lblclick.bind(this);var n=document.createElement("label");n.className="switch",this.cb=document.createElement("input"),this.cb.type="checkbox",this.cb.checked=t;var s=document.createElement("span");s.className="slider",n.appendChild(this.cb),n.appendChild(s),this.elem.appendChild(n),this.ptext=document.createElement("p"),this.ptext.innerHTML=e,this.elem.appendChild(this.ptext)},fc_switch.prototype.lblclick=function(t){this.cb.checked=!this.cb.checked},fc_switch.prototype.addonclick=function(t){this.cb.addEventListener("click",t),this.elem.addEventListener("click",t)},fc_switch.prototype.check=function(t){this.cb.checked=t},fc_switch.prototype.getstate=function(){return this.cb.checked},fc_switch.prototype.ischecked=function(){return this.cb.checked},fc_switch.prototype.checked=function(){return this.cb.checked},fc_tip.prototype.show=function(t,e,n){this.config=n,this.reqx=t,this.reqy=e,null!==this.hidetimeout?(clearTimeout(this.hidetimeout),this.hidetimeout=null,this.display()):this.showtimeout=setTimeout(this.display.bind(this),750)},fc_tip.prototype.cancel=function(){null!==this.showtimeout?(clearTimeout(this.showtimeout),this.showtimeout=null):this.hidetimeout=setTimeout(this.undisplay.bind(this),150)},fc_tip.prototype.display=function(){switch(this.showtimeout=null,this.config.buildtype){case"userinfo":this.build_userinfo(this.config.user);break;case"camstats":this.build_camstats(this.config.cs_name,this.config.cs_loc)}this.elem.style.left=this.reqx+"px",this.elem.style.top=this.reqy+"px",this.elem.getBoundingClientRect().left+this.elem.clientWidth+10>=window.innerWidth&&(this.elem.style.left=this.reqx-this.elem.clientWidth+"px"),this.elem.getBoundingClientRect().top+this.elem.clientHeight+10>=window.innerHeight&&(this.elem.style.top=this.reqy-this.elem.clientHeight+"px")},fc_tip.prototype.undisplay=function(){this.hidetimeout=null,this.elem.style.opacity=0},fc_tip.prototype.build_userinfo=function(t){var e=Date.now()+this.ws.tmdelta,n="<b>"+t.username+"</b>";switch(t.modlvl){case 100:n+=" (<span class='"+t.getnccl()+"'>Mod</span>)<br/>";break;case 150:n+=" (<span class='"+t.getnccl()+"'>Super</span>)<br/>";break;case 200:n+=" (<span class='"+t.getnccl()+"'>Owner</span>)<br/>";break;case 300:n+=" (<span class='"+t.getnccl()+"'>Admin</span>)<br/>";break;default:n+="<br/>"}n+="Online for "+this.ws.mstohr(e-t.jointime),2===t.statuslevel?(n+="<br/>AFK for "+this.ws.mstohr(e-t.statustime),0<t.statusmsg.length&&(n+="<br/>"+t.statusmsg)):3===t.statuslevel&&(n+="<br/>Idle for "+this.ws.mstohr(e-t.statustime)),0<t.ping&&(n+="<br/>Ping "+t.ping+"ms"),this.p_message.innerHTML=n,this.elem.style.opacity=1},fc_tip.prototype.build_camstats=function(t,e){var n="<b>"+t+"</b><br>"+e;this.p_message.innerHTML=n,this.elem.style.opacity=1},fc_toolbox.prototype.mkguest=function(){this.text_msg.disabled=!0,this.text_msg.value="You need to login to send messages, guest."},fc_toolbox.prototype.setfont=function(t,e){this.font_colour=t,this.text_cp.jscolor.fromString(t),this.text_msg.style.color=t,this.pmctrl.updatefc(t),this.font_size=e,this.text_msg.className="chatmsg fs_"+this.font_size,this.sel_fs.selectedIndex=e,this.pmctrl.updatefs(e)},fc_toolbox.prototype.refresh=function(){this.text_msg.maxLength=this.msglimit.max_msg_length},fc_toolbox.prototype.cp_change=function(t){console.log("fc_toolbox.prototype.cp_change to "+this.text_cp.value);var e="#"+this.text_cp.value;this.setfont(e,this.font_size)},fc_toolbox.prototype.fs_change=function(t){console.log("fc_toolbox.prototype.fs_change to "+t.target.options[t.target.selectedIndex].value);var e=t.target.options[t.target.selectedIndex].value;this.setfont(this.font_colour,e)},fc_toolbox.prototype.kmode_click=function(t){this.layout.setkmode(this.cb_kmode.ischecked())},fc_toolbox.prototype.yt_click=function(t){this.yt_cb()},fc_toolbox.prototype.msg_keyup=function(t){13===t.keyCode&&this.sendmsg()},fc_toolbox.prototype.send_click=function(t){this.sendmsg()},fc_toolbox.prototype.sendmsg=function(){""!==this.text_msg.value&&this.ws.ready&&(this.ws.isguest?this.text_msg.style.color="#"+Math.floor(16777215*Math.random()).toString(16):this.msglimit.cansend(this.text_msg.value,this.font_size)?!0===this.ws.sendpbuf(1200511,this.pb.roots.default.fc.p_1200511.encode({cm:{msg:this.text_msg.value,clr:this.font_colour,sz:this.font_size}},null).finish())&&(this.text_msg.value="",this.config.savefont(this.font_colour,this.font_size)):this.cb.addsys("Please don't spam the chat!"))},fc_topic.prototype.topicbar_change=function(t){console.log("fc_topic.prototype.topicbar_change to: "+t.target.value),(100<this.ws.modlvl||this.ws.pol_modchangetopic&&100===this.ws.modlvl)&&this.ws.sendpbuf(1200821,this.pb.roots.default.fc.p_1200821.encode({tpc:t.target.value},null).finish())},fc_topic.prototype.set=function(t){this.cur_topic=t,this.text_topic.value=t},fc_topic.prototype.refresh=function(){var t=this.btn_userlist.offsetWidth;this.ws.isguest?this.btn_config.style.display="none":(this.btn_config.style.display="inline-block",t+=this.btn_config.offsetWidth),100<this.ws.modlvl?(this.btn_policy.style.display="inline-block",t+=this.btn_policy.offsetWidth):this.btn_policy.style.display="none",100<this.ws.modlvl||this.ws.pol_modchangelayout&&100===this.ws.modlvl?(this.btn_layout.style.display="inline-block",t+=this.btn_layout.offsetWidth):this.btn_layout.style.display="none",100<this.ws.modlvl||this.ws.pol_modchangetopic&&100===this.ws.modlvl?this.text_topic.readOnly=!1:this.text_topic.readOnly=!0,this.ws.pol_pwenforced?this.btn_policy.innerHTML="lock":this.btn_policy.innerHTML="lock_open",this.text_topic.style.width="calc(100% - "+t+"px)"},fc_topic.prototype.layout_click=function(t){this.wndlayout.open()},fc_topic.prototype.policy_click=function(t){this.wndpolicy.open()},fc_topic.prototype.config_click=function(t){this.wndconfig.open()},fc_ulist.prototype.updgsc=function(t){this.guest_elem.innerHTML="<span class='material-icons'></span>"+t+" Guests"},fc_ulist.prototype.populate=function(t){console.log("fc_ulist.prototype.populate count: "+t.length),this.users=[];for(var e=0;e<t.length;e++)this.adduser(t[e],!1);this.rebuild()},fc_ulist.prototype.resort=function(){console.log("fc_ulist.prototype.resort"),this.users.sort(this.sortcompare.bind(this))},fc_ulist.prototype.sortcompare=function(t,e){return t.modlvl<e.modlvl?1:t.modlvl>e.modlvl?-1:t.username.toLowerCase()<e.username.toLowerCase()?-1:t.username.toLowerCase()>e.username.toLowerCase()?1:0},fc_ulist.prototype.adduser=function(t,e){console.log("fc_ulist.prototype.adduser "+t.nm+" modlvl: "+t.ml+" jointime: "+t.ct+" usernum: "+t.un+" ping: "+t.ping);try{var n=new fc_user(t,this.menu_cb,this.tipshow_cb,this.tipcancel_cb);this.users.push(n),this.usersnum[n.usernum]=n}catch(t){console.log("fc_ulist.prototype.adduser exception: "+t)}e&&this.rebuild()},fc_ulist.prototype.removeuser=function(t){console.log("fc_ulist.prototype.removeuser "+t);for(var e=0;e<this.users.length;e++)try{var n=this.users[e];if(n.username===t){var s=n.usernum;n.remove(),this.users.splice(e,1),this.usersnum[s]=null;break}}catch(t){console.log("fc_ulist.prototype.removeuser exception: "+t)}},fc_ulist.prototype.clearlist=function(){for(;this.elem.hasChildNodes();)this.elem.removeChild(this.elem.lastChild)},fc_ulist.prototype.rebuild=function(){this.resort(),this.clearlist(),this.elem.appendChild(this.guest_elem);for(var t=0;t<this.users.length;t++)try{this.elem.appendChild(this.users[t].list_elem)}catch(t){console.log("fc_ulist.prototype.rebuild exception: "+t)}},fc_ulist.prototype.gubn=function(t){if(null!==t)for(var e=0;e<this.users.length;e++)try{if(this.users[e].username===t)return this.users[e]}catch(t){console.log("fc_ulist.prototype.gubn exception: "+t)}return null},fc_ulist.prototype.moduser=function(t){var e=this.gubn(t);null!==e&&(e.mod(),this.rebuild())},fc_ulist.prototype.unmoduser=function(t){var e=this.gubn(t);null!==e&&(e.unmod(),this.rebuild())},fc_ulist.prototype.setstatus=function(t,e){var n=this.gubn(t);null!==n&&(n.setstatus(e),this.rebuild())},fc_ulist.prototype.pingsync=function(t){for(var e=0,n=t.length;e<n;e++)this.usersnum.hasOwnProperty(t[e].un)&&(this.usersnum[t[e].un].ping=t[e].ping)},fc_user.prototype.getnccl=function(){switch(this.modlvl){case 100:return"fcmod";case 150:return"fcsuper";case 200:return"fcowner";case 300:return"fcadmin";case 0:default:return"fcuser"}},fc_user.prototype.setstatus=function(t){this.statuslevel=t.lv,this.statustime=t.ct,this.statusmsg=t.msg,this.updateelem()},fc_user.prototype.updateelem=function(){switch(this.list_elem.innerHTML="<span class='material-icons'></span><span class='material-icons'></span>"+this.username,this.statuslevel){case 1:this.list_elem.className="user available "+this.getnccl();break;case 2:this.list_elem.className="user afk "+this.getnccl();break;case 3:this.list_elem.className="user idle "+this.getnccl()}},fc_user.prototype.remove=function(){this.list_elem.onclick=null,this.list_elem.onmouseenter=null,this.list_elem.onmouseout=null,this.list_elem.remove(),this.list_elem=null},fc_user.prototype.mod=function(){this.modlvl=100,this.updateelem()},fc_user.prototype.unmod=function(){this.modlvl=0,this.updateelem()},fc_vab.prototype.mkbars=function(){if(null===this.elem.firstChild){var t=document.createElement("div");t.className="top",this.elem.appendChild(t),(t=document.createElement("div")).className="bottom",this.elem.appendChild(t),(t=document.createElement("div")).className="left",this.elem.appendChild(t),(t=document.createElement("div")).className="right",this.elem.appendChild(t)}},fc_vab.prototype.tick=function(){var t=new Uint8Array(this.analyser.frequencyBinCount);this.analyser.getByteFrequencyData(t);for(var e=0,n=0,s=0,i=0;i<4;i++)0<t[i]&&(e+=t[i],n+=255);10<e&&(s=Math.round(e/n*100),s/=100),this.elem.style.opacity=s},fc_vab.prototype.attachstream=function(t){if(null!==t)try{0<t.getAudioTracks().length&&(this.audio_context=new AudioContext,this.analyser=this.audio_context.createAnalyser(),this.source=this.audio_context.createMediaStreamSource(t),this.source.connect(this.analyser),this.analyser.fftSize=64,this.analyser.smoothingTimeConstant=.4,this.interval=setInterval(this.tick.bind(this),100),this.mkbars())}catch(t){console.warn("fc_vab.prototype.attachstream exception: "+t.name+" - "+t.message)}},fc_vab.prototype.detachstream=function(){for(this.elem.opacity=0,clearInterval(this.interval);this.elem.firstChild;)this.elem.removeChild(this.elem.lastChild);null!==this.source&&this.source.disconnect(),this.source=null,this.audio_context=null,this.analyser=null},fc_wnd.prototype.setclosecb=function(t){this.close_callback=t},fc_wnd.prototype.click_close=function(t){null===this.close_callback?this.hide():this.close_callback()},fc_wnd.prototype.hide=function(){this.elem.style.display="none",this.visible=!1},fc_wnd.prototype.center=function(){var t=this.elem.parentNode.clientWidth/2-this.elem.clientWidth/2,e=this.elem.parentNode.clientHeight/2-this.elem.clientHeight/2;this.elem.style.left=t.toString()+"px",this.elem.style.top=e.toString()+"px"},fc_wnd.prototype.move_random=function(){var t=Math.floor(Math.random()*(this.elem.parentNode.clientWidth-this.elem.clientWidth)),e=Math.floor(Math.random()*(this.elem.parentNode.clientHeight-this.elem.clientHeight));this.elem.style.left=t.toString()+"px",this.elem.style.top=e.toString()+"px"},fc_wnd.prototype.show=function(){this.elem.style.display="block",this.visible=!0},fc_wnd.prototype.getContentElem=function(){return this.elem_content},fc_wnd.prototype.settitle=function(t){this.title=t,this.elem_headerp.innerHTML=t},fc_wnd.prototype.setminsize=function(t,e){this.min_width=t,this.min_height=e,this.elem.clientWidth<t&&(this.elem.style.width=t+"px"),this.elem.clientHeight<e&&(this.elem.style.height=e+"px"),this.elem.style.minWidth=t+"px",this.elem.style.minHeight=e+"px"},fc_wnd.prototype.setresizecallback=function(t){this.resize_callback=t},fc_wnd.prototype.wnd_onresize=function(){null!==this.resize_callback&&this.resize_callback(this.elem.clientWidth,this.elem.clientHeight)},fc_wnd.prototype.addresizers=function(){this.resizable=!0,this.rz_left=document.createElement("div"),this.rz_left.setAttribute("class","rz_left"),this.elem.appendChild(this.rz_left),this.rz_right=document.createElement("div"),this.rz_right.setAttribute("class","rz_right"),this.elem.appendChild(this.rz_right),this.rz_bottom=document.createElement("div"),this.rz_bottom.setAttribute("class","rz_bottom"),this.elem.appendChild(this.rz_bottom),this.rz_bottomleft=document.createElement("div"),this.rz_bottomleft.setAttribute("class","rz_bottomleft"),this.elem.appendChild(this.rz_bottomleft),this.rz_bottomright=document.createElement("div"),this.rz_bottomright.setAttribute("class","rz_bottomright"),this.elem.appendChild(this.rz_bottomright)},fc_wnd.prototype.hideclosebtn=function(t){this.elem_closebtn.style.display=t?"none":"inline-block"},fc_wnd.prototype.move=function(t,e){this.elem.style.left=t+"px",this.elem.style.top=e+"px"},fc_wnd.prototype.focus=function(t){this.elem.style.zIndex=t},fc_wnd.prototype.unfocus=function(t){this.elem.setAttribute("class","fcwnd")},fc_wndconfig.prototype.createui=function(){this.wnd=this.wndman.addwindow("Settings",600,400,!1),this.wnd.hideclosebtn(!1);var t,e,n=this.wnd.getContentElem();(t=document.createElement("div")).className="wndconfig",this.sw_blockpm=new fc_switch,this.sw_blockpm.create(!1,"Block incoming PM's"),t.appendChild(this.sw_blockpm.elem),(e=document.createElement("button")).setAttribute("id","confcancel"),e.onclick=this.close.bind(this),e.innerHTML="Cancel",t.appendChild(e),(e=document.createElement("button")).setAttribute("id","confsave"),e.onclick=this.apply_click.bind(this),e.innerHTML="Apply",t.appendChild(e),n.appendChild(t)},fc_wndconfig.prototype.open=function(){null===this.wnd&&this.createui(),this.wnd.show(),this.wnd.center()},fc_wndconfig.prototype.close=function(){null!==this.wnd&&this.wnd.hide()},fc_wndconfig.prototype.apply_click=function(t){},fc_wndlayout.prototype.createui=function(){this.wnd=this.wndman.addwindow("Choose the new webcam layout",600,400,!1),this.wnd.hideclosebtn(!1);var t,e,n,s,i=this.wnd.getContentElem();(s=document.createElement("div")).setAttribute("class","wndlayout");var o=document.createElement("ul");s.appendChild(o);var c=document.createElement("li");o.appendChild(c),(t=document.createElement("button")).setAttribute("class","lyo1"),t.setAttribute("data-layoutnumber",1),t.onclick=this.click_layoutbtn.bind(this),c.appendChild(t),(t=document.createElement("button")).setAttribute("data-layoutnumber",3),t.onclick=this.click_layoutbtn.bind(this),(e=document.createElement("div")).setAttribute("class","lyo3"),n=document.createElement("span"),e.appendChild(n),t.appendChild(e),c.appendChild(t),(t=document.createElement("button")).setAttribute("data-layoutnumber",4),t.onclick=this.click_layoutbtn.bind(this),(e=document.createElement("div")).setAttribute("class","lyo4"),n=document.createElement("span"),e.appendChild(n),t.appendChild(e),c.appendChild(t),(t=document.createElement("button")).setAttribute("data-layoutnumber",5),t.onclick=this.click_layoutbtn.bind(this),(e=document.createElement("div")).setAttribute("class","lyo5"),n=document.createElement("span"),e.appendChild(n),t.appendChild(e),c.appendChild(t),c=document.createElement("li"),o.appendChild(c),(t=document.createElement("button")).setAttribute("data-layoutnumber",6),t.onclick=this.click_layoutbtn.bind(this),(e=document.createElement("div")).setAttribute("class","lyo6"),n=document.createElement("span"),e.appendChild(n),t.appendChild(e),c.appendChild(t),(t=document.createElement("button")).setAttribute("data-layoutnumber",7),t.onclick=this.click_layoutbtn.bind(this),(e=document.createElement("div")).setAttribute("class","lyo7"),n=document.createElement("span"),e.appendChild(n),t.appendChild(e),c.appendChild(t),(t=document.createElement("button")).setAttribute("data-layoutnumber",8),t.onclick=this.click_layoutbtn.bind(this),(e=document.createElement("div")).setAttribute("class","lyo8"),n=document.createElement("span"),e.appendChild(n),t.appendChild(e),c.appendChild(t),(t=document.createElement("button")).setAttribute("data-layoutnumber",9),t.onclick=this.click_layoutbtn.bind(this),(e=document.createElement("div")).setAttribute("class","lyo9"),n=document.createElement("span"),e.appendChild(n),t.appendChild(e),c.appendChild(t),i.appendChild(s)},fc_wndlayout.prototype.permcheck=function(){return 100===this.ws.modlvl&&this.ws.pol_modchangelayout||100<this.ws.modlvl},fc_wndlayout.prototype.click_layoutbtn=function(t){if(this.permcheck()){var e=t.target.dataset.layoutnumber;void 0!==e&&(console.log("fc_wndlayout.prototype.click_layoutbtn. layout: "+e),this.ws.sendpbuf(1200611,this.pb.roots.default.fc.p_1200611.encode({lo:e},null).finish()))}this.wnd.hide()},fc_wndlayout.prototype.open=function(){this.permcheck()&&(null===this.wnd&&this.createui(),this.wnd.show(),this.wnd.center())},fc_wndlayout.prototype.close=function(){null!==this.wnd&&this.wnd.hide()},fc_wndmedia.prototype.createui=function(){this.wnd=this.wndman.addwindow("Select Webcam",600,400,!1),this.wnd.hideclosebtn(!1),this.wnd.setclosecb(this.click_cancel.bind(this));var t=this.wnd.getContentElem(),e=document.createElement("div");e.className="wndmedia",this.cam_a=document.createElement("div"),this.cam_a.className="cam_a",this.cam_b=document.createElement("div"),this.cam_b.className="cam_b",this.cam_a.appendChild(this.cam_b),this.cam_c=document.createElement("div"),this.cam_c.className="cam_c",this.cam_a.appendChild(this.cam_c),this.video=document.createElement("video"),this.video.autoplay=!0,this.video.muted=!0,this.cam_c.appendChild(this.video),this.vab=new fc_vab,this.cam_c.appendChild(this.vab.elem),this.p_video=document.createElement("p"),this.p_video.innerText="No Webcam Detected",this.cam_c.appendChild(this.p_video),e.appendChild(this.cam_a),this.cam_select=document.createElement("select"),this.cam_select.onchange=this.change_camsel.bind(this),e.appendChild(this.cam_select),this.sw_usemic=new fc_switch,this.sw_usemic.create(!0,"Enable Microphone"),this.sw_usemic.addonclick(this.click_usemic.bind(this)),e.appendChild(this.sw_usemic.elem),this.sw_useec=new fc_switch,this.sw_useec.create(!0,"Echo Cancelling (use this for talky talky)"),this.sw_useec.addonclick(this.click_usemic.bind(this)),e.appendChild(this.sw_useec.elem),this.mic_select=document.createElement("select"),this.mic_select.onchange=this.change_micsel.bind(this),e.appendChild(this.mic_select);var n=document.createElement("div");n.className="btns",this.btn_cancel=document.createElement("button"),this.btn_cancel.onclick=this.click_cancel.bind(this),this.btn_cancel.innerHTML="Cancel",n.appendChild(this.btn_cancel),this.btn_start=document.createElement("button"),this.btn_start.onclick=this.click_start.bind(this),this.btn_start.innerHTML="Start Cam",n.appendChild(this.btn_start),e.appendChild(n),t.appendChild(e)},fc_wndmedia.prototype.setratio=function(t){"16:9"===t?this.cam_b.style.paddingTop="56.25%":"4:3"===t?this.cam_b.style.paddingTop="75%":"21:9"===t&&(this.cam_b.style.paddingTop="42.18%")},fc_wndmedia.prototype.enumerate=function(){var e,s=this,i=!1;this.btn_start.disabled=!0,this.video.srcObject=null,this.vab.detachstream(),null!==this.stream&&(this.stream.getTracks().forEach(function(t){t.stop()}),this.stream=null),navigator.mediaDevices.enumerateDevices().then(function(t){var e={gotcam:!(s.p_video.innerText="Enumerating Devices"),gotmic:!1};return t.forEach(function(t){"audioinput"===t.kind&&(e.gotmic=!0),"videoinput"===t.kind&&(e.gotcam=!0),console.log("fc_wndmedia.prototype.enumerate device: "+t.kind+": "+t.label+" id:"+t.deviceId)}),e}).catch(function(t){console.error("fc_wndmedia.prototype.enumerate enumerateDevices() error: "+t.name+" : "+t.message)}).then(function(t){t.gotcam?(console.log("fc_wndmedia.prototype.enumerate got cam device: "+s.forced_camid),s.p_video.innerText="Accessing Webcam"):(console.log("fc_wndmedia.prototype.enumerate no cam detected"),s.p_video.innerText="No Webcam Detected"),s.sw_usemic.ischecked()?t.gotmic?console.log("fc_wndmedia.prototype.enumerate got mic device: "+s.forced_micid):console.log("fc_wndmedia.prototype.enumerate no mic detected"):console.log("fc_wndmedia.prototype.enumerate microphone disabled"),t.gotcam||"screen"===s.forced_camid?(console.log("fc_wndmedia.prototype.enumerate cam constraints. width: "+s.cam.outvid_w+" height: "+s.cam.outvid_h+" ratio: "+s.cam.outvid_ar+" frames: "+s.cam.outvid_fps),e={deviceId:s.forced_camid,width:s.cam.outvid_w,height:s.cam.outvid_h,aspectRatio:s.cam.outvid_ar,frameRate:s.cam.outvid_fps},t.gotmic&&s.sw_usemic.ischecked()&&(i=s.sw_useec.ischecked()?{deviceId:s.forced_micid,autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0}:{deviceId:s.forced_micid,autoGainControl:!0,echoCancellation:!1,noiseSuppression:!1}),"screen"===s.forced_camid?navigator.mediaDevices.getDisplayMedia({video:e}).then(function(n){t.gotmic&&s.sw_usemic.ischecked()?navigator.mediaDevices.getUserMedia({audio:i}).then(function(t){if(null!==t){var e=t.getAudioTracks();0<e.length&&n.addTrack(e[0])}s.gotstream(n),s.refresh_sel()}).catch(function(t){console.warn("fc_wndmedia.prototype.enumerate. getUserMedia() error: "+t.name+" : "+t.message),s.gumerror(t.name),s.refresh_sel()}):(s.gotstream(n),s.refresh_sel())}).catch(function(t){console.warn("fc_wndmedia.prototype.enumerate. getUserMedia() error: "+t.name+" : "+t.message),s.gumerror(t.name),s.refresh_sel()}):navigator.mediaDevices.getUserMedia({audio:i,video:e}).then(function(t){s.gotstream(t),s.refresh_sel()}).catch(function(t){console.warn("fc_wndmedia.prototype.enumerate. getUserMedia() error: "+t.name+" : "+t.message),"TypeError"!==t.name&&s.gumerror(t.name),s.refresh_sel()})):(console.log("fc_wndmedia.prototype.enumerate. cannot get video media, need to select either webcam or screenshare"),s.refresh_sel())})},fc_wndmedia.prototype.gotstream=function(t){console.log("fc_wndmedia.prototype.gotstream attaching preview");var e,n=!1,s=!1,i=t.getTracks();for(e=0;e<i.length;e++)"audio"===i[e].kind&&(s=!0),"video"===i[e].kind&&(n=!0);n&&(this.p_video.innerText="PREVIEW",this.video.srcObject=t),s&&this.vab.attachstream(t),this.stream=t,this.btn_start.disabled=!1},fc_wndmedia.prototype.gumerror=function(t){switch(console.log("fc_wndmedia.prototype.gumerror: "+t),t){case"SecurityError":case"NotAllowedError":case"PermissionDeniedError":case"PermissionDismissedError":this.p_video.innerText="Permission required";break;case"NotReadableError":case"TrackStartError":this.p_video.innerText="Webcam already in use?";break;case"OverconstrainedError":case"ConstraintNotSatisfiedError":this.p_video.innerText="Error: Webcam not supported";break;case"TypeError":this.p_video.innerText="TypeError (?)";break;case"AbortError":this.p_video.innerText="Aborted, webcam in use?";break;default:this.p_video.innerText="Unknown error: "+t}},fc_wndmedia.prototype.click_start=function(t){this.cam.startcam(this.stream),this.close()},fc_wndmedia.prototype.click_cancel=function(t){null!==this.video&&(this.video.srcObject=null),null!==this.stream&&(this.stream.getTracks().forEach(function(t){t.stop()}),this.stream=null),this.close()},fc_wndmedia.prototype.refresh_sel=function(){var n,s=this,i=null,o=null;null!==this.stream&&this.stream.getTracks().forEach(function(t){switch(t.kind){case"video":i=t,console.log("fc_wndmedia.prototype.refresh_sel selected cam: "+t.label);break;case"audio":o=t,console.log("fc_wndmedia.prototype.refresh_sel selected mic: "+t.label);break;default:console.log("fc_wndmedia.prototype.refresh_sel selected '"+t.kind+"' device: "+t.label)}}),s.sw_usemic.ischecked()||((n=document.createElement("option")).innerHTML="Microphone is disabled",n.selected=!0,this.mic_select.appendChild(n)),navigator.mediaDevices.enumerateDevices().then(function(t){for(var e=s.cam_select.options.length-1;0<=e;e--)s.cam_select.remove(e);for(e=s.mic_select.options.length-1;0<=e;e--)s.mic_select.remove(e);t.forEach(function(t){"videoinput"===t.kind?(console.log("fc_wndmedia.prototype.refresh_sel videoinput: "+t.label+" id: "+t.deviceId),(n=document.createElement("option")).innerHTML=0<t.label.length?t.label:"unknown videoinput (permission granted?)",n.value=t.deviceId,null!==i&&(i.getSettings().hasOwnProperty("deviceId")?n.selected=i.getSettings().deviceId===t.deviceId:n.selected=i.label===t.label),s.cam_select.appendChild(n)):"audioinput"===t.kind&&s.sw_usemic.ischecked()&&(console.log("fc_wndmedia.prototype.refresh_sel audioinput: "+t.label+" id: "+t.deviceId),(n=document.createElement("option")).innerHTML=0<t.label.length?t.label:"unknown audioinput (permission granted?)",n.value=t.deviceId,null!==o&&(o.getSettings().hasOwnProperty("deviceId")?n.selected=o.getSettings().deviceId===t.deviceId:n.selected=o.label===t.label),s.mic_select.appendChild(n))}),0===s.cam_select.options.length&&((n=document.createElement("option")).innerHTML="No Camera's detected",n.selected=!0,s.cam_select.appendChild(n)),0===s.mic_select.options.length&&((n=document.createElement("option")).innerHTML="No Microphones detected",n.selected=!0,s.mic_select.appendChild(n)),navigator.mediaDevices&&"getDisplayMedia"in navigator.mediaDevices?((n=document.createElement("option")).innerHTML="Use your browsers built in Screensharing feature",(n.value="screen")===s.forced_camid&&(n.selected=!0),s.cam_select.appendChild(n)):console.log("fc_wndmedia.prototype.refresh_sel displaymedia screen sharing does not appear to be supported")}).catch(function(t){console.error("fc_wndmedia.prototype.refresh_sel enumerateDevices() error: "+t.name+" : "+t.message)})},fc_wndmedia.prototype.change_camsel=function(t){console.log("cam change"),this.forced_camid=t.target.value,this.enumerate()},fc_wndmedia.prototype.change_micsel=function(t){console.log("mic change to device "+t.target.value),this.forced_micid=t.target.value,this.enumerate()},fc_wndmedia.prototype.click_usemic=function(t){this.sw_usemic.ischecked()?(this.sw_useec.elem.style.display="block",this.mic_select.style.display="block"):(this.sw_useec.elem.style.display="none",this.mic_select.style.display="none"),this.enumerate()},fc_wndmedia.prototype.open=function(t,e){this.cam=t,null===this.wnd&&this.createui(),this.setratio(e),this.wnd.visible||(this.wnd.show(),this.wnd.center(),this.enumerate())},fc_wndmedia.prototype.close=function(){null!==this.wnd&&this.wnd.hide()},fc_wndpm.prototype.createui=function(){this.wnd=this.wndman.addwindow(this.username,0,0,!0),this.wnd.setminsize(320,260),this.wnd.setresizecallback(this.resize_callback.bind(this));var t=this.wnd.getContentElem(),e=document.createElement("div");e.className="wndpm";var n=document.createElement("div");n.className="pmgridbox_top",this.chatbox=new fc_chatbox(this.ws,this.umcb,null),n.appendChild(this.chatbox.elem),e.appendChild(n);var s=document.createElement("div");s.className="pmgridbox_bottom",this.p_status=document.createElement("p"),this.p_status.innerHTML="",s.appendChild(this.p_status),this.text_msg=document.createElement("textarea"),this.text_msg.onkeydown=this.msg_keydown.bind(this),this.text_msg.style.color=this.font_colour,this.text_msg.className="fs_"+this.font_size,this.text_msg.value="message ",s.appendChild(this.text_msg),this.btn_send=document.createElement("button"),this.btn_send.className="material-icons",this.btn_send.onclick=this.send_click.bind(this),s.appendChild(this.btn_send),e.appendChild(s),t.appendChild(e),this.updatemaxlen(),this.resize_callback(this.wnd.elem.clientWidth,this.wnd.elem.clientHeight)},fc_wndpm.prototype.resize_callback=function(t,e){this.chatbox.elem.style.height=e-150+"px"},fc_wndpm.prototype.type_timeout_tick=function(){console.log("fc_wndpm.prototype.type_timeout_tick "+this.type_state+" typed "+(Date.now()-this.type_time)+"ms ago"),Date.now()-this.type_time<2e3?(this.type_state=1,console.log("fc_wndpm.prototype.type_timeout_tick restarting timer"),this.type_timeout=setTimeout(this.type_timeout_tick.bind(this),4e3)):(""===this.text_msg.value?this.type_state=0:this.type_state=2,this.type_timeout=null),this.sendtaka()},fc_wndpm.prototype.msg_keydown=function(t){return 13!==t.keyCode||t.shiftKey?(this.type_state=1,this.type_time=Date.now(),null===this.type_timeout&&(console.log("fc_wndpm.prototype.msg_keydown restarting timer"),this.type_timeout=setTimeout(this.type_timeout_tick.bind(this),4e3),this.sendtaka()),!0):(this.online&&this.sendmsg(),!1)},fc_wndpm.prototype.send_click=function(t){this.online&&this.sendmsg()},fc_wndpm.prototype.sendmsg=function(){this.type_state=0,this.type_time=0,null!==this.type_timeout&&(clearTimeout(this.type_timeout),this.type_timeout=null),""!==this.text_msg.value&&this.ws.ready&&(this.msglimit.cansend(this.text_msg.value,this.font_size)?(console.log("fc_wndpm.prototype.send "+this.text_msg.value),!0===this.ws.sendpbuf(1200541,this.pb.roots.default.fc.p_1200541.encode({cm:{rnm:this.username,msg:this.text_msg.value,clr:this.font_colour,sz:this.font_size}},null).finish())&&(this.text_msg.value="",this.config.savefont(this.font_colour,this.font_size))):this.chatbox.addsys("Please do not spam!"))},fc_wndpm.prototype.sendtaka=function(){console.log("fc_wndpm.prototype.sendtaka "+this.type_state+" to "+this.username),this.online&&this.ws.sendpbuf(1200551,this.pb.roots.default.fc.p_1200551.encode({st:this.type_state,nm:this.username},null).finish())},fc_wndpm.prototype.updatemaxlen=function(){this.text_msg.maxLength=this.msglimit.max_msg_length},fc_wndpm.prototype.updatefc=function(t){this.font_colour=t,this.text_msg.style.color=this.font_colour},fc_wndpm.prototype.updatefs=function(t){this.font_size=t,this.text_msg.className="fs_"+this.font_size},fc_wndpm.prototype.receive=function(t,e,n,s,i,o,c){this.chatbox.addnormal(t,e,n,s,i,o,c),this.rcvtaka(0)},fc_wndpm.prototype.receiveme=function(t,e,n,s,i){this.chatbox.addme(t,e,n,s,i),this.rcvtaka(0)},fc_wndpm.prototype.receiveroll=function(t,e,n,s){this.chatbox.addroll(t,e,n,s),this.rcvtaka(0)},fc_wndpm.prototype.rcvtaka=function(t){switch(t){case 0:this.wnd.settitle(this.username),this.p_status.innerHTML="",this.p_status.className="";break;case 1:this.wnd.settitle(this.username+" is typing"),this.p_status.innerHTML="taka taka taka",this.p_status.className="typing";break;case 2:this.wnd.settitle(this.username+" has entered text"),this.p_status.innerHTML="has entered text...",this.p_status.className="enteredtext"}},fc_wndpm.prototype.rcvstatus=function(t){switch(t.st.lv){case 1:this.chatbox.addsys(this.username+" has returned");break;case 2:t.sn||this.chatbox.addsys(this.username+" has gone AFK"+(0===t.st.msg.length?"":" ("+t.st.msg+")"));break;case 3:this.chatbox.addsys(this.username+" has gone idle")}},fc_wndpm.prototype.join=function(){this.wnd.settitle(this.username),this.chatbox.addsys(this.username+" has entered the room"),this.p_status.innerHTML="",this.online=!0},fc_wndpm.prototype.leave=function(){this.wnd.settitle(this.username+" (OFFLINE)"),this.chatbox.addsys(this.username+" has left the room"),this.p_status.innerHTML=this.username+" has left the room",this.online=!1},fc_wndpm.prototype.info=function(t){this.chatbox.addsys("[INFO]: "+t)},fc_wndpm.prototype.open=function(){null===this.wnd&&this.createui(),this.wnd.visible||(this.wnd.show(),this.wnd.move_random())},fc_wndpm.prototype.close=function(){null!==this.wnd&&this.wnd.hide()},fc_wndpolicy.prototype.createui=function(){this.wnd=this.wndman.addwindow("Room Policy",600,400,!1),this.wnd.hideclosebtn(!1);var t,e,n=this.wnd.getContentElem();(t=document.createElement("div")).className="wndpolicy",this.sw_password=new fc_switch,this.sw_password.create(this.ws.pol_pwenforced,"Password required to enter"),this.sw_password.addonclick(this.cbpassclick.bind(this)),t.appendChild(this.sw_password.elem),this.text_password=document.createElement("input"),this.text_password.setAttribute("type","text"),this.text_password.setAttribute("id","pwdedit"),this.text_password.setAttribute("autocomplete","off"),this.text_password.maxLength=16,this.text_password.autocomplete="off",t.appendChild(this.text_password),this.sw_modchangelayout=new fc_switch,this.sw_modchangelayout.create(this.ws.pol_modchangelayout,"Mods can change layout"),t.appendChild(this.sw_modchangelayout.elem),this.sw_modchangetopic=new fc_switch,this.sw_modchangetopic.create(this.ws.pol_modchangetopic,"Mods can change topic"),t.appendChild(this.sw_modchangetopic.elem),this.sw_modstopcam=new fc_switch,this.sw_modstopcam.create(this.ws.pol_modstopcam,"Mods can stop cams"),t.appendChild(this.sw_modstopcam.elem),this.sw_allowguest=new fc_switch,this.sw_allowguest.create(this.ws.pol_allowguest,"Allow guests to join"),this.sw_allowguest.elem.style.display="none",t.appendChild(this.sw_allowguest.elem),this.sw_allowrolling=new fc_switch,this.sw_allowrolling.create(this.ws.pol_allowrolling,"Allow dice rolling"),this.sw_allowrolling.elem.style.display="none",t.appendChild(this.sw_allowrolling.elem),this.sw_allowyoutube=new fc_switch,this.sw_allowyoutube.create(this.ws.pol_allowyoutube,"Allow YouTube Player"),this.sw_allowyoutube.elem.style.display="none",t.appendChild(this.sw_allowyoutube.elem),(e=document.createElement("button")).setAttribute("id","polcancel"),e.onclick=this.close.bind(this),e.innerHTML="Cancel",t.appendChild(e),(e=document.createElement("button")).setAttribute("id","polsave"),e.onclick=this.apply_click.bind(this),e.innerHTML="Apply",t.appendChild(e),n.appendChild(t)},fc_wndpolicy.prototype.permcheck=function(){return 100<this.ws.modlvl},fc_wndpolicy.prototype.cbpassclick=function(t){this.sw_password.ischecked()?this.text_password.style.display="block":this.text_password.style.display="none"},fc_wndpolicy.prototype.set=function(){null!==this.sw_password&&this.sw_password.check(this.ws.pol_pwenforced),null!==this.text_password&&(this.text_password.value=this.ws.pol_pw,this.ws.pol_pwenforced?this.text_password.style.display="block":this.text_password.style.display="none"),null!==this.sw_modchangelayout&&this.sw_modchangelayout.check(this.ws.pol_modchangelayout),null!==this.sw_modchangetopic&&this.sw_modchangetopic.check(this.ws.pol_modchangetopic),null!==this.sw_modstopcam&&this.sw_modstopcam.check(this.ws.pol_modstopcam)},fc_wndpolicy.prototype.open=function(){this.permcheck()&&(null===this.wnd&&this.createui(),this.wnd.show(),this.wnd.center(),this.set())},fc_wndpolicy.prototype.close=function(){null!==this.wnd&&this.wnd.hide()},fc_wndpolicy.prototype.apply_click=function(){var t=[];this.sw_password.getstate()!==this.ws.pol_pwenforced&&t.push({k:"pwe",v:this.sw_password.checked()?"1":"0"}),this.text_password.value!==this.ws.pol_pw&&t.push({k:"pwd",v:this.text_password.value}),this.sw_modchangelayout.getstate()!==this.ws.pol_modchangelayout&&t.push({k:"mcl",v:this.sw_modchangelayout.checked()?"1":"0"}),this.sw_modchangetopic.getstate()!==this.ws.pol_modchangetopic&&t.push({k:"mct",v:this.sw_modchangetopic.checked()?"1":"0"}),this.sw_modstopcam.getstate()!==this.ws.pol_modstopcam&&t.push({k:"msc",v:this.sw_modstopcam.checked()?"1":"0"}),this.sw_allowguest.getstate()!==this.ws.pol_allowguest&&t.push({k:"ag",v:this.sw_allowguest.checked()?"1":"0"}),this.sw_allowrolling.getstate()!==this.ws.pol_allowrolling&&t.push({k:"ar",v:this.sw_allowrolling.checked()?"1":"0"}),this.sw_allowyoutube.getstate()!==this.ws.pol_allowyoutube&&t.push({k:"ay",v:this.sw_allowyoutube.checked()?"1":"0"}),0<t.length&&this.ws.sendpbuf(1200191,this.pb.roots.default.fc.p_1200191.encode({rp:{kv:t}},null).finish()),this.close()},fc_ws.prototype.mkses=function(){var t,e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789.!$%*@,=-_~";for(t=0;t<32;t++)e+=n.charAt(Math.floor(Math.random()*n.length));return e},fc_ws.prototype.start=function(){if(console.log("fc_ws start"),null===this.ws){this.chead=null,this.chead=new ArrayBuffer(29);var t=new DataView(this.chead);t.setUint16(0,65279),t.setInt16(2,this.pver),t.setUint32(4,this.rn),t.setUint32(8,this.un),t.setUint32(12,0),t.setUint32(16,0),t.setUint8(20,this.cmtype),t.setInt32(21,0),t.setInt32(25,0);try{this.ws=new WebSocket(this.addr),this.ws.onopen=this.onopen.bind(this),this.ws.onclose=this.onclose.bind(this),this.ws.onerror=this.onerror.bind(this),this.ws.onmessage=this.onmessage.bind(this)}catch(t){console.error("fc_ws start ws constructor exception: "+t),this.ws=null}}else console.log("fc_ws start. this.ws is not null")},fc_ws.prototype.updatedelta=function(t){this.tmdelta=t-Date.now()},fc_ws.prototype.cheadupdate=function(){console.log("fc_ws cheadupdate");var t=new DataView(this.chead);t.setUint32(4,this.rn),t.setUint32(8,this.un)},fc_ws.prototype.policyupdate=function(t){var e,n;console.log("fc_ws policyupdate "+t.kv.length+" settings");for(var s=0;s<t.kv.length;s++)switch(e=t.kv[s].k,n=t.kv[s].v,console.log("fc_ws policyupdate setting: "+e+" : "+n),e){case"pwe":this.pol_pwenforced="1"===n;break;case"pwd":this.pol_pw=n;break;case"mcl":this.pol_modchangelayout="1"===n;break;case"mct":this.pol_modchangetopic="1"===n;break;case"msc":this.pol_modstopcam="1"===n;break;case"ag":this.pol_allowguest="1"===n;break;case"ar":this.pol_allowrolling="1"===n;break;case"ay":this.pol_allowyoutube="1"===n}},fc_ws.prototype.disconnect=function(){console.log("fc_ws disconnect"),this.ws.readyState<2&&this.ws.close()},fc_ws.prototype.isconnected=function(){return null!==this.ws&&1===this.ws.readyState},fc_ws.prototype.onopen=function(t){console.log("fc_ws.prototype.onopen")},fc_ws.prototype.onclose=function(t){console.log("fc_ws.prototype.onclose"),this.ws=null,this.rn=0,this.un=0,this.uh=0,(this.pn=0)===this.flwb?(console.log("fc_ws.prototype.onclose no waiting packet, calling close callback immediately"),this.close_cb(t)):(console.log("fc_ws.prototype.onclose still processing packet. storing event data"),this.clswait=t)},fc_ws.prototype.onerror=function(t){console.log("fc_ws on error"),this.error_cb(t)},fc_ws.prototype.onmessage=function(t){if(this.ws&&t.data instanceof Blob){this.flwb++;var e=new FileReader;e.onload=this.packetrdy.bind(this),e.readAsArrayBuffer(t.data)}},fc_ws.prototype.sendpbuf=function(t,e){if(null===this.ws||!this.isconnected())return!1;var n=null,s=0,i=0;if(this.uh=Math.floor(this.un/this.uh+13*this.pn),null!==e)switch(this.cmtype){case 2:s=(n=this.pako.deflate(e)).byteLength,i=e.byteLength;break;case 0:default:s=(n=e).byteLength,i=n.byteLength}var o=new DataView(this.chead);o.setUint32(12,this.uh),o.setUint32(16,t),o.setInt32(21,s),o.setInt32(25,i);var c=new Uint8Array(this.chead.byteLength+n.byteLength);c.set(new Uint8Array(this.chead),0),c.set(n,this.chead.byteLength);try{this.ws.send(c)}catch(t){return console.warn("fc_ws.prototype.sendpbuf cannot send ex: "+t),!1}return this.pn++,!0},fc_ws.prototype.packetrdy=function(t){this.flwb--;var e=t.target.result,n=!1,s=new DataView(e);n="fffe"===s.getUint16(0).toString(16);s.getUint8(2,n);var i=s.getUint32(3,n),o=s.getUint8(7,n),c=null;if(0<s.getUint16(8,n))switch(o){case 1:break;case 2:try{c=this.pako.inflate(e.slice(10))}catch(t){console.log("decompression error on packet: "+t)}break;case 3:case 0:default:c=e.slice(10)}else c=null;this.rcv_cb(i,c),0!==this.flwb||this.isconnected()||null===this.clswait||(console.log("fc_ws.prototype.packetrdy processing waiting closeevent"),this.close_cb(this.clswait),this.clswait=null)},fc_ws.prototype.close=function(){this.ws&&(this.ws.close(),this.ws=null)},fc_ws.prototype.stohr=function(t){return this.mstohr(1e3*t)},fc_ws.prototype.mstohr=function(t){if(t<1e3)return"<1s";for(var e,n=t,s=0,i=0,o=0,c=0,r="";6e4<=n;)6048e5<=n?(n-=6048e5,c++):864e5<=n?(n-=864e5,o++):36e5<=n?(n-=36e5,i++):6e4<=n&&(n-=6e4,s++);return 0<c&&(r+=c+"w "),0<o&&(r+=o+"d "),0<i&&(r+=i+"h "),0<s&&(r+=s+"m "),0<(e=Math.floor(n/1e3))&&(r+=e+"s "),r.trim()},fc_youtube.prototype.reqq=function(){null!==this.ytpp?!this.ytpp.closed&&this.pa?(console.log("fc_youtube.prototype.reqq, player is open, requesting queue"),this.ws.sendpbuf(1200420,this.pb.roots.default.fc.p_1200420.encode({},null).finish())):console.log("fc_youtube.prototype.reqq, player is closed"):console.log("fc_youtube.prototype.reqq, player is null")},fc_youtube.prototype.open=function(){return null===this.ytpp||this.ytpp.closed?(console.log("fc_youtube.prototype.open. window open"),1===parseInt(getCookie("accept_youtube_pp"))&&(this.pa=!0),this.ytpp=window.open("/youtube.php",this.ws.rn+"_youtube_window","location=no,toolbar=no,menubar=no,status=no,scrollbars=no,resizable=yes,width=720,height=445,left=500,top=300"),this.ytpp.addEventListener("load",this.pp_load.bind(this)),this.ytpp.addEventListener("resize",this.pp_resize.bind(this)),this.ytpp.onYouTubeIframeAPIReady=this.pp_ytbr.bind(this)):(console.log("fc_youtube.prototype.open. window focus"),this.ytpp.focus()),null!==this.ytpp},fc_youtube.prototype.pp_load=function(){console.log("fc_youtube.prototype.pp_load"),this.player_cont=this.ytpp.document.getElementById("kyt_player"),this.div_qpopup=this.ytpp.document.getElementById("kyt_queue_popup"),this.div_queue=this.ytpp.document.getElementById("kyt_queue"),this.div_qpopupbg=this.ytpp.document.getElementById("popup_background"),this.btn_addvideo=this.ytpp.document.getElementById("addvideobtn"),this.btn_addvideo.onclick=this.openq.bind(this),this.btn_nextvideo=this.ytpp.document.getElementById("nextbtn"),this.btn_nextvideo.onclick=this.nextv.bind(this),this.div_qpopupcls=this.ytpp.document.getElementById("qpopup_close"),this.div_qpopupcls.onclick=this.closeq.bind(this),this.text_search=this.ytpp.document.getElementById("searchbox"),this.text_search.onkeydown=this.s_keydown.bind(this),this.btn_search=this.ytpp.document.getElementById("searchbtn"),this.btn_search.onclick=this.s_click.bind(this),this.text_addurl=this.ytpp.document.getElementById("addurlbox"),this.text_addurl.onkeydown=this.au_keydown.bind(this),this.btn_addurl=this.ytpp.document.getElementById("addurlbtn"),this.btn_addurl.onclick=this.au_click.bind(this),this.p_query_err=this.ytpp.document.getElementById("query_err"),this.table_queue=this.ytpp.document.getElementById("queue_table"),this.div_sresultcont=this.ytpp.document.getElementById("kyt_sresults_cont"),this.div_sresult=this.ytpp.document.getElementById("kyt_sresults"),this.div_sresultload=this.ytpp.document.getElementById("queue_loading"),this.span_sresulttext=this.ytpp.document.getElementById("kyt_sresult_text"),this.div_sresultclose=this.ytpp.document.getElementById("sresult_close"),this.div_sresultclose.onclick=this.close_sr.bind(this),this.pa?(this.reqq(),this.btn_addvideo.disabled=!1):(this.div_privnote=this.ytpp.document.getElementById("privacy_notice"),this.div_privnote.style.display="block",this.btn_acceptpriv=this.ytpp.document.getElementById("accept_priv"),this.btn_acceptpriv.onclick=this.acceptpriv.bind(this))},fc_youtube.prototype.pp_resize=function(){this.div_sresult.style.height=this.div_qpopup.clientHeight-this.div_sresult.offsetTop-10+"px",this.div_queue.style.height=this.div_qpopup.clientHeight-this.div_queue.offsetTop-10+"px"},fc_youtube.prototype.pp_ytbr=function(t){this.pa?(console.log("fc_youtube.prototype.pp_ytbr the youtube iframe player has landed"),this.YT=this.ytpp.getYT(),this.player=new this.YT.Player("kyt_player",{videoId:"",playerVars:{autohide:1,controls:1,iv_load_policy:3,modestbranding:1,origin:"https://www.wechatcity.com"},events:{onReady:this.ytb_rdy.bind(this),onStateChange:this.ytb_stc.bind(this),onError:this.ytb_err.bind(this)}})):(console.log("fc_youtube.prototype.pp_ytbr blocking player until terms and policy accepted"),this.player=null)},fc_youtube.prototype.acceptpriv=function(t){this.pa=!0,this.div_privnote.style.display="none",setCookie("accept_youtube_pp","1",180),this.reqq(),this.pp_ytbr(t),this.btn_addvideo.disabled=!1},fc_youtube.prototype.ytb_rdy=function(t){console.log("fc_youtube.prototype.ytb_rdy"),this.playstate="loaded",this.player_cont.style.display="none",this.setcur(this.cur_start_time,this.cur_video)},fc_youtube.prototype.ytb_stc=function(t){switch(t.data){case-1:this.playstate="unstarted",console.log("fc_youtube.prototype.ytb_stc unstarted");break;case this.YT.PlayerState.ENDED:this.playstate="ended",this.btn_nextvideo.disabled=!0,this.player_cont.style.display="none",console.log("fc_youtube.prototype.ytb_stc ended");break;case this.YT.PlayerState.PLAYING:this.playstate="playing",console.log("fc_youtube.prototype.ytb_stc playing");break;case this.YT.PlayerState.PAUSED:this.playstate="paused",console.log("fc_youtube.prototype.ytb_stc paused");break;case this.YT.PlayerState.BUFFERING:this.playstate="buffering",console.log("fc_youtube.prototype.ytb_stc buffering");break;case this.YT.PlayerState.CUED:this.playstate="cued",console.log("fc_youtube.prototype.ytb_stc cued");break;default:console.warn("fc_youtube.prototype.ytb_stc unknown state "+t.data)}},fc_youtube.prototype.ytb_err=function(t){console.warn("fc_youtube.prototype.ytb_err: "+t.data)},fc_youtube.prototype.setcur=function(t,e){if(this.cur_start_time=t,this.cur_video=e,"unloaded"!==this.playstate){var n=Date.now()+this.ws.tmdelta,s=Math.floor((n-this.cur_start_time)/1e3);this.player.loadVideoById(this.cur_video.id,s,"large"),this.player_cont.style.display="block",this.player.playVideo(),10<s?this.setupnb():(this.btn_nextvideo.disabled=!0,setTimeout(this.setupnb.bind(this),1e3*(11-s)))}},fc_youtube.prototype.setupnb=function(){var t=Date.now()+this.ws.tmdelta,e=Math.floor((t-this.cur_start_time)/1e3);(150<=this.ws.modlvl||this.ws.username===this.cur_video.nm)&&2<this.table_queue.childElementCount&&10<=e&&null!==this.cur_video?this.btn_nextvideo.disabled=!1:this.btn_nextvideo.disabled=!0},fc_youtube.prototype.nextv=function(t){null!==this.cur_video&&"number"==typeof this.cur_video.uid&&this.ws.sendpbuf(1200455,this.pb.roots.default.fc.p_1200455.encode({cuid:this.cur_video.uid},null).finish())},fc_youtube.prototype.openq=function(t){this.div_qpopup.style.display="block",this.div_qpopupbg.style.display="block"},fc_youtube.prototype.closeq=function(t){this.div_qpopup.style.display="none",this.div_qpopupbg.style.display="none"},fc_youtube.prototype.s_keydown=function(t){13===t.keyCode&&0<this.text_search.value.length&&this.search(this.text_search.value,"","")},fc_youtube.prototype.s_click=function(t){0<this.text_search.value.length&&this.search(this.text_search.value,"","")},fc_youtube.prototype.search=function(t,e,n){this.clear_sr(),this.open_sr(),this.ws.isguest?this.span_sresulttext.innerText="You must login to search YouTube":(this.span_sresulttext.innerText="Searching",this.div_sresultload.style.display="block",this.search_cb(t,e,n,this.searchr.bind(this)))},fc_youtube.prototype.searchr=function(t,e){this.div_sresultload.style.display="none",200!==e?this.span_sresulttext.innerText="Network Error, try later":t.hasOwnProperty("error")?this.span_sresulttext.innerText="Error, please log back in":t.hasOwnProperty("results")&&(1<t.results.se.length?this.span_sresulttext.innerText=t.results.se:(this.span_sresulttext.innerText="Search Results",this.dspresults(t.results)))},fc_youtube.prototype.dspresults=function(t){for(var e=0;e<t.v.length;e++){var n=t.v[e],s=document.createElement("div");s.className="kyt_vid";var i=document.createElement("ul");s.appendChild(i);var o=document.createElement("li");i.appendChild(o);var c=document.createElement("div");c.className="ytthumb",c.style.backgroundImage="url('"+n.tn+"')",o.appendChild(c);var r=document.createElement("div");if(r.className="time",r.innerText=n.l,c.appendChild(r),!n.hasOwnProperty("ne")){var l=document.createElement("button");l.className="kyt_addbtn",l.innerText="Add Video",l.setAttribute("id","btn"+n.id),l.setAttribute("data-vid",n.id),l.onclick=this.a_click.bind(this),o.appendChild(l)}var a=document.createElement("li");i.appendChild(a);var h=document.createElement("h6");h.innerHTML=n.t,a.appendChild(h);var p=document.createElement("p");p.innerText=n.pd+" ago - "+n.c+" views",a.appendChild(p);var u=document.createElement("p");u.innerHTML=n.d,a.appendChild(u);var d=document.createElement("p");d.setAttribute("id","warn"+n.id),d.className="error",s.appendChild(d),n.hasOwnProperty("ne")&&(d.innerText="THE OWNER OF THIS VIDEO DOES NOT ALLOW EMBEDDING"),this.div_sresult.appendChild(s)}var m=document.createElement("div");if(m.setAttribute("id","nav"),t.hasOwnProperty("ppt")){var f=document.createElement("button");f.innerText="Previous Page",m.appendChild(f);var y=this;f.onclick=function(){y.search(t.q,t.ppt,t.r)}}if(t.hasOwnProperty("npt")){var b=document.createElement("button");b.innerText="Next Page",m.appendChild(b);y=this;b.onclick=function(){y.search(t.q,t.npt,t.r)}}var _=document.createElement("p");_.innerText=t.tr+" results",m.appendChild(_),this.div_sresult.appendChild(m),this.pp_resize()},fc_youtube.prototype.close_sr=function(){this.div_sresultcont.style.display="none",this.div_queue.style.display="block",this.pp_resize()},fc_youtube.prototype.clear_sr=function(){this.div_sresult.innerHTML=""},fc_youtube.prototype.open_sr=function(){this.div_sresultcont.style.display="block",this.div_queue.style.display="none",this.pp_resize()},fc_youtube.prototype.a_click=function(t){var e=this.ytpp.document.getElementById("btn"+t.target.dataset.vid);e.className="pending",e.innerHTML="Wait..",e.disabled=!0,this.queue_cb(t.target.dataset.vid,this.queuer.bind(this))},fc_youtube.prototype.queuer=function(t){var e;0!==t.er.length?(this.ytpp.document.getElementById("warn"+t.video_id).innerText=t.error,(e=this.ytpp.document.getElementById("btn"+t.video_id)).className="failed",e.innerHTML="Failed",e.disabled=!0):((e=this.ytpp.document.getElementById("btn"+t.video_id)).className="success",e.innerHTML="Added",e.disabled=!0,this.ws.sendpbuf(1200410,this.pb.roots.default.fc.p_1200410.encode({uid:t.queue_id},null).finish()))},fc_youtube.prototype.qsync=function(t){if(0===t.length){this.table_queue.innerHTML="";var e=document.createElement("tr"),n=document.createElement("th");n.innerText="Empty Queue",e.appendChild(n),this.table_queue.appendChild(e)}else for(var s=0;s<t.length;s++)this.qadd(t[s].uid,t[s].nm,t[s].id,t[s].t,t[s].l)},fc_youtube.prototype.qadd=function(t,e,n,s,i){if(null!==this.ytpp&&null!==this.table_queue&&!this.ytpp.closed){if(1===this.table_queue.childElementCount){this.table_queue.innerHTML="";var o,c=document.createElement("tr");(o=document.createElement("th")).innerText="Username",c.appendChild(o),(o=document.createElement("th")).innerText="Video",c.appendChild(o),(o=document.createElement("th")).innerText="Length",c.appendChild(o),this.table_queue.appendChild(c)}var r;(c=document.createElement("tr")).setAttribute("data-uid",t),(r=document.createElement("td")).innerText=e,c.appendChild(r),(r=document.createElement("td")).innerText=s,c.appendChild(r),(r=document.createElement("td")).innerText=i,c.appendChild(r),this.table_queue.appendChild(c),this.setupnb()}},fc_youtube.prototype.qdel=function(t){if(null!==this.ytpp&&null!==this.table_queue&&!this.ytpp.closed){if(console.log("fc_youtube.prototype.qdel uid: "+t),console.log("fc_youtube.prototype.qdel table len: "+this.table_queue.rows.length),1<this.table_queue.childElementCount)for(var e=1;e<this.table_queue.rows.length;e++)console.log("fc_youtube.prototype.qdel loop: "+e),console.log("fc_youtube.prototype.qdel dataset: "+this.table_queue.rows[e].dataset.uid),this.table_queue.rows[e].dataset.uid.toString()===t.toString()&&(console.log("fc_youtube.prototype.qdel deleting"),this.table_queue.deleteRow(e));if(1===this.table_queue.childElementCount){this.table_queue.innerHTML="";var n=document.createElement("tr"),s=document.createElement("th");s.innerText="Empty Queue",n.appendChild(s),this.table_queue.appendChild(n)}}},fc_youtube.prototype.au_keydown=function(t){13===t.keyCode&&0<this.text_addurl.value.length&&this.addurl(this.text_addurl.value)},fc_youtube.prototype.au_click=function(t){0<this.text_addurl.value.length&&this.addurl(this.text_addurl.value)},fc_youtube.prototype.addurl=function(t){this.ws.isguest?this.p_query_err.innerText="You must login to add videos":(this.p_query_err.innerText="Adding video",this.div_sresultload.style.display="block",this.queue_cb(t,this.addurlr.bind(this)))},fc_youtube.prototype.addurlr=function(t,e){this.div_sresultload.style.display="none",200!==e?this.p_query_err.innerText="Network Error "+e:t.hasOwnProperty("error")?this.p_query_err.innerText="Please log back in":0!==t.ae.length?this.p_query_err.innerText=t.ae:(this.p_query_err.innerText="",this.ws.sendpbuf(1200410,this.pb.roots.default.fc.p_1200410.encode({uid:t.queue_id},null).finish()))},fc.prototype.dockeydown=function(t){this.status.act()},fc.prototype.docmousemove=function(t){this.status.act(),this.wndctrl.docmousemove(t.pageX,t.pageY)},fc.prototype.doctouchmove=function(t){this.status.act();var e=t.targetTouches[0];this.wndctrl.docmousemove(e.pageX,e.pageY),null!==this.wndctrl.drag_wnd&&t.preventDefault()},fc.prototype.docmouseup=function(t){this.status.act(),this.wndctrl.docmouseup()},fc.prototype.docresize=function(){if("mobile"===this.mode)if("landscape"===window.getComputedStyle(this.elem).getPropertyValue("--fc-orientation")){console.log("fc.prototype.docresize mobile landscape mode"),this.gridcams.style.height=this.lo.elem.clientHeight+"px";var t=this.elem.clientHeight-this.gridtopic.clientHeight,e=this.cb.isscrollpinned();this.gridchat.style.height=t-this.gridtools.clientHeight+"px",this.gridlist.style.height=t+"px",e&&this.cb.scrolldown()}else{console.log("fc.prototype.docresize mobile portrait mode"),this.gridcams.style.height=this.lo.elem.clientHeight+"px";t=this.elem.clientHeight-(this.gridcams.clientHeight+this.gridtopic.clientHeight),e=this.cb.isscrollpinned();this.gridchat.style.height=t-this.gridtools.clientHeight+"px",this.gridlist.style.height=t+"px",e&&this.cb.scrolldown()}else if("swf"===this.mode){clearTimeout(this.step_timeout),this.gridcams.style.height=this.lo.elem.clientHeight+"px",console.log("swf mode calculating remaining height");var n=(t=this.elem.clientHeight-(this.gridcams.clientHeight+this.gridtopic.clientHeight))/this.elem.clientHeight*100;n<40?(console.log("swf mode remininag height for chat is "+t+" percent: "+n+"%"),this.width_step-=5,document.getElementById("swf_chat_normal").style.width=this.width_step+"%",this.step_timeout=setTimeout(this.docresize.bind(this),50)):50<n&&(console.log("swf mode remininag height for chat is "+t+" percent: "+n+"%"),100!==this.width_step&&(this.width_step+=5,100<this.width_step&&(this.width_step=100),document.getElementById("swf_chat_normal").style.width=this.width_step+"%",this.step_timeout=setTimeout(this.docresize.bind(this),50)));e=this.cb.isscrollpinned();console.log("swf mode setting remaining height to chat"),this.gridchat.style.height=t-this.gridtools.clientHeight+"px",this.gridlist.style.height=t+"px",e&&this.cb.scrolldown()}else{this.gridcams.style.height=this.lo.elem.clientHeight+"px";t=this.elem.clientHeight-(this.gridcams.clientHeight+this.gridtopic.clientHeight),e=this.cb.isscrollpinned();this.gridchat.style.height=t-this.gridtools.clientHeight+"px",this.gridlist.style.height=t+"px",e&&this.cb.scrolldown()}},fc.prototype.togulist=function(){"mobile"===this.ws.mode?"none"===this.ul.elem.style.display?this.ul.elem.style.display="block":this.ul.elem.style.display="none":"none"===this.gridlist.style.display?(this.gridlist.style.display="block",this.gridchat.style.gridColumn="1 / 4",this.gridtools.style.gridColumn="1 / 4"):(this.gridlist.style.display="none",this.gridchat.style.gridColumn="1 / 5",this.gridtools.style.gridColumn="1 / 5")},fc.prototype.showfc=function(){this.elem.style.pointerEvents="auto",this.msk.elem.style.opacity=0,this.elem.style.opacity=1},fc.prototype.showmsk=function(){this.elem.style.pointerEvents="none",this.elem.style.opacity=0,this.msk.elem.style.opacity=1},fc.prototype.umopen=function(t){console.log("fc.prototype.umopen "+t.target.dataset.username);var e=this.ul.gubn(t.target.dataset.username);null===e||this.um.open(t.pageX-this.elem.offsetLeft,t.pageY-this.elem.offsetTop,e,!1)},fc.prototype.ytopen=function(t){console.log("fc.prototype.ytopen"),this.ytpl.open()},fc.prototype.tipshow=function(t){var e=this.ul.gubn(t.target.dataset.username);this.tip.show(t.pageX-this.elem.offsetLeft,t.pageY-this.elem.offsetTop,{buildtype:"userinfo",user:e})},fc.prototype.tipcancel=function(t){this.tip.cancel()},fc.prototype.createui=function(){return this.ui_done?(console.warn("fc.prototype.createui ui_done is already true"),!1):(this.gridcams=document.createElement("div"),this.gridtopic=document.createElement("div"),this.gridchat=document.createElement("div"),this.gridtools=document.createElement("div"),this.gridlist=document.createElement("div"),this.gridcams.className="gridbox_cams",this.gridtopic.className="gridbox_topic",this.gridchat.className="gridbox_chat",this.gridtools.className="gridbox_tools",this.gridlist.className="gridbox_list",this.elem.appendChild(this.um.elem),this.elem.appendChild(this.tip.elem),this.gridcams.appendChild(this.lo.elem),this.gridtopic.appendChild(this.tp.elem),this.gridchat.appendChild(this.cb.elem),this.gridtools.appendChild(this.tb.elem),"mobile"===this.ws.mode?this.elem.appendChild(this.ul.elem):this.gridlist.appendChild(this.ul.elem),this.elem.appendChild(this.gridcams),this.elem.appendChild(this.gridtopic),this.elem.appendChild(this.gridchat),this.elem.appendChild(this.gridtools),this.elem.appendChild(this.gridlist),this.ui_done=!0)},fc.prototype.startband=function(t,e,n,s,i){this.msk.showbs(t,e,n,s,i),this.showmsk()},fc.prototype.startpass=function(){},fc.prototype.start=function(){console.log("fc.prototype.start"),this.t2src_cb(this.t2cb.bind(this)),this.msk.showcs("Ready","Preparing to join room"),this.showmsk()},fc.prototype.t2cb=function(t,e){200===e?t.hasOwnProperty("error")?this.msk.showcs("Error","Something went wrong, refresh the page, or log back in. Error: "+t.error):(this.ws.t2=t.t2,this.ws.t2exp=new Date(t.exp),this.msk.showcs("Connecting","Connecting to server"),this.ws.start()):this.msk.showcs("Error","Something went wrong, refresh the page, or log back in. Status: "+e)},fc.prototype.wserr=function(t){},fc.prototype.wsclose=function(t){var e,n;switch(this.ws.ready=!1,console.log("fc.prototype.wsclose code: "+t.code),null===this.ws.close_pf?0<t.reason.length&&(console.log("fc.prototype.wsclose decoding reason: "+t.reason),n=this.b64.toByteArray(t.reason)):(this.ws.close_pf.code===t.code&&this.ws.close_pf.secret===t.reason&&(console.log("fc.prototype.wsclose decoding prefetched reason: "+this.ws.close_pf.reason),n=this.b64.toByteArray(this.ws.close_pf.reason)),this.ws.close_pf=null),t.code){case 1002:case 1003:case 1007:case 1008:case 1009:case 1010:case 1011:case 1015:default:this.msk.showcs("RIP IN PIECE","Lost connection with code "+t.code),this.showmsk();break;case 1001:if("string"==typeof t.reason&&-1!==t.reason.toLowerCase().indexOf("cloudflare")){var s=Math.floor(Math.random()*(this.ws.recon_max-this.ws.recon_min))+this.ws.recon_min;this.cb.addsys("CloudFlare servers are moving about, please wait ("+s+")"),this.recon.start(s)}else this.cb.addsys("bye");break;case 4007:this.msk.showcs("Session Ended","You have left the room due to joining from another location."),this.showmsk();break;case 4008:this.msk.showcs("Error","Your username is already taken in this room"),this.showmsk();break;case 1e3:case 1005:case 1006:case 1012:case 1013:s=Math.floor(Math.random()*(this.ws.recon_max-this.ws.recon_min))+this.ws.recon_min;this.ws.joined?this.cb.addsys("Lost connection to server, please wait while we try to reconnect ("+s+")"):this.msk.showcs("Connection Failed","Failed to connect to room, attempting reconnect ("+s+")"),this.recon.start(s);break;case 4001:if(this.ws.joined){s=Math.floor(Math.random()*(this.ws.recon_max-this.ws.recon_min))+this.ws.recon_min;this.cb.addsys("Lost connection to server, please wait while we try to reconnect ("+s+")"),this.recon.reqt2(),this.recon.start(s)}break;case 4002:this.cb.addsys("site banned!");break;case 4003:null===this.pb.roots.default.fc.c_4003.verify(n)&&(e=this.pb.roots.default.fc.c_4003.decode(n).kick,this.msk.showks(e.mnm,e.rsn,e.ls,e.rs),this.showmsk());break;case 4004:null===this.pb.roots.default.fc.c_4004.verify(n)&&(e=this.pb.roots.default.fc.c_4004.decode(n).ban,this.msk.showbs(e.nm,e.exp,e.rs,e.prm,e.rsn),this.showmsk());break;case 4005:this.msk.showps(),this.showmsk();break;case 4006:this.msk.showjo(),this.showmsk();break;case 4009:if(null===this.pb.roots.default.fc.c_4009.verify(n)){(e=this.pb.roots.default.fc.c_4009.decode(n)).hasOwnProperty("jth")&&(this.ws.jth=e.jth);var i=e.msg;0===i.length&&(i="Connection closed, please wait"),this.ws.joined?(this.cb.addsys(i+" ("+e.ms+")"),this.recon.start(e.ms)):(this.msk.showws(e.ms,i),this.showmsk())}}},fc.prototype.wsrecv=function(t,e){switch(t){default:console.warn("received a packet with unknown type: "+t);break;case 1100101:if(null===this.pb.roots.default.fc.p_1100101.verify(e)){var n=this.pb.roots.default.fc.p_1100101.decode(e);this.ws.un=n.un,this.ws.uh=n.uh,this.ws.cheadupdate(),this.msk.showcs("Joining Room","Received handshake, sending response"),this.ws.sendpbuf(1200102,this.pb.roots.default.fc.p_1200102.encode({sid:this.ws.sid,tk:this.ws.t2,pw:this.ws.roompass,jo:this.ws.joinover,jth:this.ws.jth},null).finish()),!this.ws.joined&&this.ws.joinover&&(this.ws.joinover=!1),0<this.ws.jth.length&&(this.ws.jth="")}break;case 1100103:if(null===this.pb.roots.default.fc.p_1100103.verify(e)){this.ui_done||this.createui(),this.msk.showcs("Joining Room","Joining the room");n=this.pb.roots.default.fc.p_1100103.decode(e);this.ws.rn=n.rn,this.ws.cheadupdate(),this.ws.policyupdate(n.rp),this.ws.username=n.nm,this.ws.modlvl=n.ml,this.ws.isguest=n.ig,this.msglimit.updateml(this.ws.modlvl),this.tb.refresh(),this.ws.updatedelta(n.tm),this.status.update(n.nm,n.st),this.tp.set(n.tpc),this.tp.refresh(),this.ul.populate(n.users),this.ul.updgsc(n.gsc),this.lo.setup(n.lo),this.lo.showlist(n.cams,this.ul),this.cb.history(n.rcm,n.mn),this.ws.joined?(this.cb.addsys("Connection restored"),this.ytpl.reqq()):(this.config.load(n.cnf),this.tb.setfont(this.config.font_colour,this.config.font_size)),console.log("joined room. username: "+this.ws.username+" modlvl: "+this.ws.modlvl+" cur msgno: "+n.mn),this.ws.ready=!0,this.ws.joined=!0,this.ws.joinover=!0,setTimeout(this.docresize.bind(this),200),setTimeout(this.showfc.bind(this),300),this.ws.isguest&&this.tb.mkguest()}break;case 1100104:if(null===this.pb.roots.default.fc.p_1100104.verify(e)){n=this.pb.roots.default.fc.p_1100104.decode(e);this.ws.updatedelta(n.tm),this.ul.pingsync(n.pl)}break;case 1100105:if(null===this.pb.roots.default.fc.p_1100105.verify(e))if(""===(n=this.pb.roots.default.fc.p_1100105.decode(e)).or)this.cb.addsys("[INFO]: "+n.msg);else null!==(i=this.pmctrl.getpm(n.or))&&i.info(n.msg);break;case 1100106:break;case 1100107:if(null===this.pb.roots.default.fc.p_1100107.verify(e)){var s={code:(n=this.pb.roots.default.fc.p_1100107.decode(e)).code,reason:n.cr,secret:n.sc};this.ws.close_pf=s}break;case 1100191:if(null===this.pb.roots.default.fc.p_1100191.verify(e)){n=this.pb.roots.default.fc.p_1100191.decode(e);this.ws.policyupdate(n.rp),this.wndpolicy.set(),this.tp.refresh(),this.lo.modchg(this.ws.username)}break;case 1100210:if(null===this.pb.roots.default.fc.p_1100210.verify(e)){n=this.pb.roots.default.fc.p_1100210.decode(e).user;this.ul.adduser(n,!0),this.cb.addsys(n.nm+" has joined the room",n.nm),this.pmctrl.notifyjoin(n.nm)}break;case 1100212:if(null===this.pb.roots.default.fc.p_1100212.verify(e)){n=this.pb.roots.default.fc.p_1100212.decode(e);this.ul.removeuser(n.nm),this.cb.addsys(n.nm+" has left the room",n.nm),this.pmctrl.notifyleave(n.nm)}break;case 1100220:if(null===this.pb.roots.default.fc.p_1100220.verify(e)){n=this.pb.roots.default.fc.p_1100220.decode(e);this.ul.updgsc(n.gsc)}break;case 1100321:if(null===this.pb.roots.default.fc.p_1100321.verify(e))(n=this.pb.roots.default.fc.p_1100321.decode(e)).sn||2!==n.st.lv||this.cb.addsys(n.nm+" has gone AFK"+(0===n.st.msg.length?"":" ("+n.st.msg+")"),n.nm),this.ul.setstatus(n.nm,n.st),this.status.update(n.nm,n.st),this.pmctrl.notifystatus(n.nm,n);break;case 1100411:if(null===this.pb.roots.default.fc.p_1100411.verify(e)){n=this.pb.roots.default.fc.p_1100411.decode(e);this.ytpl.qadd(n.v.uid,n.v.nm,n.v.id,n.v.t,n.v.l)}break;case 1100413:if(null===this.pb.roots.default.fc.p_1100413.verify(e)){n=this.pb.roots.default.fc.p_1100413.decode(e);this.ytpl.qdel(n.uid)}break;case 1100421:if(null===this.pb.roots.default.fc.p_1100421.verify(e)){n=this.pb.roots.default.fc.p_1100421.decode(e);this.ytpl.qsync(n.va)}break;case 1100431:if(null===this.pb.roots.default.fc.p_1100431.verify(e)){n=this.pb.roots.default.fc.p_1100431.decode(e);"mobile"!==this.ws.mode&&(this.cb.addyoutube(n.v.t),this.ytpl.setcur(n.st,n.v))}break;case 1100514:if(null===this.pb.roots.default.fc.p_1100514.verify(e)){n=this.pb.roots.default.fc.p_1100514.decode(e).cm;console.log("received chat: "+n.snm+": "+n.msg+" fc: "+n.clr),this.cb.addnormal(n.ts,n.snm,n.ml,n.nc,n.msg,n.clr,n.sz,n.mn)}break;case 1100541:if(null===this.pb.roots.default.fc.p_1100541.verify(e))null!==(i=(n=this.pb.roots.default.fc.p_1100541.decode(e).cm).snm!==this.ws.username?this.pmctrl.getpm(n.snm):this.pmctrl.getpm(n.rnm))&&(i.open(),i.receive(n.ts,n.snm,n.ml,n.nc,n.msg,n.clr,n.sz));break;case 1100551:if(null===this.pb.roots.default.fc.p_1100551.verify(e)){n=this.pb.roots.default.fc.p_1100551.decode(e);this.pmctrl.notifytaka(n.nm,n.st)}break;case 1100571:if(null===this.pb.roots.default.fc.p_1100571.verify(e))(n=this.pb.roots.default.fc.p_1100571.decode(e)).hasOwnProperty("rnm")?null!==(i=n.snm!==this.ws.username?this.pmctrl.getpm(n.snm):this.pmctrl.getpm(n.rnm))&&(i.open(),i.receiveme(n.ts,n.snm,n.msg,n.ml,n.my)):this.cb.addme(n.ts,n.snm,n.msg,n.ml,n.my);break;case 1100574:var i;if(null===this.pb.roots.default.fc.p_1100574.verify(e))0<(n=this.pb.roots.default.fc.p_1100574.decode(e)).rnm.length?null!==(i=n.snm!==this.ws.username?this.pmctrl.getpm(n.snm):this.pmctrl.getpm(n.rnm))&&(i.open(),i.receiveroll(n.snm,n.di,n.sd,n.rs)):(console.log(n.rs),this.cb.addroll(n.snm,n.di,n.sd,n.rs));break;case 1100614:if(null===this.pb.roots.default.fc.p_1100614.verify(e)){n=this.pb.roots.default.fc.p_1100614.decode(e);this.lo.setup(n.lo),this.cb.addsys(n.nm+" changed the layout"),this.docresize()}break;case 1100811:if(null===this.pb.roots.default.fc.p_1100811.verify(e))(n=this.pb.roots.default.fc.p_1100811.decode(e)).nm===this.ws.username&&(this.ws.modlvl=100,this.msglimit.updateml(this.ws.modlvl),this.tp.refresh(),this.tb.refresh()),this.ul.moduser(n.nm),this.lo.modchg(n.nm),this.cb.addsys(n.mnm+" modded "+n.nm);break;case 1100815:if(null===this.pb.roots.default.fc.p_1100815.verify(e))(n=this.pb.roots.default.fc.p_1100815.decode(e)).nm===this.ws.username&&(this.ws.modlvl=0,this.msglimit.updateml(this.ws.modlvl),this.tp.refresh(),this.tb.refresh()),this.ul.unmoduser(n.nm),this.lo.modchg(n.nm),this.cb.addsys(n.mnm+" unmodded "+n.nm);break;case 1100821:if(null===this.pb.roots.default.fc.p_1100821.verify(e)){n=this.pb.roots.default.fc.p_1100821.decode(e);console.log("room topic change to: "+n.tpc),this.tp.set(n.tpc)}break;case 1100831:if(null===this.pb.roots.default.fc.p_1100831.verify(e)){n=this.pb.roots.default.fc.p_1100831.decode(e).kick;this.cb.addsys(n.mnm+" kicked "+n.nm+" from the room for "+this.ws.stohr(n.ls)+" ("+n.stc+"/"+n.stm+" strikes) "+(0<n.rsn.length?" ("+n.rsn+")":""))}break;case 1100841:if(null===this.pb.roots.default.fc.p_1100841.verify(e))0<(n=this.pb.roots.default.fc.p_1100841.decode(e).ban).bnm.length?this.cb.addsys(n.bnm+" banned "+n.nm+" for "+this.ws.stohr(n.rs)+(0<n.rsn.length?" ("+n.rsn+")":"")):this.cb.addsys(n.nm+" was banned for "+this.ws.stohr(n.rs)+(0<n.rsn.length?" ("+n.rsn+")":""));break;case 1100851:if(null===this.pb.roots.default.fc.p_1100851.verify(e)){n=this.pb.roots.default.fc.p_1100851.decode(e);this.cb.addsys(n.mnm+" purged all messages from "+n.nm)}break;case 1100621:if(null===this.pb.roots.default.fc.p_1100621.verify(e)){n=this.pb.roots.default.fc.p_1100621.decode(e).cam;this.lo.showcam(n.nm,n.cn,n.cs,this.ul)}break;case 1100627:if(null===this.pb.roots.default.fc.p_1100627.verify(e))(n=this.pb.roots.default.fc.p_1100627.decode(e)).hasOwnProperty("stp")&&this.cb.addsys(n.stp.mnm+" stopped your cam for "+this.ws.stohr(n.stp.ls)+" ["+this.ws.stohr(n.stp.rs)+" remaining]"+(0<n.stp.rsn.length?" ("+n.stp.rsn+")":"")),n.hasOwnProperty("cn")&&this.lo.stopcam(n.cn);break;case 1100631:if(null===this.pb.roots.default.fc.p_1100631.verify(e))(n=this.pb.roots.default.fc.p_1100631.decode(e)).hasOwnProperty("stp")&&this.cb.addsys(n.stp.mnm+" stopped "+n.stp.nm+" for "+this.ws.stohr(n.stp.ls)+(0<n.stp.rsn.length?" ("+n.stp.rsn+")":"")),-1<n.cn&&this.lo.stopcam(n.cn);break;case 1100711:if(null===this.pb.roots.default.fc.p_1100711.verify(e)){n=this.pb.roots.default.fc.p_1100711.decode(e);this.lo.offerreq(n.cn,n.ti)}break;case 1100723:if(null===this.pb.roots.default.fc.p_1100723.verify(e)){n=this.pb.roots.default.fc.p_1100723.decode(e).sdp;this.lo.offer(n.cn,n.ti,n.dsc)}break;case 1100735:if(null===this.pb.roots.default.fc.p_1100735.verify(e)){n=this.pb.roots.default.fc.p_1100735.decode(e).sdp;this.lo.answer(n.cn,n.ti,n.dsc)}break;case 1100747:if(null===this.pb.roots.default.fc.p_1100747.verify(e)){n=this.pb.roots.default.fc.p_1100747.decode(e);this.lo.ice(n.cn,n.ti,n.cnd)}break;case 1100798:if(null===this.pb.roots.default.fc.p_1100798.verify(e)){n=this.pb.roots.default.fc.p_1100798.decode(e);this.lo.close(n.cn,n.ti)}}},fc.prototype.checkcompat=function(){if(!window.WebSocket)return"WebSocket not supported by your browser.";if(!window.RTCPeerConnection)return"RTCPeerConnection not supported by your browser.";try{window.AudioContext=window.AudioContext||window.webkitAudioContext,window.audioContext=new AudioContext}catch(t){return"AudioContext is not supported in this browser (required for volume activity monitors)."}return null},function(t){var e,c=t.Reader,s=t.Writer,i=t.util,r=t.roots.default||(t.roots.default={});r.fc=((e={}).p_1100101=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.un=0,t.prototype.uh=0,t.encode=function(t,e){return e||(e=s.create()),null!=t.un&&Object.hasOwnProperty.call(t,"un")&&e.uint32(8).int32(t.un),null!=t.uh&&Object.hasOwnProperty.call(t,"uh")&&e.uint32(16).int32(t.uh),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1100101;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.un=t.int32();break;case 2:s.uh=t.int32();break;default:t.skipType(7&i)}}return s},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.un&&t.hasOwnProperty("un")&&!i.isInteger(t.un)?"un: integer expected":null!=t.uh&&t.hasOwnProperty("uh")&&!i.isInteger(t.uh)?"uh: integer expected":null},t}(),e.p_1200102=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.sid="",t.prototype.tk="",t.prototype.pw="",t.prototype.jo=!1,t.prototype.jth="",t.encode=function(t,e){return e||(e=s.create()),null!=t.sid&&Object.hasOwnProperty.call(t,"sid")&&e.uint32(10).string(t.sid),null!=t.tk&&Object.hasOwnProperty.call(t,"tk")&&e.uint32(18).string(t.tk),null!=t.pw&&Object.hasOwnProperty.call(t,"pw")&&e.uint32(26).string(t.pw),null!=t.jo&&Object.hasOwnProperty.call(t,"jo")&&e.uint32(32).bool(t.jo),null!=t.jth&&Object.hasOwnProperty.call(t,"jth")&&e.uint32(42).string(t.jth),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1200102;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.sid=t.string();break;case 2:s.tk=t.string();break;case 3:s.pw=t.string();break;case 4:s.jo=t.bool();break;case 5:s.jth=t.string();break;default:t.skipType(7&i)}}return s},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.sid&&t.hasOwnProperty("sid")&&!i.isString(t.sid)?"sid: string expected":null!=t.tk&&t.hasOwnProperty("tk")&&!i.isString(t.tk)?"tk: string expected":null!=t.pw&&t.hasOwnProperty("pw")&&!i.isString(t.pw)?"pw: string expected":null!=t.jo&&t.hasOwnProperty("jo")&&"boolean"!=typeof t.jo?"jo: boolean expected":null!=t.jth&&t.hasOwnProperty("jth")&&!i.isString(t.jth)?"jth: string expected":null},t}(),e.p_1100103=function(){function t(t){if(this.users=[],this.cams=[],this.rcm=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.rn=0,t.prototype.lo=0,t.prototype.mn=0,t.prototype.gsc=0,t.prototype.pkc=0,t.prototype.tlc=0,t.prototype.tm=i.Long?i.Long.fromBits(0,0,!1):0,t.prototype.nm="",t.prototype.tpc="",t.prototype.ml=0,t.prototype.ig=!1,t.prototype.st=null,t.prototype.cnf="",t.prototype.users=i.emptyArray,t.prototype.cams=i.emptyArray,t.prototype.rcm=i.emptyArray,t.prototype.rp=null,t.encode=function(t,e){if(e||(e=s.create()),null!=t.rn&&Object.hasOwnProperty.call(t,"rn")&&e.uint32(8).int32(t.rn),null!=t.lo&&Object.hasOwnProperty.call(t,"lo")&&e.uint32(16).int32(t.lo),null!=t.mn&&Object.hasOwnProperty.call(t,"mn")&&e.uint32(24).int32(t.mn),null!=t.gsc&&Object.hasOwnProperty.call(t,"gsc")&&e.uint32(32).int32(t.gsc),null!=t.pkc&&Object.hasOwnProperty.call(t,"pkc")&&e.uint32(40).int32(t.pkc),null!=t.tlc&&Object.hasOwnProperty.call(t,"tlc")&&e.uint32(48).int32(t.tlc),null!=t.tm&&Object.hasOwnProperty.call(t,"tm")&&e.uint32(56).int64(t.tm),null!=t.nm&&Object.hasOwnProperty.call(t,"nm")&&e.uint32(66).string(t.nm),null!=t.tpc&&Object.hasOwnProperty.call(t,"tpc")&&e.uint32(74).string(t.tpc),null!=t.ml&&Object.hasOwnProperty.call(t,"ml")&&e.uint32(80).int32(t.ml),null!=t.ig&&Object.hasOwnProperty.call(t,"ig")&&e.uint32(88).bool(t.ig),null!=t.st&&Object.hasOwnProperty.call(t,"st")&&r.fc.Status.encode(t.st,e.uint32(98).fork()).ldelim(),null!=t.cnf&&Object.hasOwnProperty.call(t,"cnf")&&e.uint32(106).string(t.cnf),null!=t.users&&t.users.length)for(var n=0;n<t.users.length;++n)r.fc.User.encode(t.users[n],e.uint32(114).fork()).ldelim();if(null!=t.cams&&t.cams.length)for(n=0;n<t.cams.length;++n)r.fc.Cam.encode(t.cams[n],e.uint32(122).fork()).ldelim();if(null!=t.rcm&&t.rcm.length)for(n=0;n<t.rcm.length;++n)r.fc.ChatMsg.encode(t.rcm[n],e.uint32(130).fork()).ldelim();return null!=t.rp&&Object.hasOwnProperty.call(t,"rp")&&r.fc.Policy.encode(t.rp,e.uint32(138).fork()).ldelim(),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1100103;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.rn=t.int32();break;case 2:s.lo=t.int32();break;case 3:s.mn=t.int32();break;case 4:s.gsc=t.int32();break;case 5:s.pkc=t.int32();break;case 6:s.tlc=t.int32();break;case 7:s.tm=t.int64();break;case 8:s.nm=t.string();break;case 9:s.tpc=t.string();break;case 10:s.ml=t.int32();break;case 11:s.ig=t.bool();break;case 12:s.st=r.fc.Status.decode(t,t.uint32());break;case 13:s.cnf=t.string();break;case 14:s.users&&s.users.length||(s.users=[]),s.users.push(r.fc.User.decode(t,t.uint32()));break;case 15:s.cams&&s.cams.length||(s.cams=[]),s.cams.push(r.fc.Cam.decode(t,t.uint32()));break;case 16:s.rcm&&s.rcm.length||(s.rcm=[]),s.rcm.push(r.fc.ChatMsg.decode(t,t.uint32()));break;case 17:s.rp=r.fc.Policy.decode(t,t.uint32());break;default:t.skipType(7&i)}}return s},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.rn&&t.hasOwnProperty("rn")&&!i.isInteger(t.rn))return"rn: integer expected";if(null!=t.lo&&t.hasOwnProperty("lo")&&!i.isInteger(t.lo))return"lo: integer expected";if(null!=t.mn&&t.hasOwnProperty("mn")&&!i.isInteger(t.mn))return"mn: integer expected";if(null!=t.gsc&&t.hasOwnProperty("gsc")&&!i.isInteger(t.gsc))return"gsc: integer expected";if(null!=t.pkc&&t.hasOwnProperty("pkc")&&!i.isInteger(t.pkc))return"pkc: integer expected";if(null!=t.tlc&&t.hasOwnProperty("tlc")&&!i.isInteger(t.tlc))return"tlc: integer expected";if(null!=t.tm&&t.hasOwnProperty("tm")&&!(i.isInteger(t.tm)||t.tm&&i.isInteger(t.tm.low)&&i.isInteger(t.tm.high)))return"tm: integer|Long expected";if(null!=t.nm&&t.hasOwnProperty("nm")&&!i.isString(t.nm))return"nm: string expected";if(null!=t.tpc&&t.hasOwnProperty("tpc")&&!i.isString(t.tpc))return"tpc: string expected";if(null!=t.ml&&t.hasOwnProperty("ml")&&!i.isInteger(t.ml))return"ml: integer expected";if(null!=t.ig&&t.hasOwnProperty("ig")&&"boolean"!=typeof t.ig)return"ig: boolean expected";if(null!=t.st&&t.hasOwnProperty("st")&&(n=r.fc.Status.verify(t.st)))return"st."+n;if(null!=t.cnf&&t.hasOwnProperty("cnf")&&!i.isString(t.cnf))return"cnf: string expected";if(null!=t.users&&t.hasOwnProperty("users")){if(!Array.isArray(t.users))return"users: array expected";for(var e=0;e<t.users.length;++e)if(n=r.fc.User.verify(t.users[e]))return"users."+n}if(null!=t.cams&&t.hasOwnProperty("cams")){if(!Array.isArray(t.cams))return"cams: array expected";for(e=0;e<t.cams.length;++e)if(n=r.fc.Cam.verify(t.cams[e]))return"cams."+n}if(null!=t.rcm&&t.hasOwnProperty("rcm")){if(!Array.isArray(t.rcm))return"rcm: array expected";for(e=0;e<t.rcm.length;++e){var n;if(n=r.fc.ChatMsg.verify(t.rcm[e]))return"rcm."+n}}return null!=t.rp&&t.hasOwnProperty("rp")&&(n=r.fc.Policy.verify(t.rp))?"rp."+n:null},t}(),e.User=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.un=0,t.prototype.ml=0,t.prototype.ping=0,t.prototype.ct=i.Long?i.Long.fromBits(0,0,!1):0,t.prototype.nm="",t.prototype.st=null,t.encode=function(t,e){return e||(e=s.create()),null!=t.un&&Object.hasOwnProperty.call(t,"un")&&e.uint32(8).int32(t.un),null!=t.ml&&Object.hasOwnProperty.call(t,"ml")&&e.uint32(16).int32(t.ml),null!=t.ping&&Object.hasOwnProperty.call(t,"ping")&&e.uint32(24).int32(t.ping),null!=t.ct&&Object.hasOwnProperty.call(t,"ct")&&e.uint32(32).int64(t.ct),null!=t.nm&&Object.hasOwnProperty.call(t,"nm")&&e.uint32(42).string(t.nm),null!=t.st&&Object.hasOwnProperty.call(t,"st")&&r.fc.Status.encode(t.st,e.uint32(50).fork()).ldelim(),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.User;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.un=t.int32();break;case 2:s.ml=t.int32();break;case 3:s.ping=t.int32();break;case 4:s.ct=t.int64();break;case 5:s.nm=t.string();break;case 6:s.st=r.fc.Status.decode(t,t.uint32());break;default:t.skipType(7&i)}}return s},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.un&&t.hasOwnProperty("un")&&!i.isInteger(t.un))return"un: integer expected";if(null!=t.ml&&t.hasOwnProperty("ml")&&!i.isInteger(t.ml))return"ml: integer expected";if(null!=t.ping&&t.hasOwnProperty("ping")&&!i.isInteger(t.ping))return"ping: integer expected";if(null!=t.ct&&t.hasOwnProperty("ct")&&!(i.isInteger(t.ct)||t.ct&&i.isInteger(t.ct.low)&&i.isInteger(t.ct.high)))return"ct: integer|Long expected";if(null!=t.nm&&t.hasOwnProperty("nm")&&!i.isString(t.nm))return"nm: string expected";if(null!=t.st&&t.hasOwnProperty("st")){var e=r.fc.Status.verify(t.st);if(e)return"st."+e}return null},t}(),e.p_1100104=function(){function t(t){if(this.pl=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.tm=i.Long?i.Long.fromBits(0,0,!1):0,t.prototype.pl=i.emptyArray,t.encode=function(t,e){if(e||(e=s.create()),null!=t.tm&&Object.hasOwnProperty.call(t,"tm")&&e.uint32(8).int64(t.tm),null!=t.pl&&t.pl.length)for(var n=0;n<t.pl.length;++n)r.fc.Ping.encode(t.pl[n],e.uint32(18).fork()).ldelim();return e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1100104;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.tm=t.int64();break;case 2:s.pl&&s.pl.length||(s.pl=[]),s.pl.push(r.fc.Ping.decode(t,t.uint32()));break;default:t.skipType(7&i)}}return s},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.tm&&t.hasOwnProperty("tm")&&!(i.isInteger(t.tm)||t.tm&&i.isInteger(t.tm.low)&&i.isInteger(t.tm.high)))return"tm: integer|Long expected";if(null!=t.pl&&t.hasOwnProperty("pl")){if(!Array.isArray(t.pl))return"pl: array expected";for(var e=0;e<t.pl.length;++e){var n=r.fc.Ping.verify(t.pl[e]);if(n)return"pl."+n}}return null},t}(),e.Ping=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.un=0,t.prototype.ping=0,t.encode=function(t,e){return e||(e=s.create()),null!=t.un&&Object.hasOwnProperty.call(t,"un")&&e.uint32(8).int32(t.un),null!=t.ping&&Object.hasOwnProperty.call(t,"ping")&&e.uint32(16).int32(t.ping),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.Ping;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.un=t.int32();break;case 2:s.ping=t.int32();break;default:t.skipType(7&i)}}return s},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.un&&t.hasOwnProperty("un")&&!i.isInteger(t.un)?"un: integer expected":null!=t.ping&&t.hasOwnProperty("ping")&&!i.isInteger(t.ping)?"ping: integer expected":null},t}(),e.p_1100105=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.or="",t.prototype.msg="",t.encode=function(t,e){return e||(e=s.create()),null!=t.or&&Object.hasOwnProperty.call(t,"or")&&e.uint32(10).string(t.or),null!=t.msg&&Object.hasOwnProperty.call(t,"msg")&&e.uint32(18).string(t.msg),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1100105;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.or=t.string();break;case 2:s.msg=t.string();break;default:t.skipType(7&i)}}return s},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.or&&t.hasOwnProperty("or")&&!i.isString(t.or)?"or: string expected":null!=t.msg&&t.hasOwnProperty("msg")&&!i.isString(t.msg)?"msg: string expected":null},t}(),e.p_1100106=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.msg="",t.encode=function(t,e){return e||(e=s.create()),null!=t.msg&&Object.hasOwnProperty.call(t,"msg")&&e.uint32(10).string(t.msg),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1100106;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.msg=t.string();break;default:t.skipType(7&i)}}return s},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.msg&&t.hasOwnProperty("msg")&&!i.isString(t.msg)?"msg: string expected":null},t}(),e.p_1100107=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.code=0,t.prototype.cr="",t.prototype.sc="",t.encode=function(t,e){return e||(e=s.create()),null!=t.code&&Object.hasOwnProperty.call(t,"code")&&e.uint32(8).int32(t.code),null!=t.cr&&Object.hasOwnProperty.call(t,"cr")&&e.uint32(18).string(t.cr),null!=t.sc&&Object.hasOwnProperty.call(t,"sc")&&e.uint32(26).string(t.sc),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1100107;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.code=t.int32();break;case 2:s.cr=t.string();break;case 3:s.sc=t.string();break;default:t.skipType(7&i)}}return s},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.code&&t.hasOwnProperty("code")&&!i.isInteger(t.code)?"code: integer expected":null!=t.cr&&t.hasOwnProperty("cr")&&!i.isString(t.cr)?"cr: string expected":null!=t.sc&&t.hasOwnProperty("sc")&&!i.isString(t.sc)?"sc: string expected":null},t}(),e.p_1100210=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.user=null,t.encode=function(t,e){return e||(e=s.create()),null!=t.user&&Object.hasOwnProperty.call(t,"user")&&r.fc.User.encode(t.user,e.uint32(10).fork()).ldelim(),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1100210;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.user=r.fc.User.decode(t,t.uint32());break;default:t.skipType(7&i)}}return s},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.user&&t.hasOwnProperty("user")){var e=r.fc.User.verify(t.user);if(e)return"user."+e}return null},t}(),e.p_1100212=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.nm="",t.encode=function(t,e){return e||(e=s.create()),null!=t.nm&&Object.hasOwnProperty.call(t,"nm")&&e.uint32(10).string(t.nm),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1100212;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.nm=t.string();break;default:t.skipType(7&i)}}return s},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.nm&&t.hasOwnProperty("nm")&&!i.isString(t.nm)?"nm: string expected":null},t}(),e.p_1100220=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.gsc=0,t.encode=function(t,e){return e||(e=s.create()),null!=t.gsc&&Object.hasOwnProperty.call(t,"gsc")&&e.uint32(8).int32(t.gsc),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1100220;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.gsc=t.int32();break;default:t.skipType(7&i)}}return s},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.gsc&&t.hasOwnProperty("gsc")&&!i.isInteger(t.gsc)?"gsc: integer expected":null},t}(),e.p_1200311=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.il=!1,t.prototype.tm=i.Long?i.Long.fromBits(0,0,!1):0,t.encode=function(t,e){return e||(e=s.create()),null!=t.il&&Object.hasOwnProperty.call(t,"il")&&e.uint32(8).bool(t.il),null!=t.tm&&Object.hasOwnProperty.call(t,"tm")&&e.uint32(16).int64(t.tm),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1200311;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.il=t.bool();break;case 2:s.tm=t.int64();break;default:t.skipType(7&i)}}return s},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.il&&t.hasOwnProperty("il")&&"boolean"!=typeof t.il?"il: boolean expected":null!=t.tm&&t.hasOwnProperty("tm")&&!(i.isInteger(t.tm)||t.tm&&i.isInteger(t.tm.low)&&i.isInteger(t.tm.high))?"tm: integer|Long expected":null},t}(),e.p_1100321=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.nm="",t.prototype.sn=!1,t.prototype.st=null,t.encode=function(t,e){return e||(e=s.create()),null!=t.nm&&Object.hasOwnProperty.call(t,"nm")&&e.uint32(10).string(t.nm),null!=t.sn&&Object.hasOwnProperty.call(t,"sn")&&e.uint32(16).bool(t.sn),null!=t.st&&Object.hasOwnProperty.call(t,"st")&&r.fc.Status.encode(t.st,e.uint32(26).fork()).ldelim(),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1100321;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.nm=t.string();break;case 2:s.sn=t.bool();break;case 3:s.st=r.fc.Status.decode(t,t.uint32());break;default:t.skipType(7&i)}}return s},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.nm&&t.hasOwnProperty("nm")&&!i.isString(t.nm))return"nm: string expected";if(null!=t.sn&&t.hasOwnProperty("sn")&&"boolean"!=typeof t.sn)return"sn: boolean expected";if(null!=t.st&&t.hasOwnProperty("st")){var e=r.fc.Status.verify(t.st);if(e)return"st."+e}return null},t}(),e.Status=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.lv=0,t.prototype.ct=i.Long?i.Long.fromBits(0,0,!1):0,t.prototype.msg="",t.encode=function(t,e){return e||(e=s.create()),null!=t.lv&&Object.hasOwnProperty.call(t,"lv")&&e.uint32(8).int32(t.lv),null!=t.ct&&Object.hasOwnProperty.call(t,"ct")&&e.uint32(16).int64(t.ct),null!=t.msg&&Object.hasOwnProperty.call(t,"msg")&&e.uint32(26).string(t.msg),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.Status;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.lv=t.int32();break;case 2:s.ct=t.int64();break;case 3:s.msg=t.string();break;default:t.skipType(7&i)}}return s},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.lv&&t.hasOwnProperty("lv")&&!i.isInteger(t.lv)?"lv: integer expected":null!=t.ct&&t.hasOwnProperty("ct")&&!(i.isInteger(t.ct)||t.ct&&i.isInteger(t.ct.low)&&i.isInteger(t.ct.high))?"ct: integer|Long expected":null!=t.msg&&t.hasOwnProperty("msg")&&!i.isString(t.msg)?"msg: string expected":null},t}(),e.p_1200331=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.cnf="",t.encode=function(t,e){return e||(e=s.create()),null!=t.cnf&&Object.hasOwnProperty.call(t,"cnf")&&e.uint32(10).string(t.cnf),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1200331;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.cnf=t.string();break;default:t.skipType(7&i)}}return s},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.cnf&&t.hasOwnProperty("cnf")&&!i.isString(t.cnf)?"cnf: string expected":null},t}(),e.p_1200410=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.uid=i.Long?i.Long.fromBits(0,0,!1):0,t.encode=function(t,e){return e||(e=s.create()),null!=t.uid&&Object.hasOwnProperty.call(t,"uid")&&e.uint32(8).int64(t.uid),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1200410;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.uid=t.int64();break;default:t.skipType(7&i)}}return s},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.uid&&t.hasOwnProperty("uid")&&!(i.isInteger(t.uid)||t.uid&&i.isInteger(t.uid.low)&&i.isInteger(t.uid.high))?"uid: integer|Long expected":null},t}(),e.p_1100411=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.v=null,t.encode=function(t,e){return e||(e=s.create()),null!=t.v&&Object.hasOwnProperty.call(t,"v")&&r.fc.YTVideo.encode(t.v,e.uint32(10).fork()).ldelim(),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1100411;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.v=r.fc.YTVideo.decode(t,t.uint32());break;default:t.skipType(7&i)}}return s},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.v&&t.hasOwnProperty("v")){var e=r.fc.YTVideo.verify(t.v);if(e)return"v."+e}return null},t}(),e.p_1200412=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.uid=i.Long?i.Long.fromBits(0,0,!1):0,t.encode=function(t,e){return e||(e=s.create()),null!=t.uid&&Object.hasOwnProperty.call(t,"uid")&&e.uint32(8).int64(t.uid),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1200412;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.uid=t.int64();break;default:t.skipType(7&i)}}return s},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.uid&&t.hasOwnProperty("uid")&&!(i.isInteger(t.uid)||t.uid&&i.isInteger(t.uid.low)&&i.isInteger(t.uid.high))?"uid: integer|Long expected":null},t}(),e.p_1100413=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.uid=i.Long?i.Long.fromBits(0,0,!1):0,t.encode=function(t,e){return e||(e=s.create()),null!=t.uid&&Object.hasOwnProperty.call(t,"uid")&&e.uint32(8).int64(t.uid),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1100413;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.uid=t.int64();break;default:t.skipType(7&i)}}return s},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.uid&&t.hasOwnProperty("uid")&&!(i.isInteger(t.uid)||t.uid&&i.isInteger(t.uid.low)&&i.isInteger(t.uid.high))?"uid: integer|Long expected":null},t}(),e.p_1200420=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.encode=function(t,e){return e||(e=s.create()),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1200420;t.pos<n;){var i=t.uint32();t.skipType(7&i)}return s},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null},t}(),e.p_1100421=function(){function t(t){if(this.va=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.va=i.emptyArray,t.encode=function(t,e){if(e||(e=s.create()),null!=t.va&&t.va.length)for(var n=0;n<t.va.length;++n)r.fc.YTVideo.encode(t.va[n],e.uint32(10).fork()).ldelim();return e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1100421;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.va&&s.va.length||(s.va=[]),s.va.push(r.fc.YTVideo.decode(t,t.uint32()));break;default:t.skipType(7&i)}}return s},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.va&&t.hasOwnProperty("va")){if(!Array.isArray(t.va))return"va: array expected";for(var e=0;e<t.va.length;++e){var n=r.fc.YTVideo.verify(t.va[e]);if(n)return"va."+n}}return null},t}(),e.p_1200430=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.encode=function(t,e){return e||(e=s.create()),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1200430;t.pos<n;){var i=t.uint32();t.skipType(7&i)}return s},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null},t}(),e.p_1100431=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.st=i.Long?i.Long.fromBits(0,0,!1):0,t.prototype.v=null,t.encode=function(t,e){return e||(e=s.create()),null!=t.st&&Object.hasOwnProperty.call(t,"st")&&e.uint32(8).int64(t.st),null!=t.v&&Object.hasOwnProperty.call(t,"v")&&r.fc.YTVideo.encode(t.v,e.uint32(18).fork()).ldelim(),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1100431;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.st=t.int64();break;case 2:s.v=r.fc.YTVideo.decode(t,t.uint32());break;default:t.skipType(7&i)}}return s},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.st&&t.hasOwnProperty("st")&&!(i.isInteger(t.st)||t.st&&i.isInteger(t.st.low)&&i.isInteger(t.st.high)))return"st: integer|Long expected";if(null!=t.v&&t.hasOwnProperty("v")){var e=r.fc.YTVideo.verify(t.v);if(e)return"v."+e}return null},t}(),e.p_1200450=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.encode=function(t,e){return e||(e=s.create()),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1200450;t.pos<n;){var i=t.uint32();t.skipType(7&i)}return s},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null},t}(),e.p_1200455=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.cuid=i.Long?i.Long.fromBits(0,0,!1):0,t.encode=function(t,e){return e||(e=s.create()),null!=t.cuid&&Object.hasOwnProperty.call(t,"cuid")&&e.uint32(8).int64(t.cuid),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1200455;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.cuid=t.int64();break;default:t.skipType(7&i)}}return s},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.cuid&&t.hasOwnProperty("cuid")&&!(i.isInteger(t.cuid)||t.cuid&&i.isInteger(t.cuid.low)&&i.isInteger(t.cuid.high))?"cuid: integer|Long expected":null},t}(),e.YTVideo=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.uid=i.Long?i.Long.fromBits(0,0,!1):0,t.prototype.id="",t.prototype.t="",t.prototype.l=0,t.prototype.nm="",t.encode=function(t,e){return e||(e=s.create()),null!=t.uid&&Object.hasOwnProperty.call(t,"uid")&&e.uint32(8).int64(t.uid),null!=t.id&&Object.hasOwnProperty.call(t,"id")&&e.uint32(18).string(t.id),null!=t.t&&Object.hasOwnProperty.call(t,"t")&&e.uint32(26).string(t.t),null!=t.l&&Object.hasOwnProperty.call(t,"l")&&e.uint32(32).int32(t.l),null!=t.nm&&Object.hasOwnProperty.call(t,"nm")&&e.uint32(42).string(t.nm),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.YTVideo;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.uid=t.int64();break;case 2:s.id=t.string();break;case 3:s.t=t.string();break;case 4:s.l=t.int32();break;case 5:s.nm=t.string();break;default:t.skipType(7&i)}}return s},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.uid&&t.hasOwnProperty("uid")&&!(i.isInteger(t.uid)||t.uid&&i.isInteger(t.uid.low)&&i.isInteger(t.uid.high))?"uid: integer|Long expected":null!=t.id&&t.hasOwnProperty("id")&&!i.isString(t.id)?"id: string expected":null!=t.t&&t.hasOwnProperty("t")&&!i.isString(t.t)?"t: string expected":null!=t.l&&t.hasOwnProperty("l")&&!i.isInteger(t.l)?"l: integer expected":null!=t.nm&&t.hasOwnProperty("nm")&&!i.isString(t.nm)?"nm: string expected":null},t}(),e.p_1200511=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.cm=null,t.encode=function(t,e){return e||(e=s.create()),null!=t.cm&&Object.hasOwnProperty.call(t,"cm")&&r.fc.ChatMsg.encode(t.cm,e.uint32(10).fork()).ldelim(),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1200511;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.cm=r.fc.ChatMsg.decode(t,t.uint32());break;default:t.skipType(7&i)}}return s},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.cm&&t.hasOwnProperty("cm")){var e=r.fc.ChatMsg.verify(t.cm);if(e)return"cm."+e}return null},t}(),e.p_1100514=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.cm=null,t.encode=function(t,e){return e||(e=s.create()),null!=t.cm&&Object.hasOwnProperty.call(t,"cm")&&r.fc.ChatMsg.encode(t.cm,e.uint32(10).fork()).ldelim(),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1100514;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.cm=r.fc.ChatMsg.decode(t,t.uint32());break;default:t.skipType(7&i)}}return s},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.cm&&t.hasOwnProperty("cm")){var e=r.fc.ChatMsg.verify(t.cm);if(e)return"cm."+e}return null},t}(),e.p_1200541=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.cm=null,t.encode=function(t,e){return e||(e=s.create()),null!=t.cm&&Object.hasOwnProperty.call(t,"cm")&&r.fc.ChatMsg.encode(t.cm,e.uint32(10).fork()).ldelim(),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1200541;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.cm=r.fc.ChatMsg.decode(t,t.uint32());break;default:t.skipType(7&i)}}return s},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.cm&&t.hasOwnProperty("cm")){var e=r.fc.ChatMsg.verify(t.cm);if(e)return"cm."+e}return null},t}(),e.p_1100541=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.cm=null,t.encode=function(t,e){return e||(e=s.create()),null!=t.cm&&Object.hasOwnProperty.call(t,"cm")&&r.fc.ChatMsg.encode(t.cm,e.uint32(10).fork()).ldelim(),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1100541;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.cm=r.fc.ChatMsg.decode(t,t.uint32());break;default:t.skipType(7&i)}}return s},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.cm&&t.hasOwnProperty("cm")){var e=r.fc.ChatMsg.verify(t.cm);if(e)return"cm."+e}return null},t}(),e.p_1200551=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.st=0,t.prototype.nm="",t.encode=function(t,e){return e||(e=s.create()),null!=t.st&&Object.hasOwnProperty.call(t,"st")&&e.uint32(8).int32(t.st),null!=t.nm&&Object.hasOwnProperty.call(t,"nm")&&e.uint32(18).string(t.nm),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1200551;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.st=t.int32();break;case 2:s.nm=t.string();break;default:t.skipType(7&i)}}return s},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.st&&t.hasOwnProperty("st")&&!i.isInteger(t.st)?"st: integer expected":null!=t.nm&&t.hasOwnProperty("nm")&&!i.isString(t.nm)?"nm: string expected":null},t}(),e.p_1100551=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.st=0,t.prototype.nm="",t.encode=function(t,e){return e||(e=s.create()),null!=t.st&&Object.hasOwnProperty.call(t,"st")&&e.uint32(8).int32(t.st),null!=t.nm&&Object.hasOwnProperty.call(t,"nm")&&e.uint32(18).string(t.nm),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1100551;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.st=t.int32();break;case 2:s.nm=t.string();break;default:t.skipType(7&i)}}return s},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.st&&t.hasOwnProperty("st")&&!i.isInteger(t.st)?"st: integer expected":null!=t.nm&&t.hasOwnProperty("nm")&&!i.isString(t.nm)?"nm: string expected":null},t}(),e.ChatMsg=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.mn=0,t.prototype.sz=0,t.prototype.ml=0,t.prototype.ts=i.Long?i.Long.fromBits(0,0,!1):0,t.prototype.snm="",t.prototype.nc="",t.prototype.msg="",t.prototype.clr="",t.prototype.rnm="",t.encode=function(t,e){return e||(e=s.create()),null!=t.mn&&Object.hasOwnProperty.call(t,"mn")&&e.uint32(8).int32(t.mn),null!=t.sz&&Object.hasOwnProperty.call(t,"sz")&&e.uint32(16).int32(t.sz),null!=t.ml&&Object.hasOwnProperty.call(t,"ml")&&e.uint32(24).int32(t.ml),null!=t.ts&&Object.hasOwnProperty.call(t,"ts")&&e.uint32(32).int64(t.ts),null!=t.snm&&Object.hasOwnProperty.call(t,"snm")&&e.uint32(42).string(t.snm),null!=t.nc&&Object.hasOwnProperty.call(t,"nc")&&e.uint32(50).string(t.nc),null!=t.msg&&Object.hasOwnProperty.call(t,"msg")&&e.uint32(58).string(t.msg),null!=t.clr&&Object.hasOwnProperty.call(t,"clr")&&e.uint32(66).string(t.clr),null!=t.rnm&&Object.hasOwnProperty.call(t,"rnm")&&e.uint32(74).string(t.rnm),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.ChatMsg;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.mn=t.int32();break;case 2:s.sz=t.int32();break;case 3:s.ml=t.int32();break;case 4:s.ts=t.int64();break;case 5:s.snm=t.string();break;case 6:s.nc=t.string();break;case 7:s.msg=t.string();break;case 8:s.clr=t.string();break;case 9:s.rnm=t.string();break;default:t.skipType(7&i)}}return s},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.mn&&t.hasOwnProperty("mn")&&!i.isInteger(t.mn)?"mn: integer expected":null!=t.sz&&t.hasOwnProperty("sz")&&!i.isInteger(t.sz)?"sz: integer expected":null!=t.ml&&t.hasOwnProperty("ml")&&!i.isInteger(t.ml)?"ml: integer expected":null!=t.ts&&t.hasOwnProperty("ts")&&!(i.isInteger(t.ts)||t.ts&&i.isInteger(t.ts.low)&&i.isInteger(t.ts.high))?"ts: integer|Long expected":null!=t.snm&&t.hasOwnProperty("snm")&&!i.isString(t.snm)?"snm: string expected":null!=t.nc&&t.hasOwnProperty("nc")&&!i.isString(t.nc)?"nc: string expected":null!=t.msg&&t.hasOwnProperty("msg")&&!i.isString(t.msg)?"msg: string expected":null!=t.clr&&t.hasOwnProperty("clr")&&!i.isString(t.clr)?"clr: string expected":null!=t.rnm&&t.hasOwnProperty("rnm")&&!i.isString(t.rnm)?"rnm: string expected":null},t}(),e.p_1100571=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.ts=i.Long?i.Long.fromBits(0,0,!1):0,t.prototype.snm="",t.prototype.rnm="",t.prototype.msg="",t.prototype.ml=0,t.prototype.my=!1,t.encode=function(t,e){return e||(e=s.create()),null!=t.ts&&Object.hasOwnProperty.call(t,"ts")&&e.uint32(8).int64(t.ts),null!=t.snm&&Object.hasOwnProperty.call(t,"snm")&&e.uint32(18).string(t.snm),null!=t.rnm&&Object.hasOwnProperty.call(t,"rnm")&&e.uint32(26).string(t.rnm),null!=t.msg&&Object.hasOwnProperty.call(t,"msg")&&e.uint32(34).string(t.msg),null!=t.ml&&Object.hasOwnProperty.call(t,"ml")&&e.uint32(40).int32(t.ml),null!=t.my&&Object.hasOwnProperty.call(t,"my")&&e.uint32(48).bool(t.my),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1100571;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.ts=t.int64();break;case 2:s.snm=t.string();break;case 3:s.rnm=t.string();break;case 4:s.msg=t.string();break;case 5:s.ml=t.int32();break;case 6:s.my=t.bool();break;default:t.skipType(7&i)}}return s},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.ts&&t.hasOwnProperty("ts")&&!(i.isInteger(t.ts)||t.ts&&i.isInteger(t.ts.low)&&i.isInteger(t.ts.high))?"ts: integer|Long expected":null!=t.snm&&t.hasOwnProperty("snm")&&!i.isString(t.snm)?"snm: string expected":null!=t.rnm&&t.hasOwnProperty("rnm")&&!i.isString(t.rnm)?"rnm: string expected":null!=t.msg&&t.hasOwnProperty("msg")&&!i.isString(t.msg)?"msg: string expected":null!=t.ml&&t.hasOwnProperty("ml")&&!i.isInteger(t.ml)?"ml: integer expected":null!=t.my&&t.hasOwnProperty("my")&&"boolean"!=typeof t.my?"my: boolean expected":null},t}(),e.p_1100574=function(){function t(t){if(this.rs=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.snm="",t.prototype.rnm="",t.prototype.di=0,t.prototype.sd=0,t.prototype.rs=i.emptyArray,t.encode=function(t,e){if(e||(e=s.create()),null!=t.snm&&Object.hasOwnProperty.call(t,"snm")&&e.uint32(10).string(t.snm),null!=t.rnm&&Object.hasOwnProperty.call(t,"rnm")&&e.uint32(18).string(t.rnm),null!=t.di&&Object.hasOwnProperty.call(t,"di")&&e.uint32(24).int32(t.di),null!=t.sd&&Object.hasOwnProperty.call(t,"sd")&&e.uint32(32).int32(t.sd),null!=t.rs&&t.rs.length){e.uint32(42).fork();for(var n=0;n<t.rs.length;++n)e.int32(t.rs[n]);e.ldelim()}return e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1100574;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.snm=t.string();break;case 2:s.rnm=t.string();break;case 3:s.di=t.int32();break;case 4:s.sd=t.int32();break;case 5:if(s.rs&&s.rs.length||(s.rs=[]),2==(7&i))for(var o=t.uint32()+t.pos;t.pos<o;)s.rs.push(t.int32());else s.rs.push(t.int32());break;default:t.skipType(7&i)}}return s},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.snm&&t.hasOwnProperty("snm")&&!i.isString(t.snm))return"snm: string expected";if(null!=t.rnm&&t.hasOwnProperty("rnm")&&!i.isString(t.rnm))return"rnm: string expected";if(null!=t.di&&t.hasOwnProperty("di")&&!i.isInteger(t.di))return"di: integer expected";if(null!=t.sd&&t.hasOwnProperty("sd")&&!i.isInteger(t.sd))return"sd: integer expected";if(null!=t.rs&&t.hasOwnProperty("rs")){if(!Array.isArray(t.rs))return"rs: array expected";for(var e=0;e<t.rs.length;++e)if(!i.isInteger(t.rs[e]))return"rs: integer[] expected"}return null},t}(),e.p_1200611=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.lo=0,t.encode=function(t,e){return e||(e=s.create()),null!=t.lo&&Object.hasOwnProperty.call(t,"lo")&&e.uint32(8).int32(t.lo),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1200611;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.lo=t.int32();break;default:t.skipType(7&i)}}return s},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.lo&&t.hasOwnProperty("lo")&&!i.isInteger(t.lo)?"lo: integer expected":null},t}(),e.p_1100614=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.lo=0,t.prototype.nm="",t.encode=function(t,e){return e||(e=s.create()),null!=t.lo&&Object.hasOwnProperty.call(t,"lo")&&e.uint32(8).int32(t.lo),null!=t.nm&&Object.hasOwnProperty.call(t,"nm")&&e.uint32(18).string(t.nm),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1100614;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.lo=t.int32();break;case 2:s.nm=t.string();break;default:t.skipType(7&i)}}return s},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.lo&&t.hasOwnProperty("lo")&&!i.isInteger(t.lo)?"lo: integer expected":null!=t.nm&&t.hasOwnProperty("nm")&&!i.isString(t.nm)?"nm: string expected":null},t}(),e.p_1200191=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.rp=null,t.encode=function(t,e){return e||(e=s.create()),null!=t.rp&&Object.hasOwnProperty.call(t,"rp")&&r.fc.Policy.encode(t.rp,e.uint32(10).fork()).ldelim(),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1200191;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.rp=r.fc.Policy.decode(t,t.uint32());break;default:t.skipType(7&i)}}return s},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.rp&&t.hasOwnProperty("rp")){var e=r.fc.Policy.verify(t.rp);if(e)return"rp."+e}return null},t}(),e.p_1100191=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.rp=null,t.encode=function(t,e){return e||(e=s.create()),null!=t.rp&&Object.hasOwnProperty.call(t,"rp")&&r.fc.Policy.encode(t.rp,e.uint32(10).fork()).ldelim(),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1100191;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.rp=r.fc.Policy.decode(t,t.uint32());break;default:t.skipType(7&i)}}return s},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.rp&&t.hasOwnProperty("rp")){var e=r.fc.Policy.verify(t.rp);if(e)return"rp."+e}return null},t}(),e.Policy=function(){function t(t){if(this.kv=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.kv=i.emptyArray,t.encode=function(t,e){if(e||(e=s.create()),null!=t.kv&&t.kv.length)for(var n=0;n<t.kv.length;++n)r.fc.KeyValue.encode(t.kv[n],e.uint32(10).fork()).ldelim();return e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.Policy;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.kv&&s.kv.length||(s.kv=[]),s.kv.push(r.fc.KeyValue.decode(t,t.uint32()));break;default:t.skipType(7&i)}}return s},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.kv&&t.hasOwnProperty("kv")){if(!Array.isArray(t.kv))return"kv: array expected";for(var e=0;e<t.kv.length;++e){var n=r.fc.KeyValue.verify(t.kv[e]);if(n)return"kv."+n}}return null},t}(),e.KeyValue=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.k="",t.prototype.v="",t.encode=function(t,e){return e||(e=s.create()),null!=t.k&&Object.hasOwnProperty.call(t,"k")&&e.uint32(10).string(t.k),null!=t.v&&Object.hasOwnProperty.call(t,"v")&&e.uint32(18).string(t.v),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.KeyValue;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.k=t.string();break;case 2:s.v=t.string();break;default:t.skipType(7&i)}}return s},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.k&&t.hasOwnProperty("k")&&!i.isString(t.k)?"k: string expected":null!=t.v&&t.hasOwnProperty("v")&&!i.isString(t.v)?"v: string expected":null},t}(),e.p_1200621=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.cn=0,t.encode=function(t,e){return e||(e=s.create()),null!=t.cn&&Object.hasOwnProperty.call(t,"cn")&&e.uint32(8).int32(t.cn),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1200621;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.cn=t.int32();break;default:t.skipType(7&i)}}return s},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.cn&&t.hasOwnProperty("cn")&&!i.isInteger(t.cn)?"cn: integer expected":null},t}(),e.p_1100621=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.cam=null,t.encode=function(t,e){return e||(e=s.create()),null!=t.cam&&Object.hasOwnProperty.call(t,"cam")&&r.fc.Cam.encode(t.cam,e.uint32(10).fork()).ldelim(),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1100621;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.cam=r.fc.Cam.decode(t,t.uint32());break;default:t.skipType(7&i)}}return s},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.cam&&t.hasOwnProperty("cam")){var e=r.fc.Cam.verify(t.cam);if(e)return"cam."+e}return null},t}(),e.p_1100627=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.cn=0,t.prototype.rsn="",t.prototype.stp=null,t.encode=function(t,e){return e||(e=s.create()),null!=t.cn&&Object.hasOwnProperty.call(t,"cn")&&e.uint32(8).int32(t.cn),null!=t.rsn&&Object.hasOwnProperty.call(t,"rsn")&&e.uint32(18).string(t.rsn),null!=t.stp&&Object.hasOwnProperty.call(t,"stp")&&r.fc.CamStop.encode(t.stp,e.uint32(26).fork()).ldelim(),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1100627;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.cn=t.int32();break;case 2:s.rsn=t.string();break;case 3:s.stp=r.fc.CamStop.decode(t,t.uint32());break;default:t.skipType(7&i)}}return s},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.cn&&t.hasOwnProperty("cn")&&!i.isInteger(t.cn))return"cn: integer expected";if(null!=t.rsn&&t.hasOwnProperty("rsn")&&!i.isString(t.rsn))return"rsn: string expected";if(null!=t.stp&&t.hasOwnProperty("stp")){var e=r.fc.CamStop.verify(t.stp);if(e)return"stp."+e}return null},t}(),e.p_1200631=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.cn=0,t.encode=function(t,e){return e||(e=s.create()),null!=t.cn&&Object.hasOwnProperty.call(t,"cn")&&e.uint32(8).int32(t.cn),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1200631;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.cn=t.int32();break;default:t.skipType(7&i)}}return s},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.cn&&t.hasOwnProperty("cn")&&!i.isInteger(t.cn)?"cn: integer expected":null},t}(),e.p_1100631=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.cn=0,t.prototype.stp=null,t.encode=function(t,e){return e||(e=s.create()),null!=t.cn&&Object.hasOwnProperty.call(t,"cn")&&e.uint32(8).int32(t.cn),null!=t.stp&&Object.hasOwnProperty.call(t,"stp")&&r.fc.CamStop.encode(t.stp,e.uint32(18).fork()).ldelim(),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1100631;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.cn=t.int32();break;case 2:s.stp=r.fc.CamStop.decode(t,t.uint32());break;default:t.skipType(7&i)}}return s},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.cn&&t.hasOwnProperty("cn")&&!i.isInteger(t.cn))return"cn: integer expected";if(null!=t.stp&&t.hasOwnProperty("stp")){var e=r.fc.CamStop.verify(t.stp);if(e)return"stp."+e}return null},t}(),e.CamStop=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.mnm="",t.prototype.nm="",t.prototype.rsn="",t.prototype.ls=0,t.prototype.rs=0,t.encode=function(t,e){return e||(e=s.create()),null!=t.mnm&&Object.hasOwnProperty.call(t,"mnm")&&e.uint32(10).string(t.mnm),null!=t.nm&&Object.hasOwnProperty.call(t,"nm")&&e.uint32(18).string(t.nm),null!=t.rsn&&Object.hasOwnProperty.call(t,"rsn")&&e.uint32(26).string(t.rsn),null!=t.ls&&Object.hasOwnProperty.call(t,"ls")&&e.uint32(32).int32(t.ls),null!=t.rs&&Object.hasOwnProperty.call(t,"rs")&&e.uint32(40).int32(t.rs),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.CamStop;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.mnm=t.string();break;case 2:s.nm=t.string();break;case 3:s.rsn=t.string();break;case 4:s.ls=t.int32();break;case 5:s.rs=t.int32();break;default:t.skipType(7&i)}}return s},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.mnm&&t.hasOwnProperty("mnm")&&!i.isString(t.mnm)?"mnm: string expected":null!=t.nm&&t.hasOwnProperty("nm")&&!i.isString(t.nm)?"nm: string expected":null!=t.rsn&&t.hasOwnProperty("rsn")&&!i.isString(t.rsn)?"rsn: string expected":null!=t.ls&&t.hasOwnProperty("ls")&&!i.isInteger(t.ls)?"ls: integer expected":null!=t.rs&&t.hasOwnProperty("rs")&&!i.isInteger(t.rs)?"rs: integer expected":null},t}(),e.Cam=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.cn=0,t.prototype.nm="",t.prototype.cs=null,t.encode=function(t,e){return e||(e=s.create()),null!=t.cn&&Object.hasOwnProperty.call(t,"cn")&&e.uint32(8).int32(t.cn),null!=t.nm&&Object.hasOwnProperty.call(t,"nm")&&e.uint32(18).string(t.nm),null!=t.cs&&Object.hasOwnProperty.call(t,"cs")&&r.fc.Camserver.encode(t.cs,e.uint32(26).fork()).ldelim(),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.Cam;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.cn=t.int32();break;case 2:s.nm=t.string();break;case 3:s.cs=r.fc.Camserver.decode(t,t.uint32());break;default:t.skipType(7&i)}}return s},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.cn&&t.hasOwnProperty("cn")&&!i.isInteger(t.cn))return"cn: integer expected";if(null!=t.nm&&t.hasOwnProperty("nm")&&!i.isString(t.nm))return"nm: string expected";if(null!=t.cs&&t.hasOwnProperty("cs")){var e=r.fc.Camserver.verify(t.cs);if(e)return"cs."+e}return null},t}(),e.Camserver=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.fn="",t.prototype.lc="",t.prototype.ta="",t.prototype.tu="",t.prototype.tp="",t.encode=function(t,e){return e||(e=s.create()),null!=t.fn&&Object.hasOwnProperty.call(t,"fn")&&e.uint32(10).string(t.fn),null!=t.lc&&Object.hasOwnProperty.call(t,"lc")&&e.uint32(18).string(t.lc),null!=t.ta&&Object.hasOwnProperty.call(t,"ta")&&e.uint32(26).string(t.ta),null!=t.tu&&Object.hasOwnProperty.call(t,"tu")&&e.uint32(34).string(t.tu),null!=t.tp&&Object.hasOwnProperty.call(t,"tp")&&e.uint32(42).string(t.tp),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.Camserver;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.fn=t.string();break;case 2:s.lc=t.string();break;case 3:s.ta=t.string();break;case 4:s.tu=t.string();break;case 5:s.tp=t.string();break;default:t.skipType(7&i)}}return s},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.fn&&t.hasOwnProperty("fn")&&!i.isString(t.fn)?"fn: string expected":null!=t.lc&&t.hasOwnProperty("lc")&&!i.isString(t.lc)?"lc: string expected":null!=t.ta&&t.hasOwnProperty("ta")&&!i.isString(t.ta)?"ta: string expected":null!=t.tu&&t.hasOwnProperty("tu")&&!i.isString(t.tu)?"tu: string expected":null!=t.tp&&t.hasOwnProperty("tp")&&!i.isString(t.tp)?"tp: string expected":null},t}(),e.p_1200711=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.cn=0,t.prototype.op1=!1,t.prototype.op2=!1,t.prototype.op3=!1,t.encode=function(t,e){return e||(e=s.create()),null!=t.cn&&Object.hasOwnProperty.call(t,"cn")&&e.uint32(8).int32(t.cn),null!=t.op1&&Object.hasOwnProperty.call(t,"op1")&&e.uint32(16).bool(t.op1),null!=t.op2&&Object.hasOwnProperty.call(t,"op2")&&e.uint32(24).bool(t.op2),null!=t.op3&&Object.hasOwnProperty.call(t,"op3")&&e.uint32(32).bool(t.op3),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1200711;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.cn=t.int32();break;case 2:s.op1=t.bool();break;case 3:s.op2=t.bool();break;case 4:s.op3=t.bool();break;default:t.skipType(7&i)}}return s},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.cn&&t.hasOwnProperty("cn")&&!i.isInteger(t.cn)?"cn: integer expected":null!=t.op1&&t.hasOwnProperty("op1")&&"boolean"!=typeof t.op1?"op1: boolean expected":null!=t.op2&&t.hasOwnProperty("op2")&&"boolean"!=typeof t.op2?"op2: boolean expected":null!=t.op3&&t.hasOwnProperty("op3")&&"boolean"!=typeof t.op3?"op3: boolean expected":null},t}(),e.p_1100711=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.cn=0,t.prototype.ti=0,t.encode=function(t,e){return e||(e=s.create()),null!=t.cn&&Object.hasOwnProperty.call(t,"cn")&&e.uint32(8).int32(t.cn),null!=t.ti&&Object.hasOwnProperty.call(t,"ti")&&e.uint32(16).int32(t.ti),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1100711;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.cn=t.int32();break;case 2:s.ti=t.int32();break;default:t.skipType(7&i)}}return s},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.cn&&t.hasOwnProperty("cn")&&!i.isInteger(t.cn)?"cn: integer expected":null!=t.ti&&t.hasOwnProperty("ti")&&!i.isInteger(t.ti)?"ti: integer expected":null},t}(),e.p_1200723=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.sdp=null,t.encode=function(t,e){return e||(e=s.create()),null!=t.sdp&&Object.hasOwnProperty.call(t,"sdp")&&r.fc.SDP.encode(t.sdp,e.uint32(10).fork()).ldelim(),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1200723;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.sdp=r.fc.SDP.decode(t,t.uint32());break;default:t.skipType(7&i)}}return s},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.sdp&&t.hasOwnProperty("sdp")){var e=r.fc.SDP.verify(t.sdp);if(e)return"sdp."+e}return null},t}(),e.p_1200724=function(){function t(t){if(this.sdp=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.sdp=i.emptyArray,t.encode=function(t,e){if(e||(e=s.create()),null!=t.sdp&&t.sdp.length)for(var n=0;n<t.sdp.length;++n)r.fc.SDP.encode(t.sdp[n],e.uint32(10).fork()).ldelim();return e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1200724;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.sdp&&s.sdp.length||(s.sdp=[]),s.sdp.push(r.fc.SDP.decode(t,t.uint32()));break;default:t.skipType(7&i)}}return s},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.sdp&&t.hasOwnProperty("sdp")){if(!Array.isArray(t.sdp))return"sdp: array expected";for(var e=0;e<t.sdp.length;++e){var n=r.fc.SDP.verify(t.sdp[e]);if(n)return"sdp."+n}}return null},t}(),e.p_1100723=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.sdp=null,t.encode=function(t,e){return e||(e=s.create()),null!=t.sdp&&Object.hasOwnProperty.call(t,"sdp")&&r.fc.SDP.encode(t.sdp,e.uint32(10).fork()).ldelim(),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1100723;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.sdp=r.fc.SDP.decode(t,t.uint32());break;default:t.skipType(7&i)}}return s},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.sdp&&t.hasOwnProperty("sdp")){var e=r.fc.SDP.verify(t.sdp);if(e)return"sdp."+e}return null},t}(),e.p_1200735=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.sdp=null,t.encode=function(t,e){return e||(e=s.create()),null!=t.sdp&&Object.hasOwnProperty.call(t,"sdp")&&r.fc.SDP.encode(t.sdp,e.uint32(10).fork()).ldelim(),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1200735;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.sdp=r.fc.SDP.decode(t,t.uint32());break;default:t.skipType(7&i)}}return s},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.sdp&&t.hasOwnProperty("sdp")){var e=r.fc.SDP.verify(t.sdp);if(e)return"sdp."+e}return null},t}(),e.p_1100735=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.sdp=null,t.encode=function(t,e){return e||(e=s.create()),null!=t.sdp&&Object.hasOwnProperty.call(t,"sdp")&&r.fc.SDP.encode(t.sdp,e.uint32(10).fork()).ldelim(),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1100735;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.sdp=r.fc.SDP.decode(t,t.uint32());break;default:t.skipType(7&i)}}return s},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.sdp&&t.hasOwnProperty("sdp")){var e=r.fc.SDP.verify(t.sdp);if(e)return"sdp."+e}return null},t}(),e.SDP=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.cn=0,t.prototype.ti=0,t.prototype.dsc="",t.encode=function(t,e){return e||(e=s.create()),null!=t.cn&&Object.hasOwnProperty.call(t,"cn")&&e.uint32(8).int32(t.cn),null!=t.ti&&Object.hasOwnProperty.call(t,"ti")&&e.uint32(16).int32(t.ti),null!=t.dsc&&Object.hasOwnProperty.call(t,"dsc")&&e.uint32(26).string(t.dsc),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.SDP;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.cn=t.int32();break;case 2:s.ti=t.int32();break;case 3:s.dsc=t.string();break;default:t.skipType(7&i)}}return s},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.cn&&t.hasOwnProperty("cn")&&!i.isInteger(t.cn)?"cn: integer expected":null!=t.ti&&t.hasOwnProperty("ti")&&!i.isInteger(t.ti)?"ti: integer expected":null!=t.dsc&&t.hasOwnProperty("dsc")&&!i.isString(t.dsc)?"dsc: string expected":null},t}(),e.p_1200747=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.cn=0,t.prototype.ti=0,t.prototype.cnd="",t.encode=function(t,e){return e||(e=s.create()),null!=t.cn&&Object.hasOwnProperty.call(t,"cn")&&e.uint32(8).int32(t.cn),null!=t.ti&&Object.hasOwnProperty.call(t,"ti")&&e.uint32(16).int32(t.ti),null!=t.cnd&&Object.hasOwnProperty.call(t,"cnd")&&e.uint32(26).string(t.cnd),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1200747;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.cn=t.int32();break;case 2:s.ti=t.int32();break;case 3:s.cnd=t.string();break;default:t.skipType(7&i)}}return s},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.cn&&t.hasOwnProperty("cn")&&!i.isInteger(t.cn)?"cn: integer expected":null!=t.ti&&t.hasOwnProperty("ti")&&!i.isInteger(t.ti)?"ti: integer expected":null!=t.cnd&&t.hasOwnProperty("cnd")&&!i.isString(t.cnd)?"cnd: string expected":null},t}(),e.p_1100747=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.cn=0,t.prototype.ti=0,t.prototype.cnd="",t.encode=function(t,e){return e||(e=s.create()),null!=t.cn&&Object.hasOwnProperty.call(t,"cn")&&e.uint32(8).int32(t.cn),null!=t.ti&&Object.hasOwnProperty.call(t,"ti")&&e.uint32(16).int32(t.ti),null!=t.cnd&&Object.hasOwnProperty.call(t,"cnd")&&e.uint32(26).string(t.cnd),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1100747;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.cn=t.int32();break;case 2:s.ti=t.int32();break;case 3:s.cnd=t.string();break;default:t.skipType(7&i)}}return s},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.cn&&t.hasOwnProperty("cn")&&!i.isInteger(t.cn)?"cn: integer expected":null!=t.ti&&t.hasOwnProperty("ti")&&!i.isInteger(t.ti)?"ti: integer expected":null!=t.cnd&&t.hasOwnProperty("cnd")&&!i.isString(t.cnd)?"cnd: string expected":null},t}(),e.p_1200748=function(){function t(t){if(this.cnd=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.cn=0,t.prototype.ti=0,t.prototype.cnd=i.emptyArray,t.encode=function(t,e){if(e||(e=s.create()),null!=t.cn&&Object.hasOwnProperty.call(t,"cn")&&e.uint32(8).int32(t.cn),null!=t.ti&&Object.hasOwnProperty.call(t,"ti")&&e.uint32(16).int32(t.ti),null!=t.cnd&&t.cnd.length)for(var n=0;n<t.cnd.length;++n)e.uint32(26).string(t.cnd[n]);return e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1200748;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.cn=t.int32();break;case 2:s.ti=t.int32();break;case 3:s.cnd&&s.cnd.length||(s.cnd=[]),s.cnd.push(t.string());break;default:t.skipType(7&i)}}return s},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.cn&&t.hasOwnProperty("cn")&&!i.isInteger(t.cn))return"cn: integer expected";if(null!=t.ti&&t.hasOwnProperty("ti")&&!i.isInteger(t.ti))return"ti: integer expected";if(null!=t.cnd&&t.hasOwnProperty("cnd")){if(!Array.isArray(t.cnd))return"cnd: array expected";for(var e=0;e<t.cnd.length;++e)if(!i.isString(t.cnd[e]))return"cnd: string[] expected"}return null},t}(),e.p_1100748=function(){function t(t){if(this.cnd=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.cn=0,t.prototype.ti=0,t.prototype.cnd=i.emptyArray,t.encode=function(t,e){if(e||(e=s.create()),null!=t.cn&&Object.hasOwnProperty.call(t,"cn")&&e.uint32(8).int32(t.cn),null!=t.ti&&Object.hasOwnProperty.call(t,"ti")&&e.uint32(16).int32(t.ti),null!=t.cnd&&t.cnd.length)for(var n=0;n<t.cnd.length;++n)e.uint32(26).string(t.cnd[n]);return e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1100748;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.cn=t.int32();break;case 2:s.ti=t.int32();break;case 3:s.cnd&&s.cnd.length||(s.cnd=[]),s.cnd.push(t.string());break;default:t.skipType(7&i)}}return s},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.cn&&t.hasOwnProperty("cn")&&!i.isInteger(t.cn))return"cn: integer expected";if(null!=t.ti&&t.hasOwnProperty("ti")&&!i.isInteger(t.ti))return"ti: integer expected";if(null!=t.cnd&&t.hasOwnProperty("cnd")){if(!Array.isArray(t.cnd))return"cnd: array expected";for(var e=0;e<t.cnd.length;++e)if(!i.isString(t.cnd[e]))return"cnd: string[] expected"}return null},t}(),e.p_1200798=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.cn=0,t.encode=function(t,e){return e||(e=s.create()),null!=t.cn&&Object.hasOwnProperty.call(t,"cn")&&e.uint32(8).int32(t.cn),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1200798;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.cn=t.int32();break;default:t.skipType(7&i)}}return s},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.cn&&t.hasOwnProperty("cn")&&!i.isInteger(t.cn)?"cn: integer expected":null},t}(),e.p_1100798=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.cn=0,t.prototype.ti=0,t.encode=function(t,e){return e||(e=s.create()),null!=t.cn&&Object.hasOwnProperty.call(t,"cn")&&e.uint32(8).int32(t.cn),null!=t.ti&&Object.hasOwnProperty.call(t,"ti")&&e.uint32(16).int32(t.ti),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1100798;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.cn=t.int32();break;case 2:s.ti=t.int32();break;default:t.skipType(7&i)}}return s},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.cn&&t.hasOwnProperty("cn")&&!i.isInteger(t.cn)?"cn: integer expected":null!=t.ti&&t.hasOwnProperty("ti")&&!i.isInteger(t.ti)?"ti: integer expected":null},t}(),e.p_1200799=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.cn=0,t.prototype.ti=0,t.prototype.er=0,t.encode=function(t,e){return e||(e=s.create()),null!=t.cn&&Object.hasOwnProperty.call(t,"cn")&&e.uint32(8).int32(t.cn),null!=t.ti&&Object.hasOwnProperty.call(t,"ti")&&e.uint32(16).int32(t.ti),null!=t.er&&Object.hasOwnProperty.call(t,"er")&&e.uint32(24).int32(t.er),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1200799;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.cn=t.int32();break;case 2:s.ti=t.int32();break;case 3:s.er=t.int32();break;default:t.skipType(7&i)}}return s},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.cn&&t.hasOwnProperty("cn")&&!i.isInteger(t.cn)?"cn: integer expected":null!=t.ti&&t.hasOwnProperty("ti")&&!i.isInteger(t.ti)?"ti: integer expected":null!=t.er&&t.hasOwnProperty("er")&&!i.isInteger(t.er)?"er: integer expected":null},t}(),e.p_1200811=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.nm="",t.encode=function(t,e){return e||(e=s.create()),null!=t.nm&&Object.hasOwnProperty.call(t,"nm")&&e.uint32(18).string(t.nm),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1200811;t.pos<n;){var i=t.uint32();switch(i>>>3){case 2:s.nm=t.string();break;default:t.skipType(7&i)}}return s},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.nm&&t.hasOwnProperty("nm")&&!i.isString(t.nm)?"nm: string expected":null},t}(),e.p_1100811=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.mnm="",t.prototype.nm="",t.encode=function(t,e){return e||(e=s.create()),null!=t.mnm&&Object.hasOwnProperty.call(t,"mnm")&&e.uint32(10).string(t.mnm),null!=t.nm&&Object.hasOwnProperty.call(t,"nm")&&e.uint32(18).string(t.nm),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1100811;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.mnm=t.string();break;case 2:s.nm=t.string();break;default:t.skipType(7&i)}}return s},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.mnm&&t.hasOwnProperty("mnm")&&!i.isString(t.mnm)?"mnm: string expected":null!=t.nm&&t.hasOwnProperty("nm")&&!i.isString(t.nm)?"nm: string expected":null},t}(),e.p_1200815=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.nm="",t.encode=function(t,e){return e||(e=s.create()),null!=t.nm&&Object.hasOwnProperty.call(t,"nm")&&e.uint32(18).string(t.nm),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1200815;t.pos<n;){var i=t.uint32();switch(i>>>3){case 2:s.nm=t.string();break;default:t.skipType(7&i)}}return s},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.nm&&t.hasOwnProperty("nm")&&!i.isString(t.nm)?"nm: string expected":null},t}(),e.p_1100815=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.mnm="",t.prototype.nm="",t.encode=function(t,e){return e||(e=s.create()),null!=t.mnm&&Object.hasOwnProperty.call(t,"mnm")&&e.uint32(10).string(t.mnm),null!=t.nm&&Object.hasOwnProperty.call(t,"nm")&&e.uint32(18).string(t.nm),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1100815;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.mnm=t.string();break;case 2:s.nm=t.string();break;default:t.skipType(7&i)}}return s},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.mnm&&t.hasOwnProperty("mnm")&&!i.isString(t.mnm)?"mnm: string expected":null!=t.nm&&t.hasOwnProperty("nm")&&!i.isString(t.nm)?"nm: string expected":null},t}(),e.p_1200821=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.tpc="",t.encode=function(t,e){return e||(e=s.create()),null!=t.tpc&&Object.hasOwnProperty.call(t,"tpc")&&e.uint32(10).string(t.tpc),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1200821;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.tpc=t.string();break;default:t.skipType(7&i)}}return s},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.tpc&&t.hasOwnProperty("tpc")&&!i.isString(t.tpc)?"tpc: string expected":null},t}(),e.p_1100821=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.tpc="",t.encode=function(t,e){return e||(e=s.create()),null!=t.tpc&&Object.hasOwnProperty.call(t,"tpc")&&e.uint32(10).string(t.tpc),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1100821;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.tpc=t.string();break;default:t.skipType(7&i)}}return s},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.tpc&&t.hasOwnProperty("tpc")&&!i.isString(t.tpc)?"tpc: string expected":null},t}(),e.p_1200831=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.nm="",t.prototype.rsn="",t.prototype.ls=0,t.encode=function(t,e){return e||(e=s.create()),null!=t.nm&&Object.hasOwnProperty.call(t,"nm")&&e.uint32(10).string(t.nm),null!=t.rsn&&Object.hasOwnProperty.call(t,"rsn")&&e.uint32(18).string(t.rsn),null!=t.ls&&Object.hasOwnProperty.call(t,"ls")&&e.uint32(24).int32(t.ls),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1200831;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.nm=t.string();break;case 2:s.rsn=t.string();break;case 3:s.ls=t.int32();break;default:t.skipType(7&i)}}return s},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.nm&&t.hasOwnProperty("nm")&&!i.isString(t.nm)?"nm: string expected":null!=t.rsn&&t.hasOwnProperty("rsn")&&!i.isString(t.rsn)?"rsn: string expected":null!=t.ls&&t.hasOwnProperty("ls")&&!i.isInteger(t.ls)?"ls: integer expected":null},t}(),e.p_1100831=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.kick=null,t.encode=function(t,e){return e||(e=s.create()),null!=t.kick&&Object.hasOwnProperty.call(t,"kick")&&r.fc.Kick.encode(t.kick,e.uint32(10).fork()).ldelim(),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1100831;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.kick=r.fc.Kick.decode(t,t.uint32());break;default:t.skipType(7&i)}}return s},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.kick&&t.hasOwnProperty("kick")){var e=r.fc.Kick.verify(t.kick);if(e)return"kick."+e}return null},t}(),e.Kick=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.mnm="",t.prototype.nm="",t.prototype.rsn="",t.prototype.ls=0,t.prototype.rs=0,t.prototype.stm=0,t.prototype.stc=0,t.encode=function(t,e){return e||(e=s.create()),null!=t.mnm&&Object.hasOwnProperty.call(t,"mnm")&&e.uint32(10).string(t.mnm),null!=t.nm&&Object.hasOwnProperty.call(t,"nm")&&e.uint32(18).string(t.nm),null!=t.rsn&&Object.hasOwnProperty.call(t,"rsn")&&e.uint32(26).string(t.rsn),null!=t.ls&&Object.hasOwnProperty.call(t,"ls")&&e.uint32(32).int32(t.ls),null!=t.rs&&Object.hasOwnProperty.call(t,"rs")&&e.uint32(40).int32(t.rs),null!=t.stm&&Object.hasOwnProperty.call(t,"stm")&&e.uint32(48).int32(t.stm),null!=t.stc&&Object.hasOwnProperty.call(t,"stc")&&e.uint32(56).int32(t.stc),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.Kick;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.mnm=t.string();break;case 2:s.nm=t.string();break;case 3:s.rsn=t.string();break;case 4:s.ls=t.int32();break;case 5:s.rs=t.int32();break;case 6:s.stm=t.int32();break;case 7:s.stc=t.int32();break;default:t.skipType(7&i)}}return s},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.mnm&&t.hasOwnProperty("mnm")&&!i.isString(t.mnm)?"mnm: string expected":null!=t.nm&&t.hasOwnProperty("nm")&&!i.isString(t.nm)?"nm: string expected":null!=t.rsn&&t.hasOwnProperty("rsn")&&!i.isString(t.rsn)?"rsn: string expected":null!=t.ls&&t.hasOwnProperty("ls")&&!i.isInteger(t.ls)?"ls: integer expected":null!=t.rs&&t.hasOwnProperty("rs")&&!i.isInteger(t.rs)?"rs: integer expected":null!=t.stm&&t.hasOwnProperty("stm")&&!i.isInteger(t.stm)?"stm: integer expected":null!=t.stc&&t.hasOwnProperty("stc")&&!i.isInteger(t.stc)?"stc: integer expected":null},t}(),e.p_1200841=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.nm="",t.prototype.prm=!1,t.encode=function(t,e){return e||(e=s.create()),null!=t.nm&&Object.hasOwnProperty.call(t,"nm")&&e.uint32(10).string(t.nm),null!=t.prm&&Object.hasOwnProperty.call(t,"prm")&&e.uint32(16).bool(t.prm),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1200841;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.nm=t.string();break;case 2:s.prm=t.bool();break;default:t.skipType(7&i)}}return s},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.nm&&t.hasOwnProperty("nm")&&!i.isString(t.nm)?"nm: string expected":null!=t.prm&&t.hasOwnProperty("prm")&&"boolean"!=typeof t.prm?"prm: boolean expected":null},t}(),e.p_1100841=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.ban=null,t.encode=function(t,e){return e||(e=s.create()),null!=t.ban&&Object.hasOwnProperty.call(t,"ban")&&r.fc.RoomBan.encode(t.ban,e.uint32(10).fork()).ldelim(),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1100841;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.ban=r.fc.RoomBan.decode(t,t.uint32());break;default:t.skipType(7&i)}}return s},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.ban&&t.hasOwnProperty("ban")){var e=r.fc.RoomBan.verify(t.ban);if(e)return"ban."+e}return null},t}(),e.RoomBan=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.bnm="",t.prototype.nm="",t.prototype.rsn="",t.prototype.exp=i.Long?i.Long.fromBits(0,0,!1):0,t.prototype.rs=i.Long?i.Long.fromBits(0,0,!1):0,t.prototype.prm=!1,t.encode=function(t,e){return e||(e=s.create()),null!=t.bnm&&Object.hasOwnProperty.call(t,"bnm")&&e.uint32(10).string(t.bnm),null!=t.nm&&Object.hasOwnProperty.call(t,"nm")&&e.uint32(18).string(t.nm),null!=t.rsn&&Object.hasOwnProperty.call(t,"rsn")&&e.uint32(26).string(t.rsn),null!=t.exp&&Object.hasOwnProperty.call(t,"exp")&&e.uint32(32).int64(t.exp),null!=t.rs&&Object.hasOwnProperty.call(t,"rs")&&e.uint32(40).int64(t.rs),null!=t.prm&&Object.hasOwnProperty.call(t,"prm")&&e.uint32(48).bool(t.prm),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.RoomBan;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.bnm=t.string();break;case 2:s.nm=t.string();break;case 3:s.rsn=t.string();break;case 4:s.exp=t.int64();break;case 5:s.rs=t.int64();break;case 6:s.prm=t.bool();break;default:t.skipType(7&i)}}return s},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.bnm&&t.hasOwnProperty("bnm")&&!i.isString(t.bnm)?"bnm: string expected":null!=t.nm&&t.hasOwnProperty("nm")&&!i.isString(t.nm)?"nm: string expected":null!=t.rsn&&t.hasOwnProperty("rsn")&&!i.isString(t.rsn)?"rsn: string expected":null!=t.exp&&t.hasOwnProperty("exp")&&!(i.isInteger(t.exp)||t.exp&&i.isInteger(t.exp.low)&&i.isInteger(t.exp.high))?"exp: integer|Long expected":null!=t.rs&&t.hasOwnProperty("rs")&&!(i.isInteger(t.rs)||t.rs&&i.isInteger(t.rs.low)&&i.isInteger(t.rs.high))?"rs: integer|Long expected":null!=t.prm&&t.hasOwnProperty("prm")&&"boolean"!=typeof t.prm?"prm: boolean expected":null},t}(),e.p_1200851=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.nm="",t.encode=function(t,e){return e||(e=s.create()),null!=t.nm&&Object.hasOwnProperty.call(t,"nm")&&e.uint32(18).string(t.nm),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1200851;t.pos<n;){var i=t.uint32();switch(i>>>3){case 2:s.nm=t.string();break;default:t.skipType(7&i)}}return s},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.nm&&t.hasOwnProperty("nm")&&!i.isString(t.nm)?"nm: string expected":null},t}(),e.p_1100851=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.mnm="",t.prototype.nm="",t.encode=function(t,e){return e||(e=s.create()),null!=t.mnm&&Object.hasOwnProperty.call(t,"mnm")&&e.uint32(10).string(t.mnm),null!=t.nm&&Object.hasOwnProperty.call(t,"nm")&&e.uint32(18).string(t.nm),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1100851;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.mnm=t.string();break;case 2:s.nm=t.string();break;default:t.skipType(7&i)}}return s},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.mnm&&t.hasOwnProperty("mnm")&&!i.isString(t.mnm)?"mnm: string expected":null!=t.nm&&t.hasOwnProperty("nm")&&!i.isString(t.nm)?"nm: string expected":null},t}(),e.p_1200881=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.nm="",t.encode=function(t,e){return e||(e=s.create()),null!=t.nm&&Object.hasOwnProperty.call(t,"nm")&&e.uint32(18).string(t.nm),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1200881;t.pos<n;){var i=t.uint32();switch(i>>>3){case 2:s.nm=t.string();break;default:t.skipType(7&i)}}return s},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.nm&&t.hasOwnProperty("nm")&&!i.isString(t.nm)?"nm: string expected":null},t}(),e.p_1100881=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.mnm="",t.prototype.nm="",t.encode=function(t,e){return e||(e=s.create()),null!=t.mnm&&Object.hasOwnProperty.call(t,"mnm")&&e.uint32(10).string(t.mnm),null!=t.nm&&Object.hasOwnProperty.call(t,"nm")&&e.uint32(18).string(t.nm),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.p_1100881;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.mnm=t.string();break;case 2:s.nm=t.string();break;default:t.skipType(7&i)}}return s},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.mnm&&t.hasOwnProperty("mnm")&&!i.isString(t.mnm)?"mnm: string expected":null!=t.nm&&t.hasOwnProperty("nm")&&!i.isString(t.nm)?"nm: string expected":null},t}(),e.c_4003=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.kick=null,t.encode=function(t,e){return e||(e=s.create()),null!=t.kick&&Object.hasOwnProperty.call(t,"kick")&&r.fc.Kick.encode(t.kick,e.uint32(10).fork()).ldelim(),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.c_4003;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.kick=r.fc.Kick.decode(t,t.uint32());break;default:t.skipType(7&i)}}return s},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.kick&&t.hasOwnProperty("kick")){var e=r.fc.Kick.verify(t.kick);if(e)return"kick."+e}return null},t}(),e.c_4004=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.ban=null,t.encode=function(t,e){return e||(e=s.create()),null!=t.ban&&Object.hasOwnProperty.call(t,"ban")&&r.fc.RoomBan.encode(t.ban,e.uint32(10).fork()).ldelim(),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.c_4004;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.ban=r.fc.RoomBan.decode(t,t.uint32());break;default:t.skipType(7&i)}}return s},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.ban&&t.hasOwnProperty("ban")){var e=r.fc.RoomBan.verify(t.ban);if(e)return"ban."+e}return null},t}(),e.c_4009=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.ms=0,t.prototype.msg="",t.prototype.jth="",t.encode=function(t,e){return e||(e=s.create()),null!=t.ms&&Object.hasOwnProperty.call(t,"ms")&&e.uint32(8).int32(t.ms),null!=t.msg&&Object.hasOwnProperty.call(t,"msg")&&e.uint32(18).string(t.msg),null!=t.jth&&Object.hasOwnProperty.call(t,"jth")&&e.uint32(26).string(t.jth),e},t.decode=function(t,e){t instanceof c||(t=c.create(t));for(var n=void 0===e?t.len:t.pos+e,s=new r.fc.c_4009;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:s.ms=t.int32();break;case 2:s.msg=t.string();break;case 3:s.jth=t.string();break;default:t.skipType(7&i)}}return s},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.ms&&t.hasOwnProperty("ms")&&!i.isInteger(t.ms)?"ms: integer expected":null!=t.msg&&t.hasOwnProperty("msg")&&!i.isString(t.msg)?"msg: string expected":null!=t.jth&&t.hasOwnProperty("jth")&&!i.isString(t.jth)?"jth: string expected":null},t}(),e)}(protobuf);